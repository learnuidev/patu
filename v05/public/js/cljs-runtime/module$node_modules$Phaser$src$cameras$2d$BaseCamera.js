shadow$provide.module$node_modules$Phaser$src$cameras$2d$BaseCamera=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");exports=require("module$node_modules$Phaser$src$gameobjects$components$index");var DegToRad=require("module$node_modules$Phaser$src$math$DegToRad"),EventEmitter=require("module$node_modules$eventemitter3$index"),Rectangle=require("module$node_modules$Phaser$src$geom$rectangle$Rectangle"),TransformMatrix=require("module$node_modules$Phaser$src$gameobjects$components$TransformMatrix"),
ValueToColor=require("module$node_modules$Phaser$src$display$color$ValueToColor"),Vector2=require("module$node_modules$Phaser$src$math$Vector2");require=new global({Extends:EventEmitter,Mixins:[exports.Alpha,exports.Visible],initialize:function(x,y,width,height){void 0===x&&(x=0);void 0===y&&(y=0);void 0===width&&(width=0);void 0===height&&(height=0);EventEmitter.call(this);this.id=0;this.name="";this.resolution=1;this.useBounds=this.roundPixels=!1;this.worldView=new Rectangle;this.dirty=!0;this._x=
x;this._y=y;this._ch=this._cw=this._cy=this._cx=0;this._width=width;this._height=height;this._bounds=new Rectangle;this._scrollY=this._scrollX=0;this._zoom=1;this._rotation=0;this.matrix=new TransformMatrix;this.transparent=!0;this.backgroundColor=ValueToColor("rgba(0,0,0,0)");this.disableCull=!1;this.culledObjects=[];this.midPoint=new Vector2(width/2,height/2);this.originY=this.originX=.5;this._customViewport=!1},setOrigin:function(x,y){void 0===x&&(x=.5);void 0===y&&(y=x);this.originX=x;this.originY=
y;return this},getScroll:function(x,y,out){void 0===out&&(out=new Vector2);var originY=.5*this.height;out.x=x-.5*this.width;out.y=y-originY;this.useBounds&&(out.x=this.clampX(out.x),out.y=this.clampY(out.y));return out},centerOn:function(x,y){var originX=.5*this.width,originY=.5*this.height;this.midPoint.set(x,y);this.scrollX=x-originX;this.scrollY=y-originY;this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY));return this},centerToBounds:function(){if(this.useBounds){var bounds=
this._bounds,originX=.5*this.width,originY=.5*this.height;this.midPoint.set(bounds.centerX,bounds.centerY);this.scrollX=bounds.centerX-originX;this.scrollY=bounds.centerY-originY}return this},centerToSize:function(){this.scrollX=.5*this.width;this.scrollY=.5*this.height;return this},cull:function(renderableObjects){if(this.disableCull)return renderableObjects;var cameraMatrix=this.matrix.matrix,mva=cameraMatrix[0],mvb=cameraMatrix[1],mvc=cameraMatrix[2],mvd=cameraMatrix[3];if(!(mva*mvd-mvb*mvc))return renderableObjects;
var mve=cameraMatrix[4];cameraMatrix=cameraMatrix[5];for(var scrollX=this.scrollX,scrollY=this.scrollY,cameraW=this.width,cameraH=this.height,culledObjects=this.culledObjects,length=renderableObjects.length,index=culledObjects.length=0;index<length;++index){var object=renderableObjects[index];if(!object.hasOwnProperty("width")||object.parentContainer)culledObjects.push(object);else{var objectW=object.width,objectH=object.height,objectX=object.x-scrollX*object.scrollFactorX-objectW*object.originX,
objectY=object.y-scrollY*object.scrollFactorY-objectH*object.originY,tx=objectX*mva+objectY*mvc+mve,ty=objectX*mvb+objectY*mvd+cameraMatrix,tw=(objectX+objectW)*mva+(objectY+objectH)*mvc+mve;objectX=(objectX+objectW)*mvb+(objectY+objectH)*mvd+cameraMatrix;objectY=cameraW+objectW;var cullH=cameraH+objectH;tx>-objectW&&ty>-objectH&&tx<objectY&&ty<cullH&&tw>-objectW&&objectX>-objectH&&tw<objectY&&objectX<cullH&&culledObjects.push(object)}}return culledObjects},getWorldPoint:function(x,y,output){void 0===
output&&(output=new Vector2);var cameraMatrix=this.matrix.matrix,mva=cameraMatrix[0],mvb=cameraMatrix[1],mvc=cameraMatrix[2],mvd=cameraMatrix[3],mve=cameraMatrix[4];cameraMatrix=cameraMatrix[5];var determinant=mva*mvd-mvb*mvc;if(!determinant)return output.x=x,output.y=y,output;determinant=1/determinant;var c=Math.cos(this.rotation),s=Math.sin(this.rotation),zoom=this.zoom,res=this.resolution,scrollX=this.scrollX,scrollY=this.scrollY;x+=(scrollX*c-scrollY*s)*zoom;y+=(scrollX*s+scrollY*c)*zoom;output.x=
(x*mvd*determinant+y*-mvc*determinant)*res+(mvc*cameraMatrix-mvd*mve)*determinant;output.y=(x*-mvb*determinant+y*mva*determinant)*res+(mvb*mve-mva*cameraMatrix)*determinant;return output},ignore:function(entries){var id=this.id;Array.isArray(entries)||(entries=[entries]);for(var i=0;i<entries.length;i++){var entry=entries[i];Array.isArray(entry)?this.ignore(entry):entry.isParent?this.ignore(entry.getChildren()):entry.cameraFilter|=id}return this},preRender:function(baseScale,resolution){var width=
this.width,height=this.height,halfWidth=.5*width,halfHeight=.5*height;baseScale*=this.zoom;var matrix=this.matrix,originX=width*this.originX,originY=height*this.originY,sx=this.scrollX,sy=this.scrollY;this.useBounds&&(sx=this.clampX(sx),sy=this.clampY(sy));this.roundPixels&&(originX=Math.round(originX),originY=Math.round(originY));this.scrollX=sx;this.scrollY=sy;halfWidth=sx+halfWidth;halfHeight=sy+halfHeight;this.midPoint.set(halfWidth,halfHeight);width/=baseScale;height/=baseScale;this.worldView.setTo(halfWidth-
width/2,halfHeight-height/2,width,height);matrix.loadIdentity();matrix.scale(resolution,resolution);matrix.translate(this.x+originX,this.y+originY);matrix.rotate(this.rotation);matrix.scale(baseScale,baseScale);matrix.translate(-originX,-originY)},clampX:function(x){var bounds=this._bounds,dw=this.displayWidth,bx=bounds.x+(dw-this.width)/2;bounds=Math.max(bx,bx+bounds.width-dw);x<bx?x=bx:x>bounds&&(x=bounds);return x},clampY:function(y){var bounds=this._bounds,dh=this.displayHeight,by=bounds.y+(dh-
this.height)/2;bounds=Math.max(by,by+bounds.height-dh);y<by?y=by:y>bounds&&(y=bounds);return y},removeBounds:function(){this.useBounds=!1;this.dirty=!0;this._bounds.setEmpty();return this},setAngle:function(value){void 0===value&&(value=0);this.rotation=DegToRad(value);return this},setBackgroundColor:function(color){void 0===color&&(color="rgba(0,0,0,0)");this.backgroundColor=ValueToColor(color);this.transparent=0===this.backgroundColor.alpha;return this},setBounds:function(x,y,width,height,centerOn){this._bounds.setTo(x,
y,width,height);this.useBounds=this.dirty=!0;centerOn?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY));return this},setName:function(value){void 0===value&&(value="");this.name=value;return this},setPosition:function(x,y){void 0===y&&(y=x);this.x=x;this.y=y;return this},setRotation:function(value){void 0===value&&(value=0);this.rotation=value;return this},setRoundPixels:function(value){this.roundPixels=value;return this},setScene:function(scene){this.scene&&
this._customViewport&&this.sceneManager.customViewports--;this.scene=scene;this.config=scene.sys.game.config;this.sceneManager=scene.sys.game.scene;this.resolution=scene=this.config.resolution;this._cx=this._x*scene;this._cy=this._y*scene;this._cw=this._width*scene;this._ch=this._height*scene;this.updateSystem();return this},setScroll:function(x,y){void 0===y&&(y=x);this.scrollX=x;this.scrollY=y;return this},setSize:function(width,height){void 0===height&&(height=width);this.width=width;this.height=
height;return this},setViewport:function(x,y,width,height){this.x=x;this.y=y;this.width=width;this.height=height;return this},setZoom:function(value){void 0===value&&(value=1);0===value&&(value=.001);this.zoom=value;return this},toJSON:function(){var output={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};this.useBounds&&(output.bounds=
{x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height});return output},update:function(){},updateSystem:function(){if(this.config){var custom=0!==this._x||0!==this._y||this.config.width!==this._width||this.config.height!==this._height,sceneManager=this.sceneManager;custom&&!this._customViewport?sceneManager.customViewports++:!custom&&this._customViewport&&sceneManager.customViewports--;this.dirty=!0;this._customViewport=custom}},destroy:function(){this.emit("cameradestroy",
this);this.removeAllListeners();this.matrix.destroy();this.culledObjects=[];this._customViewport&&this.sceneManager.customViewports--;this.sceneManager=this.config=this.scene=this._bounds=null},x:{get:function(){return this._x},set:function(value){this._x=value;this._cx=value*this.resolution;this.updateSystem()}},y:{get:function(){return this._y},set:function(value){this._y=value;this._cy=value*this.resolution;this.updateSystem()}},width:{get:function(){return this._width},set:function(value){this._width=
value;this._cw=value*this.resolution;this.updateSystem()}},height:{get:function(){return this._height},set:function(value){this._height=value;this._ch=value*this.resolution;this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(value){this._scrollX=value;this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(value){this._scrollY=value;this.dirty=!0}},zoom:{get:function(){return this._zoom},set:function(value){this._zoom=value;this.dirty=!0}},rotation:{get:function(){return this._rotation},
set:function(value){this._rotation=value;this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoom}},displayHeight:{get:function(){return this.height/this.zoom}}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$cameras$2d$BaseCamera.js.map
