{"version":3,"sources":["app/patu/lib.cljs"],"mappings":"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","names":["var_args","G__28167","app.patu.lib/go","js/Error","game","id","app.patu.lib.go","cljs.core/name","props","cljs.core/clj->js","G__28169","app.patu.lib/load-root","url","G__28171","app.patu.lib/load-sprite","title","opts","app.patu.lib/load-aseprite","url2","app.patu.utils.js_get","app.patu.lib/load-sound","src","app.patu.lib/play","app.patu.lib/sprite","app.patu.lib/solid","app.patu.lib/scale","value","app.patu.lib/layers","layers","main-layer","app.patu.lib/add-level","map","config","app.patu.lib/key-down","handler","cljs.core/vector?","app.patu.lib/key-press","app.patu.lib/key-press-rep","app.patu.lib/key-release","app.patu.lib/key-down?","key","app.patu.lib/add","comps","app.patu.lib/scene","app.patu.lib/start!","scene-id","G__28173","app.patu.lib/vec2","val","app.patu.lib.vec2","val2","app.patu.lib/dt","G__28175","app.patu.lib/cam-scale","app.patu.lib.cam_scale","pos","app.patu.lib/zoom-out","js/console.log","app.patu.lib/zoom-in","G__28177","app.patu.lib/cam-pos","app.patu.lib/follow-comp","comp","app.patu.lib.cam_pos","app.patu.lib/cam-ignore","app.patu.lib/randd","v1","v2","app.patu.lib/gravity","app.patu.lib/height","app.patu.lib/width","app.patu.lib/destroy","app.patu.lib/center","app.patu.lib/add-loader","loader-fn"],"sourcesContent":["(ns app.patu.lib\n  (:require [app.patu.utils :refer [js-get]]))\n\n(defn go\n  ([game id] (go game (name id) nil))\n  ([game id props] (.go game (name id) (clj->js props))))\n\n;; Load Sprites\n(defn load-root\n  \"Returns the root asset url\n   example usage:\n      (load-root game) => https://kaboomjs.com/pub/examples/\"\n  ([game]\n   (.loadRoot game))\n  ([game url]\n   (.loadRoot game url)))\n\n(defn load-sprite\n  ([game title url]\n   (.loadSprite game (name title) url))\n  ([game title url opts]\n   (.loadSprite game (name title) url (clj->js opts))))\n\n(defn load-aseprite [game title url url2]\n  (when (js-get game :loadAseprite)\n    (.loadAseprite game (name title) url url2)))\n\n(defn load-sound [game id src]\n  (.loadSound game (name id) src))\n\n(defn play [game id]\n  (.play game (name id)))\n\n(defn sprite [game title]\n  (.sprite game (name title)))\n\n(defn solid [game]\n  (.solid game))\n\n(defn scale [game value]\n  (.scale game value))\n\n(defn layers [game layers main-layer]\n  (.layers game (clj->js layers) (name main-layer)))\n\n(defn add-level [game map config]\n  (.addLevel game (clj->js map) (clj->js config)))\n\n;; === Events ===\n(defn key-down [game id handler]\n  (if (vector? id)\n    (.keyDown game (clj->js id) handler)\n    (.keyDown game (name id) handler)))\n\n(defn key-press [game id handler]\n  (.keyPress game (name id) handler))\n\n(defn key-press-rep [game id handler]\n  (.keyPressRep game (name id) handler))\n\n(defn key-release [game id handler]\n  (if (vector? id)\n    (.keyRelease game (clj->js id) handler)\n    (.keyRelease game (name id) handler)))\n\n(defn key-down? [game key]\n  (.keyIsDown game (name key)))\n\n;; ===\n(defn add [game comps]\n  (.add game (clj->js comps)))\n\n(defn scene [game id handler]\n  (.scene game (name id) handler))\n\n(defn start!\n  \"Starts a scene:\n   - example usage: (start! :scene/main)\"\n  [game scene-id]\n  (.start game (name scene-id)))\n\n(defn vec2\n  ([game val] (vec2 game val val))\n  ([game val val2] (.vec2 game val val2)))\n\n(defn dt [game]\n  (.dt game))\n\n;; === Camera\n(defn cam-scale\n  ([game]    (cam-scale game nil))\n  ([game pos]\n   (if pos\n     (.camScale game pos)\n     (.camScale game))))\n\n(defn zoom-out [game]\n  (let [val  (.sub (cam-scale game) (vec2 game (dt game)))]\n    (when (> (.-x val) 0.5)\n      (js/console.log val)\n      (cam-scale game val))))\n\n(defn zoom-in [game]\n  (let [val  (.add (cam-scale game) (vec2 game (dt game)))]\n    (when (< (.-x val) 2)\n      (cam-scale game val))))\n\n(defn cam-pos\n  ([game]\n   (.camPos game))\n  ([game pos]\n   (.camPos game pos)))\n\n;; TODO: Refactor\n#_(defn follow-comp [game comp]\n    (let [pos (.sub (.-pos comp)  (vec2 game -200 90))]\n      (js/console.log pos)\n      (cam-pos game pos)))\n(defn follow-comp [game comp]\n  (let [pos (.-pos comp)]\n    (js/console.log pos)\n    (cam-pos game pos)))\n\n;;\n(defn cam-ignore [game val]\n  (.camIgnore game (clj->js val)))\n\n;;\n(defn randd [game v1 v2]\n  (.rand game v1 v2))\n\n;; DIMENSIONS\n(defn gravity [game value]\n  (.gravity game value))\n\n(defn height [game]\n  (.height game))\n(defn width [game]\n  (.width game))\n\n(defn destroy [game comp]\n  (.destroy game comp))\n\n(defn center [game]\n  [(/ (width game) 2) (/ (height game) 2)])\n;;\n(defn add-loader [game loader-fn]\n  (.addLoader game loader-fn))\n"]}