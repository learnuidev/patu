{"version":3,"sources":["app/kaboom/mario.cljs"],"mappings":"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","names":["app.kaboom.mario/kaboom","config","js/kaboom","cljs.core/clj->js","js/console.log","app.kaboom.mario/game-state","cljs.core.atom","app.kaboom.mario/assets","app.kaboom.mario/game","js/document.getElementById","app.kaboom.mario/load-root","game","url","app.kaboom.mario/load-sprite","title","cljs.core/name","seq__26820","cljs.core/seq","chunk__26821","count__26822","i__26823","map__26828","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","temp__5735__auto__","cljs.core/chunked-seq?","c__4556__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","map__26830","cljs.core/first","cljs.core/next","app.kaboom.mario/sprite","app.kaboom.mario/solid","app.kaboom.mario/scale","value","app.kaboom.mario/level-config","app.kaboom.mario/main-scene","app.kaboom.mario/layers","layers","main-layer","app.kaboom.mario/add-level","map","app.kaboom.mario/key-down","id","handler","app.kaboom.mario/key-press","app.kaboom.mario/add","comps","app.kaboom.mario/main-handler","player","score","obj","app.kaboom.mario/app"],"sourcesContent":["(ns app.kaboom.mario)\n\n(defn kaboom [config] (js/kaboom (clj->js config)))\n(js/console.log kaboom)\n\n;; State management\n(def game-state (atom {}))\n\n;; Assets ===\n(def assets {:root-url \"https://i.imgur.com/\"\n             :items [{:title :coin\n                      :url \"wbKxhcd.png\"}\n                     {:title :evil-mushroom\n                      :url \"LmseqUG.png\"}\n                     {:title :brick\n                      :url \"pogC9x5.png\"}\n                     ;; old\n                     #_{:title :block\n                        :url \"bdrLpi6.png\"}\n                     {:title :block\n                      :url \"M6rwarW.png\"}\n                     {:title :mario\n                      :url \"Wb1qfhK.png\"}\n                     {:title :mushroom\n                      :url \"0wMd92p.png\"}\n                     {:title :surprise\n                      :url \"gesQ1KP.png\"}\n                     {:title :unboxed\n                      :url \"bdrLpi6.png\"}\n                     {:title :pipe-top-left\n                      :url \"ReTPiWY.png\"}\n                     {:title :pipe-top-right\n                      :url \"hj2GK4n.png\"}\n                     {:title :pipe-bottom-left\n                      :url \"c1cYSbt.png\"}\n                     {:title :pipe-bottom-right\n                      :url \"nqQ79eI.png\"}]});; === App\n\n(def game (kaboom {:global true\n                   :fullscreen false\n                   :scale 1\n                   :canvas (js/document.getElementById \"app\")\n                   :debug true\n                   :clearColor [0,0,0, 0.9]})) ;; rgb+opacity\n\n;; Load Sprites\n(defn load-root [game url]\n  (.loadRoot game url))\n\n(defn load-sprite [game title url]\n  (.loadSprite game (name title) url))\n\n(load-root game (:root-url assets))\n(doseq [{:keys [title url]} (:items assets)]\n  (load-sprite game title url))\n\n(defn sprite [game title]\n  (.sprite game (name title)))\n\n(defn solid [game]\n  (.solid game))\n(defn scale [game value]\n  (.scale game value))\n\n;;\n(def level-config {:w 20\n                   :h 20\n                   := {:sprite [\"block\"]\n                       :solid  [true]}})\n(def main-scene {:title :main\n                 :map [\"                                           \"\n                       \"                                           \"\n                       \"                                           \"\n                       \"                                           \"\n                       \"                                           \"\n                       \"                                           \"\n                       \"                                           \"\n                       \"           #                               \"\n                       \"      %   =*=%=                           \"\n                       \"                                           \"\n                       \"                              -+           \"\n                       \"                     ^   ^    ()           \"\n                       \"=================================    ======\"]\n                 :level\n                 {:width 20\n                  :height 20\n                  := {:sprite [\"block\"]\n                      :solid  [true]}}})\n\n(defn layers [game layers main-layer]\n  (.layers game (clj->js layers) (name main-layer)))\n(defn add-level [game map config]\n  (.addLevel game (clj->js map) (clj->js config)))\n\n(defn key-down [game id handler]\n  (.keyDown game (name id) handler))\n(defn key-press [game id handler]\n  (.keyPress game (name id) handler))\n\n(defn add [game comps]\n  (.add game (clj->js comps)))\n(defn main-handler []\n  (layers game [:background, :game, :ui] :game)\n  (let [player (add game [(.sprite game \"mario\")\n                          (.solid game)\n                          (.pos game 30 0)\n                          (.body game)\n                          (.origin game \"bot\")])\n        score (add game [(.text game 0)\n                         (.pos game 16 16)\n                         (.layer game :ui)\n                         (clj->js {:value 100})])]\n    (add-level game (:map main-scene) {:width 20\n                                       :height 20\n                                       := [(sprite game :block)\n                                           (solid game)]\n                                       :$ [(sprite game :coin)]\n                                       :% [(sprite game :surprise)\n                                           (solid game)\n                                           :coin-surprise]\n                                       :* [(sprite game :surprise)\n                                           (solid game)\n                                           :mushroom-surprise]\n                                       \"}\" [(sprite game :unboxed)\n                                            (solid game)]\n                                       :- [(sprite game :pipe-top-left)\n                                           (solid game)\n                                           (scale game 0.5)]\n                                       \"(\" [(sprite game :pipe-bottom-left)\n                                            (solid game)\n                                            (scale game 0.5)]\n                                       :+ [(sprite game :pipe-top-right)\n                                           (solid game)\n                                           (scale game 0.5)]\n                                       \")\" [(sprite game :pipe-bottom-right)\n                                            (solid game)\n                                            (scale game 0.5)]\n                                       \"^\" [(sprite game :evil-mushroom)\n                                            (solid game)]\n                                       :# [(sprite game :mushroom)\n                                           (solid game)]})\n    ;; Movement\n    (key-down game :left\n              (fn []\n                (.move player -120 0)))\n    (key-down game :right\n              (fn []\n                (.move player 230 0)))\n    (key-press game :space\n               (fn []\n                 (.jump player 400)))\n    ;; Headbump\n    (.on player \"headbump\"\n         (fn [obj]\n           (when (.is obj (name :coin-surprise))\n             (js/console.log \"COIN\"))\n           (when (.is obj (name :mushroom-surprise))\n             (js/console.log \"MUSHROOM\"))))))\n(.scene game \"main\" main-handler)\n\n(defn app []\n  (.start game \"main\"))\n"]}