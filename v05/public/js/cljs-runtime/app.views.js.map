{"version":3,"sources":["app/views.cljs"],"mappings":"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","names":["js/app","js/app.views","js/app.views.inventories","app.views/inventories","reagent.core.atom","js/app.views.destinations","app.views/destinations","js/app.views.shipping","app.views/shipping","js/app.views.carts","app.views/carts","cljs.core/deref","app.views/cart-get-by-id","id","cljs.core.get","app.views/calc-subtotal","carts","cljs.core/reduce-kv","acc","k","v","inventory","app.views/calc-shipping-tax","sub-total","shipping-tax","app.views/calc-total","app.views/sub-total","quantity","cart","app.views/change-shipping","ship-id","cljs.core.println","cljs.core/reset!","app.views/sales-tax-component","cljs.core.doall","iter__4529__auto__","s__33064","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__33066","cljs.core/chunk-buffer","i__33065","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__33063","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","cljs.core/keys","cljs.core._EQ_","cljs.core/name","app.views/coffeeshop-cart","s__33068","b__33070","i__33069","iter__33067","cljs.core/vals","cljs.core.swap_BANG_","cljs.core/update","cljs.core/inc","s__33072","b__33074","i__33073","iter__33071","cart-id","map__33075","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","map__33077","subtotal","cljs.core/chunk-first"],"sourcesContent":["(ns app.views\n  (:require [reagent.core :as r]))\n\n;; App Name - Cafe\n\n;; Entities\n(defonce inventories\n  (r/atom {:a {:id :a :name \"Yerba mata\" :price 10}\n           :b {:id :b :name \"Coffee\" :price 10}\n           :c {:id :c :name \"Tea\" :price 10}}))\n\n(defonce destinations {:US 25\n                       :CA 35\n                       :CO 45})\n\n(defonce shipping (r/atom :US))\n\n(defonce carts (r/atom {:a 1\n                        :b 2}))\n\n(deref shipping)\n\n(defn cart-get-by-id [id]\n  (get @inventories id))\n\n(defn calc-subtotal [carts]\n  (reduce-kv (fn [acc k v]\n               (let [inventory (get @inventories k)]\n                 (+ acc (* (:price inventory) v))))\n             0\n             carts))\n\n(defn calc-shipping-tax [carts]\n  (let [sub-total (calc-subtotal carts)\n        shipping-tax (get destinations @shipping)]\n    (/ (* shipping-tax sub-total) 100)))\n\n(defn calc-total [carts]\n  (let [sub-total (calc-subtotal carts)\n        shipping-tax (calc-shipping-tax carts)]\n    (+ sub-total shipping-tax)))\n\n(defn sub-total [id quantity]\n  (let [cart (cart-get-by-id id)]\n    {:cart cart\n     :subtotal (* (:price cart) quantity)}))\n\n(defn change-shipping [ship-id]\n  (println \"shipID \" ship-id)\n  (reset! shipping ship-id))\n\n;; https://cljdoc.org/d/mthomure/reagent/0.8.1-custom-components/doc/frequently-asked-questions/why-isn-t-my-component-re-rendering-\n;; https://github.com/reagent-project/reagent/issues/18\n(defn sales-tax-component []\n  [:div {:style {:padding 16}}\n   [:h1 \"Sales Tax\"]\n   (doall\n    (for [ship-id (keys destinations)]\n      ^{:key ship-id}\n      [:div\n       [:button {:on-click #(change-shipping ship-id)\n                 :class (when (= @shipping ship-id) \"btn-active\")}\n        (str (name ship-id) \" @ \" (get destinations ship-id))]]))])\n\n(defn coffeeshop-cart []\n  [:div {:style {:padding 16}}\n   [:div\n    [:h1 \"Caffinated Breverages\"]\n    (for [inventory (vals @inventories)]\n      ^{:key (:id inventory)}\n      [:div\n       [:p (:name inventory) [:span (str \" - $\" (:price inventory))]]\n       [:button {:on-click #(swap! carts update (:id inventory) inc)} \"+\"]])]\n   [:div {:style {:padding 16}}\n    [:h1 \"Cart\"]\n    [:ul\n     (for [cart-id (keys @carts)]\n       (let [quantity (get @carts cart-id)\n             {:keys [cart subtotal]} (sub-total cart-id quantity)]\n         ^{:key cart-id}\n         [:div {:style {:display :flex\n                        :padding \"0px 124px\"\n                        :align-items :flex-end\n                        :justify-content :space-between}}\n          [:div\n           [:li (str (:name cart))]\n           [:p \" $\" (:price cart) \" x \" quantity]]\n          [:h4 subtotal]]))]]\n   [sales-tax-component]\n   [:div {:style {:padding 16}}\n    [:h1 \"Total\"]\n    [:p (str \"Subtotal: \" (calc-subtotal @carts))]\n    [:p (str \"Sales Tax: \" (calc-shipping-tax @carts))]\n    [:hr]\n    [:p (str \"Total: \" (calc-total @carts))]]])\n"]}