shadow$provide.module$node_modules$Phaser$src$physics$matter_js$lib$core$Sleeping=function(global,require,module,exports){var Sleeping={};module.exports=Sleeping;var Events=require("module$node_modules$Phaser$src$physics$matter_js$lib$core$Events");(function(){Sleeping._motionWakeThreshold=.18;Sleeping._motionSleepThreshold=.08;Sleeping._minBias=.9;Sleeping.update=function(bodies,timeScale){timeScale*=timeScale*timeScale;for(var i=0;i<bodies.length;i++){var body=bodies[i],motion=body.speed*body.speed+
body.angularSpeed*body.angularSpeed;0!==body.force.x||0!==body.force.y?Sleeping.set(body,!1):(body.motion=Sleeping._minBias*Math.min(body.motion,motion)+(1-Sleeping._minBias)*Math.max(body.motion,motion),0<body.sleepThreshold&&body.motion<Sleeping._motionSleepThreshold*timeScale?(body.sleepCounter+=1,body.sleepCounter>=body.sleepThreshold&&Sleeping.set(body,!0)):0<body.sleepCounter&&--body.sleepCounter)}};Sleeping.afterCollisions=function(pairs,timeScale){timeScale*=timeScale*timeScale;for(var i=
0;i<pairs.length;i++){var pair=pairs[i];if(pair.isActive){var collision=pair.collision;pair=collision.bodyA.parent;var bodyB=collision.bodyB.parent;pair.isSleeping&&bodyB.isSleeping||pair.isStatic||bodyB.isStatic||!pair.isSleeping&&!bodyB.isSleeping||(collision=pair.isSleeping&&!pair.isStatic?pair:bodyB,pair=collision===pair?bodyB:pair,!collision.isStatic&&pair.motion>Sleeping._motionWakeThreshold*timeScale&&Sleeping.set(collision,!1))}}};Sleeping.set=function(body,isSleeping){var wasSleeping=body.isSleeping;
isSleeping?(body.isSleeping=!0,body.sleepCounter=body.sleepThreshold,body.positionImpulse.x=0,body.positionImpulse.y=0,body.positionPrev.x=body.position.x,body.positionPrev.y=body.position.y,body.anglePrev=body.angle,body.speed=0,body.angularSpeed=0,body.motion=0,wasSleeping||Events.trigger(body,"sleepStart")):(body.isSleeping=!1,body.sleepCounter=0,wasSleeping&&Events.trigger(body,"sleepEnd"))}})()}
//# sourceMappingURL=module$node_modules$Phaser$src$physics$matter_js$lib$core$Sleeping.js.map
