shadow$provide.module$node_modules$Phaser$src$gameobjects$components$Animation=function(global,require,module,exports){global=new (require("module$node_modules$Phaser$src$utils$Class"))({initialize:function(parent){this.parent=parent;this.animationManager=parent.scene.sys.anims;this.animationManager.once("remove",this.remove,this);this.isPlaying=!1;this.currentFrame=this.currentAnim=null;this._timeScale=1;this.msPerFrame=this.duration=this.frameRate=0;this.skipMissedFrames=!0;this._repeatDelay=this._repeat=
this._delay=0;this._yoyo=!1;this.forward=!0;this._reverse=!1;this.repeatCounter=this.nextTick=this.accumulator=0;this._wasPlaying=this._paused=this.pendingRepeat=!1;this._pendingStop=0},setDelay:function(value){void 0===value&&(value=0);this._delay=value;return this.parent},getDelay:function(){return this._delay},delayedPlay:function(delay,key,startFrame){this.play(key,!0,startFrame);this.nextTick+=delay;return this.parent},getCurrentKey:function(){if(this.currentAnim)return this.currentAnim.key},
load:function(key,startFrame){void 0===startFrame&&(startFrame=0);this.isPlaying&&this.stop();this.animationManager.load(this,key,startFrame);return this.parent},pause:function(atFrame){this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1);void 0!==atFrame&&this.updateFrame(atFrame);return this.parent},resume:function(fromFrame){this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying);void 0!==fromFrame&&this.updateFrame(fromFrame);return this.parent},isPaused:{get:function(){return this._paused}},
play:function(key,ignoreIfPlaying,startFrame){void 0===ignoreIfPlaying&&(ignoreIfPlaying=!1);void 0===startFrame&&(startFrame=0);if(ignoreIfPlaying&&this.isPlaying&&this.currentAnim.key===key)return this.parent;this.forward=!0;this._reverse=!1;return this._startAnimation(key,startFrame)},playReverse:function(key,ignoreIfPlaying,startFrame){void 0===ignoreIfPlaying&&(ignoreIfPlaying=!1);void 0===startFrame&&(startFrame=0);if(ignoreIfPlaying&&this.isPlaying&&this.currentAnim.key===key)return this.parent;
this.forward=!1;this._reverse=!0;return this._startAnimation(key,startFrame)},_startAnimation:function(key,startFrame){this.load(key,startFrame);key=this.currentAnim;startFrame=this.parent;this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat;key.getFirstTick(this);this.isPlaying=!0;this.pendingRepeat=!1;key.showOnStart&&(startFrame.visible=!0);startFrame.emit("animationstart",this.currentAnim,this.currentFrame,startFrame);return startFrame},reverse:function(key){if(!this.isPlaying||
this.currentAnim.key!==key)return this.parent;this._reverse=!this._reverse;this.forward=!this.forward;return this.parent},getProgress:function(){var p=this.currentFrame.progress;this.forward||(p=1-p);return p},setProgress:function(value){this.forward||(value=1-value);this.setCurrentFrame(this.currentAnim.getFrameByProgress(value));return this.parent},remove:function(key,animation){void 0===animation&&(animation=this.currentAnim);this.isPlaying&&animation.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},
getRepeat:function(){return this._repeat},setRepeat:function(value){this._repeat=value;this.repeatCounter=0;return this.parent},getRepeatDelay:function(){return this._repeatDelay},setRepeatDelay:function(value){this._repeatDelay=value;return this.parent},restart:function(includeDelay){void 0===includeDelay&&(includeDelay=!1);this.currentAnim.getFirstTick(this,includeDelay);this.isPlaying=this.forward=!0;this._paused=this.pendingRepeat=!1;this.updateFrame(this.currentAnim.frames[0]);includeDelay=this.parent;
includeDelay.emit("animationrestart",this.currentAnim,this.currentFrame,includeDelay);return this.parent},stop:function(){this._pendingStop=0;this.isPlaying=!1;var gameObject=this.parent;gameObject.emit("animationcomplete",this.currentAnim,this.currentFrame,gameObject);return gameObject},stopAfterDelay:function(delay){this._pendingStop=1;this._pendingStopValue=delay;return this.parent},stopOnRepeat:function(){this._pendingStop=2;return this.parent},stopOnFrame:function(frame){this._pendingStop=3;
this._pendingStopValue=frame;return this.parent},setTimeScale:function(value){void 0===value&&(value=1);this._timeScale=value;return this.parent},getTimeScale:function(){return this._timeScale},getTotalFrames:function(){return this.currentAnim.frames.length},update:function(time,delta){if(this.currentAnim&&this.isPlaying&&!this.currentAnim.paused){this.accumulator+=delta*this._timeScale;if(1===this._pendingStop&&(this._pendingStopValue-=delta,0>=this._pendingStopValue))return this.currentAnim.completeAnimation(this);
this.accumulator>=this.nextTick&&this.currentAnim.setFrame(this)}},setCurrentFrame:function(animationFrame){var gameObject=this.parent;this.currentFrame=animationFrame;gameObject.texture=animationFrame.frame.texture;gameObject.frame=animationFrame.frame;gameObject.isCropped&&gameObject.frame.updateCropUVs(gameObject._crop,gameObject.flipX,gameObject.flipY);gameObject.setSizeToFrame();animationFrame.frame.customPivot?gameObject.setOrigin(animationFrame.frame.pivotX,animationFrame.frame.pivotY):gameObject.updateDisplayOrigin();
return gameObject},updateFrame:function(animationFrame){var gameObject=this.setCurrentFrame(animationFrame);this.isPlaying&&(animationFrame.setAlpha&&(gameObject.alpha=animationFrame.alpha),gameObject.emit("animationupdate",this.currentAnim,animationFrame,gameObject),3===this._pendingStop&&this._pendingStopValue===animationFrame&&this.currentAnim.completeAnimation(this))},setYoyo:function(value){void 0===value&&(value=!1);this._yoyo=value;return this.parent},getYoyo:function(){return this._yoyo},
destroy:function(){this.animationManager.off("remove",this.remove,this);this.currentFrame=this.currentAnim=this.parent=this.animationManager=null}});module.exports=global}
//# sourceMappingURL=module$node_modules$Phaser$src$gameobjects$components$Animation.js.map
