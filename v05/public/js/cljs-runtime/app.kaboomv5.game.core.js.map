{"version":3,"sources":["app/kaboomv5/game/core.cljs"],"mappings":"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","names":["app.kaboomv5.game.core/init!","config","app.kaboomv5.app.core/init!","app.kaboomv5.gfx/init!","app.kaboomv5.audio/init!","app.kaboomv5.game.core/reg-scene","id","cb","cljs.core/not","cljs.core/seq","cljs.core/deref","cljs.core.get","app.kaboomv5.game.state/scene-state","cljs.core.swap_BANG_","cljs.core/assoc","app.kaboomv5.game.scene/create-scene","app.kaboomv5.game.core/reload","temp__5735__auto__","fresh-scene","app.kaboomv5.game.state/game-state","app.kaboomv5.game.core/switch-scene","js/console.log","temp__5733__auto__","handler","G__26761","app.kaboomv5.game.core/cur-scene","var_args","G__26764","app.kaboomv5.game.core/play","js/Error","app.kaboomv5.game.core.play","sound","cljs.core.get_in","app.kaboomv5.assets/assets","app.kaboomv5.audio.play","app.kaboomv5.game.core/handle-events","char-input","seq__26769","chunk__26770","count__26771","i__26772","cljs.core/chunked-seq?","c__4556__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","char","seq__26790","chunk__26791","count__26792","i__26793","seq__26799","chunk__26800","count__26801","i__26802","c","app.kaboomv5.app.core/char-inputted","fexpr__26797","fexpr__26798","fexpr__26805","fexpr__26806","evts","seq__26807","chunk__26808","count__26809","i__26810","evt","app.kaboomv5.app.core/key-pressed?","fexpr__26813","fexpr__26814","seq__26815","chunk__26816","count__26817","i__26818","app.kaboomv5.app.core/mouse-down?","fexpr__26821","fexpr__26823","seq__26824","chunk__26825","count__26826","i__26827","app.kaboomv5.app.core/mouse-clicked?","fexpr__26830","fexpr__26831","seq__26832","chunk__26833","count__26834","i__26835","app.kaboomv5.app.core/mouse-released?","fexpr__26838","fexpr__26839","G__26841","app.kaboomv5.game.core/game-frame","app.kaboomv5.game.core.game_frame","ignore-pause?","seq__26842","chunk__26843","count__26844","i__26845","app.kaboomv5.game.core/handle-game","e26846","err","js/console.error","app.kaboomv5.app.core/quit","app.kaboomv5.game.core/draw-progress","w","app.kaboomv5.gfx/width","h","app.kaboomv5.gfx/scale","pos","G__26850","G__26851","app.kaboomv5.math.core/subtract","G__26852","app.kaboomv5.math.core/vec2","app.kaboomv5.gfx/center","G__26853","G__26854","app.kaboomv5.gfx/draw-rect","app.kaboomv5.gfx/height","G__26855","app.kaboomv5.math.core/color","app.kaboomv5.gfx/draw-rect-stroke","G__26856","app.kaboomv5.game.core/handle-next-scene","nextid","cljs.core/dissoc","app.kaboomv5.game.core/handle-load","sid","cljs.core._EQ_","app.kaboomv5.assets/load-progress","app.kaboomv5.game.core/start","app.kaboomv5.app.core/run","app.kaboomv5.app.state/app-state","js/console.warn","loaded?","app.kaboomv5.gfx/frame-start","app.kaboomv5.gfx/frame-end","app.kaboomv5.game.core/action","cljs.core/update-in","cljs.core/conj","app.kaboomv5.game.core/key-press","app.kaboomv5.game.core/key-press-rep","app.kaboomv5.game.core/key-release","app.kaboomv5.game.core/key-down","app.kaboomv5.game.core/char-input","app.kaboomv5.game.core/mouse-down","app.kaboomv5.game.core/mouse-click","app.kaboomv5.game.core/mouse-release","app.kaboomv5.game.core/add-level","map","app.kaboomv5.game.core/call-comp","comp","attr","func","cljs.core/type","js/Function","app.kaboomv5.game.core/builder","args","cljs.core.apply","app.kaboomv5.game.core/reg-comp","req","builder-fn","builder","cljs.core.assoc","cljs.core/assoc-in","app.kaboomv5.game.core/pos","app.kaboomv5.game.core/text-adder","app.kaboomv5.game.core/text-drawer","G__26858","app.kaboomv5.game.core/text-handler","tex","tsize","app.kaboomv5.game.core.text_handler","app.kaboomv5.game.core/text","app.kaboomv5.game.core/ex-tex"],"sourcesContent":["(ns app.kaboomv5.game.core\n  (:require [app.kaboomv5.app.core :as app :refer [gl run key-pressed?]]\n            [app.kaboomv5.app.state :refer [app-state]]\n            [app.kaboomv5.game.state :refer [game-state scene-state]]\n            [app.kaboomv5.game.scene :as gs]\n            [app.kaboomv5.assets :as assets]\n            [app.kaboomv5.math.core :as math]\n            [app.kaboomv5.audio :as audio]\n            [app.kaboomv5.gfx :as gfx]))\n\n(comment\n  @game-state)\n\n(defn init! [config]\n  (app/init! config)\n  (gfx/init!)\n  (audio/init!))\n\n;; Events\n;; Scene\n(comment\n  (:cur-scene @game-state))\n\n(defn reg-scene [id cb]\n  (if-not (seq (get @scene-state id))\n    (swap! scene-state assoc id (gs/create-scene id cb))))\n\n(defn reload [id]\n  (when-let [fresh-scene (get @scene-state id)]\n    (swap! game-state assoc :cur-scene fresh-scene)))\n;;\n(comment\n  (:cur-scene @game-state))\n\n(defn switch-scene [id]\n  (reload id)\n  (js/console.log \"LOADED!\")\n  (if-let [handler (:init (:cur-scene @game-state))]\n    (handler @game-state)))\n\n(comment\n  (:cur-scene @game-state)\n  (switch-scene :scene/lose))\n\n(defn cur-scene []\n  (:cur-scene @game-state))\n\n;; Audio\n(defn play\n  ([id] (play id {:loop? false\n                  :volume 1\n                  :speed 1\n                  :detune 0\n                  :seek 0}))\n  ([id config]\n   (if-let [sound (get-in @assets/assets [:sounds id])]\n     (audio/play sound config))))\n(comment)\n\n;;\n#_(defn run! [f])\n    ;; Debugging Purpose\n\n\n;; Start\n;; === Game is loaded handler\n\n; (char-input (fn [a] ))\n(comment\n  (:char-input (:events (:cur-scene @game-state))))\n\n(defn handle-events []\n  (let [char-input (-> (cur-scene) :events :char-input)]\n    (when (seq char-input)\n      (doseq [char char-input]\n        (doseq [c (app/char-inputted)]\n          ((:cb char) c))))\n    (when-let [evts (seq (:key-press (:events (:cur-scene @game-state))))]\n      (doseq [evt evts]\n        (when (app/key-pressed? (:key evt))\n          ((:cb evt)))))\n    (when-let [evts (seq (:mouse-down (:events (:cur-scene @game-state))))]\n      (doseq [evt evts]\n        (when (app/mouse-down?)\n          ((:cb evt)))))\n    (when-let [evts (seq (:mouse-click (:events (:cur-scene @game-state))))]\n      (doseq [evt evts]\n        (when (app/mouse-clicked?)\n          ((:cb evt)))))\n    (when-let [evts (seq (:mouse-release (:events (:cur-scene @game-state))))]\n      (doseq [evt evts]\n        (when (app/mouse-released?)\n          ((:cb evt)))))))\n\n(comment)\n(defn game-frame\n  ([] (game-frame false))\n  ([ignore-pause?]\n   (when (seq (:cur-scene @game-state))\n     (when ignore-pause?\n       (doseq [handler (:action (:cur-scene @game-state))]\n         (handler))))))\n\n(defn handle-game []\n  (try\n    (if (seq (cur-scene))\n      (do\n        (handle-events)\n        (game-frame))\n      (throw (js/Error. \"Scene not found\")))\n    (catch js/Error err\n      (js/console.error err)\n      (app/quit))))\n\n(defn draw-progress []\n  (let [w (/ (gfx/width) 2)\n        h (/ 24 (gfx/scale))\n        pos (math/subtract (math/vec2 (gfx/center))\n                           (math/vec2 (/ w 2) (/ h 2)))]\n    (gfx/draw-rect {:pos [0 0]\n                    :width (gfx/width)\n                    :height (gfx/height)\n                    :color (math/color [0 0 0])})\n    (gfx/draw-rect-stroke {:pos [0 0]\n                           :width (gfx/width)\n                           :height (gfx/height)\n                           :color (math/color [0 0 0])})\n    (gfx/draw-rect {:pos [0 0]\n                    :width (gfx/width)\n                    :height (gfx/height)})))\n(comment\n  (draw-progress))\n\n(defn handle-next-scene []\n  (when-let [nextid (:next-scene @game-state)]\n    (switch-scene nextid)\n    (swap! game-state dissoc :next-scene)))\n\n;; === load game\n(defn handle-load [sid]\n  (if (= 1 (assets/load-progress))\n    (do\n      (swap! game-state assoc :loaded? true)\n      (switch-scene sid))\n    (draw-progress)))\n\n(defn start [sid]\n  (run (fn []\n         (if-not (:gl @app-state)\n           (js/console.warn \"Please run the kaboom/init! function first. You need to create a new webgl context first\")\n           (do\n             (let [id  (:program/id @app-state)\n                   loaded? (:loaded? @game-state)]\n               (gfx/frame-start (:gl @app-state))\n               (when-not loaded?\n                 (handle-load sid))\n               (when loaded?\n                 (handle-game)\n                 (handle-next-scene))\n               (gfx/frame-end (:gl @app-state) id)))))))\n\n;;\n(defn action [cb]\n  ; (js/console.log \"HELLO\")\n  (swap! game-state update-in [:cur-scene :action] conj cb))\n\n;; key events\n(defn key-press [id cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :key-press] conj {:key id :cb cb}))\n(defn key-press-rep [id cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :key-press-rep] conj {:key id :cb cb}))\n(defn key-release [id cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :key-release] conj {:key id :cb cb}))\n(defn key-down [id cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :key-down] conj {:key id :cb cb}))\n\n;; Char\n(defn char-input [cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :char-input] conj {:cb cb}))\n\n;; Mouse\n(defn mouse-down [cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :mouse-down] conj {:cb cb}))\n\n(defn mouse-click [cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :mouse-click] conj {:cb cb}))\n\n(defn mouse-release [cb]\n  (js/console.log \"CALLED\")\n  (swap! game-state update-in [:cur-scene :events :mouse-release] conj {:cb cb}))\n;; mouse\n(comment\n  (:key-press (:events (:cur-scene @game-state))))\n\n;; Levels\n(defn add-level [map config])\n\n;; Components ===\n(defn call-comp [comp attr]\n  (when-let [func (get comp attr)]\n    (if (= (type func) js/Function)\n      (func comp)\n      func)))\n\n(defn builder [func]\n  (fn [args]\n    (apply func args)))\n(defn reg-comp [id req builder-fn]\n  (let [builder (fn [& args]\n                  (-> (apply builder-fn args)\n                      (assoc :id id :require req)))]\n    (swap! game-state assoc-in [:components id] builder)\n    builder))\n\n;; 1\n(def pos (reg-comp :pos [] (fn [& args]\n                             {:pos (apply math/vec2 args)})))\n(comment\n  (pos [0 0]))\n\n;; 2 text\n(defn text-adder [comp])\n\n(defn text-drawer [comp]\n  comp)\n(defn text-handler\n  ([tex tsize] (text-handler tex tsize {}))\n  ([tex tsize config]\n   {:text tex\n    :text-size tsize\n    :font (:font config)\n    :width 0\n    :height 0\n    :add text-adder\n    :draw text-drawer}))\n\n(def text (reg-comp :text [] text-handler))\n\n;; testing\n(def ex-tex   (text \"hello world\" 8))\n(comment\n  (call-comp ex-tex :draw)\n  (call-comp ex-tex :text))\n"]}