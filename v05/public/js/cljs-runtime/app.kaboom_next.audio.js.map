{"version":3,"sources":["app/kaboom_next/audio.cljs"],"mappings":"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","names":["app.kaboom-next.audio/audio-context","js/AudioContext","js/webkitAudioContext","app.kaboom-next.audio/min-gain","app.kaboom-next.audio/max-gain","app.kaboom-next.audio/min-speed","app.kaboom-next.audio/max-speed","app$kaboom-next$audio$IGain$set_volume$dyn","x__4428__auto__","m__4429__auto__","app.kaboom-next.audio/set-volume","goog/typeOf","m__4426__auto__","cljs.core/missing-protocol","app$kaboom-next$audio$IGain$get_volume$dyn","app.kaboom-next.audio/get-volume","app.kaboom-next.audio/IGain","this","v","cljs.core/PROTOCOL_SENTINEL","this__4369__auto__","writer__4370__auto__","opt__4371__auto__","cljs.core/-write","app.kaboom-next.audio/Gain","app.kaboom-next.audio/->Gain","gain","_","vol","app.kaboom-next.math/clamp","app$kaboom-next$audio$IAudioContext$ctx$dyn","app.kaboom-next.audio/ctx","app$kaboom-next$audio$IAudioContext$volume$dyn","app.kaboom-next.audio/volume","app$kaboom-next$audio$IAudioContext$play$dyn","app.kaboom-next.audio/play","app.kaboom-next.audio/IAudioContext","sound","conf","app.kaboom-next.audio/Audio","app.kaboom-next.audio/->Audio","context","cljs.core/identity","audio-buffer","cljs.core.println","app.kaboom-next.audio/context","app.kaboom-next.audio/gain","app.kaboom-next.audio/audio"],"sourcesContent":["(ns app.kaboom-next.audio\n  (:require [app.kaboom-next.math :refer [clamp]]\n            [clojure.spec.alpha :as s]))\n\n(defn audio-context []\n  (if js/AudioContext\n    (new js/AudioContext)\n    (new js/webkitAudioContext)))\n\n;; Setting the dimensions of the game\n(def min-gain 0)\n(def max-gain 3)\n(def min-speed 0)\n(def max-speed 3)\n\n(defprotocol IGain\n  (set-volume [this v])\n  (get-volume [this]))\n;;\n(deftype Gain [gain]\n  IGain\n  (get-volume [_]\n    (.. gain -gain -value))\n  (set-volume [_ v]\n    (let [vol (clamp v min-gain max-gain)]\n      (set! (.. gain -gain -value) vol)\n      vol)))\n\n(defprotocol IAudioContext\n  (ctx [this] \"new AudioContext\")\n  (volume [this v] \"Create a volume\")\n  (play [this sound conf]))\n\n(deftype Audio [context gain]\n  IAudioContext\n  (ctx [_] (identity context))\n  (volume [_ v]\n    (set-volume gain v))\n  (play [_ audio-buffer conf]\n    (println \"TODO\")))\n\n;; === testing time\n(def context (new js/AudioContext))\n(def gain (->Gain (.createGain context)))\n(comment\n  (get-volume gain)\n  (set-volume gain 2))\n\n(def audio (->Audio context gain))\n(comment\n  (ctx audio)\n  (volume audio 2)\n  (play audio nil nil))\n"]}