shadow$provide.module$node_modules$Phaser$src$gameobjects$particles$ParticleManagerWebGLRenderer=function(global,require,module,exports){var Utils=require("module$node_modules$Phaser$src$renderer$webgl$Utils");module.exports=function(renderer,emitterManager,interpolationPercentage,camera,parentMatrix){interpolationPercentage=emitterManager.emitters.list;var emittersLength=interpolationPercentage.length;if(0!==emittersLength){var pipeline=this.pipeline,camMatrix=pipeline._tempMatrix1.copyFrom(camera.matrix),
calcMatrix=pipeline._tempMatrix2,particleMatrix=pipeline._tempMatrix3,managerMatrix=pipeline._tempMatrix4.applyITRS(emitterManager.x,emitterManager.y,emitterManager.rotation,emitterManager.scaleX,emitterManager.scaleY);camMatrix.multiply(managerMatrix);renderer.setPipeline(pipeline);managerMatrix=camera.roundPixels;emitterManager=emitterManager.defaultFrame.glTexture;var getTint=Utils.getTintAppendFloatAlphaAndSwap;pipeline.setTexture2D(emitterManager,0);for(var e=0;e<emittersLength;e++){var emitter=
interpolationPercentage[e],particles=emitter.alive,particleCount=particles.length;if(emitter.visible&&0!==particleCount){var scrollX=camera.scrollX*emitter.scrollFactorX,scrollY=camera.scrollY*emitter.scrollFactorY;parentMatrix&&(camMatrix.multiplyWithOffset(parentMatrix,-scrollX,-scrollY),scrollY=scrollX=0);renderer.setBlendMode(emitter.blendMode)&&pipeline.setTexture2D(emitterManager,0);for(emitter=0;emitter<particleCount;emitter++){var particle=particles[emitter],alpha=particle.alpha*camera.alpha;
if(!(0>=alpha)){var frame=particle.frame,x=-frame.halfWidth,y=-frame.halfHeight,xw=x+frame.width,yh=y+frame.height;particleMatrix.applyITRS(0,0,particle.rotation,particle.scaleX,particle.scaleY);particleMatrix.e=particle.x-scrollX;particleMatrix.f=particle.y-scrollY;camMatrix.multiply(particleMatrix,calcMatrix);var tx0=calcMatrix.getX(x,y),ty0=calcMatrix.getY(x,y),tx1=calcMatrix.getX(x,yh);x=calcMatrix.getY(x,yh);var tx2=calcMatrix.getX(xw,yh);yh=calcMatrix.getY(xw,yh);var tx3=calcMatrix.getX(xw,
y);y=calcMatrix.getY(xw,y);managerMatrix&&(tx0|=0,ty0|=0,tx1|=0,x|=0,tx2|=0,yh|=0,tx3|=0,y|=0);particle=getTint(particle.tint,alpha);pipeline.batchQuad(tx0,ty0,tx1,x,tx2,yh,tx3,y,frame.u0,frame.v0,frame.u1,frame.v1,particle,particle,particle,particle,0)&&pipeline.setTexture2D(emitterManager,0)}}}}}}}
//# sourceMappingURL=module$node_modules$Phaser$src$gameobjects$particles$ParticleManagerWebGLRenderer.js.map
