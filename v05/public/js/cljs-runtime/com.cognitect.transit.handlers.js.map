{
"version":3,
"file":"com.cognitect.transit.handlers.js",
"lineCount":333,
"mappings":"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",
"sources":["com/cognitect/transit/handlers.js"],
"sourcesContent":["// Copyright 2014 Cognitect. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide(\"com.cognitect.transit.handlers\");\ngoog.require(\"com.cognitect.transit.util\");\ngoog.require(\"com.cognitect.transit.types\");\ngoog.require(\"goog.math.Long\");\n\ngoog.scope(function () {\n\n    var handlers = com.cognitect.transit.handlers,\n        util     = com.cognitect.transit.util,\n        types    = com.cognitect.transit.types,\n        Long     = goog.math.Long;\n\n    handlers.ctorGuid = 0;\n\n    /**\n     * @const\n     * @type {string}\n     */\n    handlers.ctorGuidProperty = \"transit$guid$\" + util.randomUUID();\n\n    handlers.typeTag = function (ctor) {\n        if (ctor == null) {\n            return \"null\";\n        } else if (ctor === String) {\n            return \"string\";\n        } else if (ctor === Boolean) {\n            return \"boolean\";\n        } else if (ctor === Number) {\n            return \"number\";\n        } else if (ctor === Array) {\n            return \"array\";\n        } else if (ctor === Object) {\n            return \"map\";\n        } else {\n            var tag = ctor[handlers.ctorGuidProperty];\n            if (tag == null) {\n                if (typeof Object.defineProperty != \"undefined\") {\n                    tag = ++handlers.ctorGuid;\n                    Object.defineProperty(ctor, handlers.ctorGuidProperty, {\n                        value: tag,\n                        enumerable: false\n                    });\n                } else {\n                    ctor[handlers.ctorGuidProperty] = tag = ++handlers.ctorGuid;\n                }\n            }\n            return tag;\n        }\n    };\n\n    handlers.constructor = function (x) {\n        if (x == null) {\n            return null;\n        } else {\n            return x.constructor;\n        }\n    };\n\n    handlers.padZeros = function (n, m) {\n        var s = n.toString();\n        for (var i = s.length; i < m; i++) {\n            s = \"0\" + s;\n        }\n        return s;\n    };\n\n    handlers.stringableKeys = function (m) {\n        var stringable = false,\n            ks = util.objectKeys(m);\n\n        for (var i = 0; i < ks.length; i++) {\n        }\n\n        return true;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.NilHandler = function Transit$NilHandler() {\n    };\n    handlers.NilHandler.prototype.tag = function (v) {\n        return \"_\";\n    };\n    handlers.NilHandler.prototype.rep = function (v) {\n        return null;\n    };\n    handlers.NilHandler.prototype.stringRep = function (v) {\n        return \"null\";\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.StringHandler = function Transit$StringHandler() {\n    };\n    handlers.StringHandler.prototype.tag = function (v) {\n        return \"s\";\n    };\n    handlers.StringHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.StringHandler.prototype.stringRep = function (v) {\n        return v;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.NumberHandler = function Transit$NumberHandler() {\n    };\n    handlers.NumberHandler.prototype.tag = function (v) {\n        return \"i\";\n    };\n    handlers.NumberHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.NumberHandler.prototype.stringRep = function (v) {\n        return v.toString();\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.IntegerHandler = function Transit$IntegerHandler() {\n    };\n    handlers.IntegerHandler.prototype.tag = function (v) {\n        return \"i\";\n    };\n    handlers.IntegerHandler.prototype.rep = function (v) {\n        return v.toString();\n    };\n    handlers.IntegerHandler.prototype.stringRep = function (v) {\n        return v.toString();\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.BooleanHandler = function Transit$BooleanHandler() {\n    };\n    handlers.BooleanHandler.prototype.tag = function (v) {\n        return \"?\";\n    };\n    handlers.BooleanHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.BooleanHandler.prototype.stringRep = function (v) {\n        return v.toString();\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.ArrayHandler = function Transit$ArrayHandler() {\n    };\n    handlers.ArrayHandler.prototype.tag = function (v) {\n        return \"array\";\n    };\n    handlers.ArrayHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.ArrayHandler.prototype.stringRep = function (v) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.MapHandler = function Transit$MapHandler() {\n    };\n    handlers.MapHandler.prototype.tag = function (v) {\n        return \"map\";\n    };\n    handlers.MapHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.MapHandler.prototype.stringRep = function (v) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.VerboseDateHandler = function Transit$VerboseDateHandler() {\n    };\n    handlers.VerboseDateHandler.prototype.tag = function (v) {\n        return \"t\";\n    };\n    handlers.VerboseDateHandler.prototype.rep = function (v) {\n        return v.getUTCFullYear() + \"-\" + handlers.padZeros(v.getUTCMonth() + 1, 2) + \"-\" +\n            handlers.padZeros(v.getUTCDate(), 2) + \"T\" + handlers.padZeros(v.getUTCHours(), 2) + \":\" +\n            handlers.padZeros(v.getUTCMinutes(), 2) + \":\" + handlers.padZeros(v.getUTCSeconds(), 2) + \".\" +\n            handlers.padZeros(v.getUTCMilliseconds(), 3) + \"Z\";\n    };\n    handlers.VerboseDateHandler.prototype.stringRep = function (v, h) {\n        return h.rep(v);\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.DateHandler = function Transit$DateHandler() {\n    };\n    handlers.DateHandler.prototype.tag = function (v) {\n        return \"m\";\n    };\n    handlers.DateHandler.prototype.rep = function (v) {\n        return v.valueOf();\n    };\n    handlers.DateHandler.prototype.stringRep = function (v) {\n        return v.valueOf().toString();\n    };\n    handlers.DateHandler.prototype.getVerboseHandler = function (v) {\n        return new handlers.VerboseDateHandler();\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.UUIDHandler = function Transit$UUIDHandler() {\n    };\n    handlers.UUIDHandler.prototype.tag = function (v) {\n        return \"u\";\n    };\n    handlers.UUIDHandler.prototype.rep = function (v) {\n        return v.toString();\n    };\n    handlers.UUIDHandler.prototype.stringRep = function (v) {\n        return v.toString();\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.KeywordHandler = function Transit$KeywordHandler() {\n    };\n    handlers.KeywordHandler.prototype.tag = function (v) {\n        return \":\";\n    };\n    handlers.KeywordHandler.prototype.rep = function (v) {\n        return v._name;\n    }; // NOTE: should be fqn\n    handlers.KeywordHandler.prototype.stringRep = function (v, h) {\n        return h.rep(v);\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.SymbolHandler = function Transit$SymbolHandler() {\n    };\n    handlers.SymbolHandler.prototype.tag = function (v) {\n        return \"$\";\n    };\n    handlers.SymbolHandler.prototype.rep = function (v) {\n        return v._name;\n    }; // NOTE: should be str\n    handlers.SymbolHandler.prototype.stringRep = function (v, h) {\n        return h.rep(v);\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.TaggedHandler = function Transit$TaggedHandler() {\n    };\n    handlers.TaggedHandler.prototype.tag = function (v) {\n        return v.tag;\n    };\n    handlers.TaggedHandler.prototype.rep = function (v) {\n        return v.rep;\n    };\n    handlers.TaggedHandler.prototype.stringRep = function (v, h) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.TransitSetHandler = function Transit$TransitSetHandler() {\n    };\n    handlers.TransitSetHandler.prototype.tag = function (v) {\n        return \"set\";\n    };\n    handlers.TransitSetHandler.prototype.rep = function (v) {\n        var arr = [];\n        v.forEach(function (key, set) {\n            arr.push(key);\n        });\n        return types.taggedValue(\"array\", arr);\n    };\n    handlers.TransitSetHandler.prototype.stringRep = function (v, h) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.TransitArrayMapHandler = function Transit$ArrayMapHandler() {\n    };\n    handlers.TransitArrayMapHandler.prototype.tag = function (v) {\n        return \"map\";\n    };\n    handlers.TransitArrayMapHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.TransitArrayMapHandler.prototype.stringRep = function (v, h) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.TransitMapHandler = function Transit$MapHandler() {\n    };\n    handlers.TransitMapHandler.prototype.tag = function (v) {\n        return \"map\";\n    };\n    handlers.TransitMapHandler.prototype.rep = function (v) {\n        return v;\n    };\n    handlers.TransitMapHandler.prototype.stringRep = function (v, h) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.BufferHandler = function Transit$BufferHandler() {\n    };\n    handlers.BufferHandler.prototype.tag = function (v) {\n        return \"b\";\n    };\n    handlers.BufferHandler.prototype.rep = function (v) {\n        return v.toString(\"base64\");\n    };\n    handlers.BufferHandler.prototype.stringRep = function (v, h) {\n        return null;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.Uint8ArrayHandler = function Transit$Uint8ArrayHandler() {\n    };\n    handlers.Uint8ArrayHandler.prototype.tag = function (v) {\n        return \"b\";\n    };\n    handlers.Uint8ArrayHandler.prototype.rep = function (v) {\n        return util.Uint8ToBase64(v);\n    };\n    handlers.Uint8ArrayHandler.prototype.stringRep = function (v, h) {\n        return null;\n    };\n\n    handlers.defaultHandlers = function (hs) {\n        hs.set(null, new handlers.NilHandler());\n        hs.set(String, new handlers.StringHandler());\n        hs.set(Number, new handlers.NumberHandler());\n        hs.set(Long, new handlers.IntegerHandler());\n        hs.set(Boolean, new handlers.BooleanHandler());\n        hs.set(Array, new handlers.ArrayHandler());\n        hs.set(Object, new handlers.MapHandler());\n        hs.set(Date, new handlers.DateHandler());\n        hs.set(types.UUID, new handlers.UUIDHandler());\n        hs.set(types.Keyword, new handlers.KeywordHandler());\n        hs.set(types.Symbol, new handlers.SymbolHandler());\n        hs.set(types.TaggedValue, new handlers.TaggedHandler());\n        hs.set(types.TransitSet, new handlers.TransitSetHandler());\n        hs.set(types.TransitArrayMap, new handlers.TransitArrayMapHandler());\n        hs.set(types.TransitMap, new handlers.TransitMapHandler());\n\n        if (typeof goog.global.Buffer != \"undefined\") {\n            hs.set(goog.global.Buffer, new handlers.BufferHandler());\n        }\n\n        if (typeof Uint8Array != \"undefined\") {\n            hs.set(Uint8Array, new handlers.Uint8ArrayHandler());\n        }\n\n        return hs;\n    };\n\n    /**\n     * @constructor\n     */\n    handlers.Handlers = function Transit$Handlers() {\n        this.handlers = {};\n        handlers.defaultHandlers(this);\n    };\n\n    handlers.Handlers.prototype.get = function (ctor) {\n        var h = null;\n        if (typeof ctor === \"string\") {\n            h = this.handlers[ctor];\n        } else {\n            h = this.handlers[handlers.typeTag(ctor)];\n        }\n        if (h != null) {\n            return h;\n        } else {\n            return this.handlers[\"default\"];\n        }\n    };\n    handlers.Handlers.prototype[\"get\"] = handlers.Handlers.prototype.get;\n\n    handlers.validTag = function (tag) {\n        switch (tag) {\n            case \"null\":\n            case \"string\":\n            case \"boolean\":\n            case \"number\":\n            case \"array\":\n            case \"map\":\n                return false;\n                break;\n        }\n        return true;\n    };\n\n    handlers.Handlers.prototype.set = function (ctor, handler) {\n        if (typeof ctor === \"string\" && handlers.validTag(ctor)) {\n            this.handlers[ctor] = handler;\n        } else {\n            this.handlers[handlers.typeTag(ctor)] = handler;\n        }\n    };\n\n});    \n"],
"names":["goog","provide","require","scope","handlers","com","cognitect","transit","util","types","Long","math","ctorGuid","ctorGuidProperty","randomUUID","typeTag","handlers.typeTag","ctor","String","Boolean","Number","Array","Object","tag","defineProperty","value","enumerable","constructor","handlers.constructor","x","padZeros","handlers.padZeros","n","m","s","toString","i","length","stringableKeys","handlers.stringableKeys","stringable","ks","objectKeys","NilHandler","handlers.NilHandler","Transit$NilHandler","prototype","handlers.NilHandler.prototype.tag","v","rep","handlers.NilHandler.prototype.rep","stringRep","handlers.NilHandler.prototype.stringRep","StringHandler","handlers.StringHandler","Transit$StringHandler","handlers.StringHandler.prototype.tag","handlers.StringHandler.prototype.rep","handlers.StringHandler.prototype.stringRep","NumberHandler","handlers.NumberHandler","Transit$NumberHandler","handlers.NumberHandler.prototype.tag","handlers.NumberHandler.prototype.rep","handlers.NumberHandler.prototype.stringRep","IntegerHandler","handlers.IntegerHandler","Transit$IntegerHandler","handlers.IntegerHandler.prototype.tag","handlers.IntegerHandler.prototype.rep","handlers.IntegerHandler.prototype.stringRep","BooleanHandler","handlers.BooleanHandler","Transit$BooleanHandler","handlers.BooleanHandler.prototype.tag","handlers.BooleanHandler.prototype.rep","handlers.BooleanHandler.prototype.stringRep","ArrayHandler","handlers.ArrayHandler","Transit$ArrayHandler","handlers.ArrayHandler.prototype.tag","handlers.ArrayHandler.prototype.rep","handlers.ArrayHandler.prototype.stringRep","MapHandler","handlers.MapHandler","Transit$MapHandler","handlers.MapHandler.prototype.tag","handlers.MapHandler.prototype.rep","handlers.MapHandler.prototype.stringRep","VerboseDateHandler","handlers.VerboseDateHandler","Transit$VerboseDateHandler","handlers.VerboseDateHandler.prototype.tag","handlers.VerboseDateHandler.prototype.rep","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","handlers.VerboseDateHandler.prototype.stringRep","h","DateHandler","handlers.DateHandler","Transit$DateHandler","handlers.DateHandler.prototype.tag","handlers.DateHandler.prototype.rep","valueOf","handlers.DateHandler.prototype.stringRep","getVerboseHandler","handlers.DateHandler.prototype.getVerboseHandler","UUIDHandler","handlers.UUIDHandler","Transit$UUIDHandler","handlers.UUIDHandler.prototype.tag","handlers.UUIDHandler.prototype.rep","handlers.UUIDHandler.prototype.stringRep","KeywordHandler","handlers.KeywordHandler","Transit$KeywordHandler","handlers.KeywordHandler.prototype.tag","handlers.KeywordHandler.prototype.rep","_name","handlers.KeywordHandler.prototype.stringRep","SymbolHandler","handlers.SymbolHandler","Transit$SymbolHandler","handlers.SymbolHandler.prototype.tag","handlers.SymbolHandler.prototype.rep","handlers.SymbolHandler.prototype.stringRep","TaggedHandler","handlers.TaggedHandler","Transit$TaggedHandler","handlers.TaggedHandler.prototype.tag","handlers.TaggedHandler.prototype.rep","handlers.TaggedHandler.prototype.stringRep","TransitSetHandler","handlers.TransitSetHandler","Transit$TransitSetHandler","handlers.TransitSetHandler.prototype.tag","handlers.TransitSetHandler.prototype.rep","arr","forEach","key","set","push","taggedValue","handlers.TransitSetHandler.prototype.stringRep","TransitArrayMapHandler","handlers.TransitArrayMapHandler","Transit$ArrayMapHandler","handlers.TransitArrayMapHandler.prototype.tag","handlers.TransitArrayMapHandler.prototype.rep","handlers.TransitArrayMapHandler.prototype.stringRep","TransitMapHandler","handlers.TransitMapHandler","handlers.TransitMapHandler.prototype.tag","handlers.TransitMapHandler.prototype.rep","handlers.TransitMapHandler.prototype.stringRep","BufferHandler","handlers.BufferHandler","Transit$BufferHandler","handlers.BufferHandler.prototype.tag","handlers.BufferHandler.prototype.rep","handlers.BufferHandler.prototype.stringRep","Uint8ArrayHandler","handlers.Uint8ArrayHandler","Transit$Uint8ArrayHandler","handlers.Uint8ArrayHandler.prototype.tag","handlers.Uint8ArrayHandler.prototype.rep","Uint8ToBase64","handlers.Uint8ArrayHandler.prototype.stringRep","defaultHandlers","handlers.defaultHandlers","hs","Date","UUID","Keyword","Symbol","TaggedValue","TransitSet","TransitArrayMap","TransitMap","global","Buffer","Uint8Array","Handlers","handlers.Handlers","Transit$Handlers","get","handlers.Handlers.prototype.get","validTag","handlers.validTag","handlers.Handlers.prototype.set","handler"]
}
