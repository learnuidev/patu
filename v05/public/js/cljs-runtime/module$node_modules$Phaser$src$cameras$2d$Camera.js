shadow$provide.module$node_modules$Phaser$src$cameras$2d$Camera=function(global,require,module,exports){var BaseCamera=require("module$node_modules$Phaser$src$cameras$2d$BaseCamera"),CanvasPool=require("module$node_modules$Phaser$src$display$canvas$CanvasPool"),CenterOn=require("module$node_modules$Phaser$src$geom$rectangle$CenterOn"),Clamp=require("module$node_modules$Phaser$src$math$Clamp");global=require("module$node_modules$Phaser$src$utils$Class");exports=require("module$node_modules$Phaser$src$gameobjects$components$index");
var Effects=require("module$node_modules$Phaser$src$cameras$2d$effects$index"),Linear=require("module$node_modules$Phaser$src$math$Linear"),Rectangle=require("module$node_modules$Phaser$src$geom$rectangle$Rectangle"),Vector2=require("module$node_modules$Phaser$src$math$Vector2");require=new global({Extends:BaseCamera,Mixins:[exports.Flip,exports.Tint],initialize:function(x,y,width,height){BaseCamera.call(this,x,y,width,height);this.inputEnabled=!0;this.fadeEffect=new Effects.Fade(this);this.flashEffect=
new Effects.Flash(this);this.shakeEffect=new Effects.Shake(this);this.panEffect=new Effects.Pan(this);this.zoomEffect=new Effects.Zoom(this);this.lerp=new Vector2(1,1);this.followOffset=new Vector2;this._follow=this.deadzone=null;this.renderToTexture=!1;this.pipeline=this.framebuffer=this.glTexture=this.context=this.canvas=null},setRenderToTexture:function(pipeline){var renderer=this.scene.sys.game.renderer;renderer.gl?(this.glTexture=renderer.createTextureFromSource(null,this.width,this.height,0),
this.framebuffer=renderer.createFramebuffer(this.width,this.height,this.glTexture,!1)):(this.canvas=CanvasPool.create2D(this,this.width,this.height),this.context=this.canvas.getContext("2d"));this.renderToTexture=!0;pipeline&&this.setPipeline(pipeline);return this},setPipeline:function(pipeline){if("string"===typeof pipeline){var renderer=this.scene.sys.game.renderer;renderer.gl&&renderer.hasPipeline(pipeline)&&(this.pipeline=renderer.getPipeline(pipeline))}else this.pipeline=pipeline;return this},
clearRenderToTexture:function(){var renderer=this.scene.sys.game.renderer;renderer.gl?(this.framebuffer&&renderer.deleteFramebuffer(this.framebuffer),this.glTexture&&renderer.deleteTexture(this.glTexture),this.pipeline=this.glTexture=this.framebuffer=null):(CanvasPool.remove(this),this.context=this.canvas=null);this.renderToTexture=!1;return this},setDeadzone:function(width,height){if(void 0===width)this.deadzone=null;else{this.deadzone?(this.deadzone.width=width,this.deadzone.height=height):this.deadzone=
new Rectangle(0,0,width,height);if(this._follow){width=this.width/2;height=this.height/2;var fx=this._follow.x-this.followOffset.x,fy=this._follow.y-this.followOffset.y;this.midPoint.set(fx,fy);this.scrollX=fx-width;this.scrollY=fy-height}CenterOn(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(duration,red,green,blue,callback,context){return this.fadeEffect.start(!1,duration,red,green,blue,!0,callback,context)},fadeOut:function(duration,red,green,blue,callback,context){return this.fadeEffect.start(!0,
duration,red,green,blue,!0,callback,context)},fadeFrom:function(duration,red,green,blue,force,callback,context){return this.fadeEffect.start(!1,duration,red,green,blue,force,callback,context)},fade:function(duration,red,green,blue,force,callback,context){return this.fadeEffect.start(!0,duration,red,green,blue,force,callback,context)},flash:function(duration,red,green,blue,force,callback,context){return this.flashEffect.start(duration,red,green,blue,force,callback,context)},shake:function(duration,
intensity,force,callback,context){return this.shakeEffect.start(duration,intensity,force,callback,context)},pan:function(x,y,duration,ease,force,callback,context){return this.panEffect.start(x,y,duration,ease,force,callback,context)},zoomTo:function(zoom,duration,ease,force,callback,context){return this.zoomEffect.start(zoom,duration,ease,force,callback,context)},preRender:function(baseScale,resolution){var width=this.width,height=this.height,halfWidth=.5*width,halfHeight=.5*height;baseScale*=this.zoom;
var matrix=this.matrix,originX=width*this.originX,originY=height*this.originY,follow=this._follow,deadzone=this.deadzone,sx=this.scrollX,sy=this.scrollY;deadzone&&CenterOn(deadzone,this.midPoint.x,this.midPoint.y);if(follow){var fx=follow.x-this.followOffset.x;follow=follow.y-this.followOffset.y;deadzone?(fx<deadzone.x?sx=Linear(sx,sx-(deadzone.x-fx),this.lerp.x):fx>deadzone.right&&(sx=Linear(sx,sx+(fx-deadzone.right),this.lerp.x)),follow<deadzone.y?sy=Linear(sy,sy-(deadzone.y-follow),this.lerp.y):
follow>deadzone.bottom&&(sy=Linear(sy,sy+(follow-deadzone.bottom),this.lerp.y))):(sx=Linear(sx,fx-originX,this.lerp.x),sy=Linear(sy,follow-originY,this.lerp.y))}this.useBounds&&(sx=this.clampX(sx),sy=this.clampY(sy));this.roundPixels&&(originX=Math.round(originX),originY=Math.round(originY));this.scrollX=sx;this.scrollY=sy;halfWidth=sx+halfWidth;halfHeight=sy+halfHeight;this.midPoint.set(halfWidth,halfHeight);width/=baseScale;height/=baseScale;this.worldView.setTo(halfWidth-width/2,halfHeight-height/
2,width,height);matrix.loadIdentity();matrix.scale(resolution,resolution);matrix.translate(this.x+originX,this.y+originY);matrix.rotate(this.rotation);matrix.scale(baseScale,baseScale);matrix.translate(-originX,-originY);this.shakeEffect.preRender()},setLerp:function(x,y){void 0===x&&(x=1);void 0===y&&(y=x);this.lerp.set(x,y);return this},setFollowOffset:function(x,y){void 0===x&&(x=0);void 0===y&&(y=0);this.followOffset.set(x,y);return this},startFollow:function(target,roundPixels,lerpX,lerpY,offsetX,
offsetY){void 0===roundPixels&&(roundPixels=!1);void 0===lerpX&&(lerpX=1);void 0===lerpY&&(lerpY=lerpX);void 0===offsetX&&(offsetX=0);void 0===offsetY&&(offsetY=offsetX);this._follow=target;this.roundPixels=roundPixels;lerpX=Clamp(lerpX,0,1);lerpY=Clamp(lerpY,0,1);this.lerp.set(lerpX,lerpY);this.followOffset.set(offsetX,offsetY);roundPixels=this.width/2;lerpX=this.height/2;offsetX=target.x-offsetX;target=target.y-offsetY;this.midPoint.set(offsetX,target);this.scrollX=offsetX-roundPixels;this.scrollY=
target-lerpX;return this},stopFollow:function(){this._follow=null;return this},resetFX:function(){this.panEffect.reset();this.shakeEffect.reset();this.flashEffect.reset();this.fadeEffect.reset();return this},update:function(time,delta){this.visible&&(this.panEffect.update(time,delta),this.zoomEffect.update(time,delta),this.shakeEffect.update(time,delta),this.flashEffect.update(time,delta),this.fadeEffect.update(time,delta))},destroy:function(){this.clearRenderToTexture();this.resetFX();BaseCamera.prototype.destroy.call(this);
this.deadzone=this._follow=null}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$cameras$2d$Camera.js.map
