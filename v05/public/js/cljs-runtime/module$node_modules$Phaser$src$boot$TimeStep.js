shadow$provide.module$node_modules$Phaser$src$boot$TimeStep=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var GetValue=require("module$node_modules$Phaser$src$utils$object$GetValue"),NOOP=require("module$node_modules$Phaser$src$utils$NOOP"),RequestAnimationFrame=require("module$node_modules$Phaser$src$dom$RequestAnimationFrame");require=new global({initialize:function(game,config){this.game=game;this.raf=new RequestAnimationFrame;this.running=
this.started=!1;this.minFps=GetValue(config,"min",5);this.targetFps=GetValue(config,"target",60);this._min=1E3/this.minFps;this._target=1E3/this.targetFps;this.actualFps=this.targetFps;this.framesThisSecond=this.nextFpsUpdate=0;this.callback=NOOP;this.forceSetTimeOut=GetValue(config,"forceSetTimeOut",!1);this.frame=this.lastTime=this.startTime=this.time=0;this.inFocus=!0;this.deltaIndex=this.delta=this._coolDown=this._pauseTime=0;this.deltaHistory=[];this.deltaSmoothingMax=GetValue(config,"deltaHistory",
10);this.panicMax=GetValue(config,"panicMax",120);this.rawDelta=0},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0;this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta();this.startTime+=this.time-this._pauseTime},resetDelta:function(){var now=window.performance.now();this.lastTime=this.time=now;this.nextFpsUpdate=now+1E3;for(now=this.frame=this.framesThisSecond=0;now<this.deltaSmoothingMax;now++)this.deltaHistory[now]=Math.min(this._target,
this.deltaHistory[now]);this.deltaIndex=this.delta=0;this._coolDown=this.panicMax},start:function(callback){if(this.started)return this;this.running=this.started=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta();this.startTime=window.performance.now();this.callback=callback;this.raf.start(this.step.bind(this),this.forceSetTimeOut)},step:function(time){this.frame++;var before=time-this.lastTime;0>before&&(before=0);this.rawDelta=before;var idx=this.deltaIndex,
history=this.deltaHistory,max=this.deltaSmoothingMax;if(0<this._coolDown||!this.inFocus)this._coolDown--,before=Math.min(before,this._target);before>this._min&&(before=history[idx],before=Math.min(before,this._min));history[idx]=before;this.deltaIndex++;this.deltaIndex>max&&(this.deltaIndex=0);for(before=idx=0;before<max;before++)idx+=history[before];this.delta=idx/=max;this.time+=this.rawDelta;time>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=
time+1E3,this.framesThisSecond=0);this.framesThisSecond++;this.callback(time,idx,idx/this._target);this.lastTime=time},tick:function(){this.step(window.performance.now())},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(seamless){this.running?this.sleep():seamless&&(this.startTime+=-this.lastTime+(this.lastTime=window.performance.now()));this.raf.start(this.step.bind(this),this.useRAF);this.running=!0;this.step(window.performance.now())},stop:function(){this.started=
this.running=!1;this.raf.stop();return this},destroy:function(){this.stop();this.callback=NOOP;this.game=this.raf=null}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$boot$TimeStep.js.map
