{"version":3,"sources":["tick/interval.cljc"],"mappings":"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","names":["tick.interval/make-interval","beginning","end","js/Error","tick.core/<","tick.interval/temporal?","o","java.time.temporal/Temporal","cljs.core/type","tick.interval/temporal-amount?","java.time.temporal/TemporalAmount","tick$interval$ITimeSpanable$temporal_value$dyn","x__4428__auto__","m__4429__auto__","tick.interval/temporal-value","goog/typeOf","m__4426__auto__","cljs.core/missing-protocol","tick.interval/ITimeSpanable","_","cljs.core/PROTOCOL_SENTINEL","goog.object/set","f","java.time/Instant","i","s","tick.core/parse","java.time/LocalDate","d","java.time/LocalTime","t","java.time/LocalDateTime","ldt","js/Date","tick.core/instant","java.time/YearMonth","ym","java.time/Year","y","java.time/OffsetDateTime","odt","java.time/ZonedDateTime","zdt","tick.interval/new-interval","v1","v2","t1","tick.core/beginning","t2","tick.core/end","cljs.core.ex_info","tick.interval/extend","ival","dur","tick.core/forward-duration","tick.interval/scale","factor","cljc.java-time.duration/multiplied-by","tick.core/duration","cljs.core/PersistentArrayMap","p1__27943#","cljs.core.update","p1__27944#","p1__27945#","tick.core/backward-duration","p1__27946#","date","tick.core/on","zone","tick.core/in","var_args","args__4742__auto__","len__4736__auto__","i__4737__auto__","argseq__4743__auto__","cljs.core/IndexedSeq","tick.interval/bounds","seq27949","self__4724__auto__","cljs.core/seq","args","cljs.core.apply","tick.core/min","cljs.core.map","tick.core/max","tick.interval/am","tick.core.noon","tick.interval/pm","tick.interval/precedes?","x","tick.interval/equals?","cljs.core._EQ_","tick.interval/meets?","tick.interval/overlaps?","and__4115__auto__","tick.core/>","tick.interval/during?","tick.interval/starts?","tick.interval/finishes?","tick.interval/conv","tick.interval/preceded-by?","tick.interval/met-by?","tick.interval/overlapped-by?","tick.interval/finished-by?","tick.interval/contains?","tick.interval/started-by?","tick.interval/relation->kw","tick.interval/basic-relations","this__4380__auto__","k__4381__auto__","this__4382__auto__","k27952","else__4383__auto__","G__27960","cljs.core/Keyword","relations","cljs.core.get","__extmap","this__4399__auto__","f__4400__auto__","init__4401__auto__","cljs.core.reduce","ret__4402__auto__","p__27962","vec__27963","k__4403__auto__","cljs.core.nth","v__4404__auto__","this__4394__auto__","writer__4395__auto__","opts__4396__auto__","pr-pair__4397__auto__","keyval__4398__auto__","cljs.core/pr-sequential-writer","cljs.core.concat","cljs.core/PersistentVector","G__27951","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","unused__9542__auto__","self__","G__27968","args27958","cljs.core/aclone","this__4378__auto__","__meta","this__4375__auto__","__hash","this__4384__auto__","cljs.core/count","this__4376__auto__","h__4238__auto__","coll__4377__auto__","cljs.core/hash-unordered-coll","this27953","other27954","this__4389__auto__","k__4390__auto__","cljs.core/contains?","cljs.core.dissoc","cljs.core/-with-meta","cljs.core.into","cljs.core/not-empty","this__4387__auto__","k__4388__auto__","pred__27975","cljs.core/keyword-identical?","expr__27976","cljs.core.assoc","this__4392__auto__","cljs.core/MapEntry","this__4379__auto__","this__4385__auto__","entry__4386__auto__","cljs.core/vector?","cljs.core/-nth","cljs.core/-conj","tick.interval/GeneralRelation","this__4423__auto__","cljs.core/List","writer__4424__auto__","cljs.core/-write","G__27956","extmap__4419__auto__","G__27981","cljs.core/record?","tick.interval/->GeneralRelation","tick.interval/map->GeneralRelation","cljs.core/some","tick.interval/new-relation","seq27983","basic-relations","tick.interval/basic-relation","tick.interval/relation","G__27986","tick.interval/complement-r","r","cljs.core.remove","cljs.core/set","tick.interval/not-yet-implemented","tick.interval/compose-r","tick.interval/converse-r","tick.interval/intersection-r","cljs.spec.alpha/*compile-asserts*","cljs.core/deref","cljs.spec.alpha/*runtime-asserts*","cljs.spec.alpha/assert*","p1__27989#","clojure.set.intersection","tick.interval/disjoint?","tick.interval.new_relation","tick.interval/concur?","tick.interval/precedes-or-meets?","tick$interval$IIntervalOps$slice$dyn","tick.interval/slice","tick$interval$IIntervalOps$splice$dyn","tick.interval/splice","tick$interval$IIntervalOps$split$dyn","tick.interval/split","tick.interval/IIntervalOps","this","tick.interval/split-with-assert","tick.interval/slice-interval","tick.core.max","tick.core.min","cljs.core/associative?","tick.interval/split-interval","tick.interval/flatten","cljs.core.mapcat","temp__5733__auto__","ivals","intervals","cljs.core/vec","p1__27994#","cljs.core.keep","other","this-intervals","other-intervals","cljs.core/concat","cljs.core/conj","p1__27995#","p1__27996#","tick.interval/concur","G__27997","tick.interval/concurrencies","seq27998","iter__4529__auto__","s__28000","cljs.core/LazySeq","temp__5735__auto__","xs__6292__auto__","cljs.core/first","iterys__4525__auto__","s__28002","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","b__28004","cljs.core/chunk-buffer","i__28003","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__28001","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","fs__4526__auto__","iter__27999","xi","cljs.core.range","yi","conc","tick.interval/interval","G__28006","fexpr__28005","G__28008","fexpr__28007","G__28010","fexpr__28009","G__28012","fexpr__28011","tick.interval/ordered-disjoint-intervals?","rel","G__28016","vec__28017","seq__28018","first__28019","cljs.core/next","vec__28020","seq__28021","first__28022","xs","G__28023","G__28024","tick.interval/assert-proper-head","vec__28025","initial","subsequent","tick.interval/unite","vec__28032","seq__28033","first__28034","ival1","ival2","G__28036","unite","tick.interval/new-interval-group","tick.interval/normalize","vec__28045","seq__28046","first__28047","G__28048","normalize","tick.interval/union","seq28052","colls","vec__28064","seq__28065","first__28066","c1","c2","p1__28050#","cljs.core.sort_by","cljs.core/nil?","G__28068","G__28069","union","cljs.core/list","s__28073","b__28075","i__28074","iter__28072","coll","tick.interval/conj","interval","tick.interval.union","G__28082","tick.interval/intersection","args-arr__4757__auto__","argseq__4758__auto__","seq28079","G__28080","G__28081","self__4723__auto__","s1","s2","ys","G__28084","intersection","sets","cljs.core.conj","tick.interval/intersects?","tick.interval.intersection","G__28095","tick.interval/difference","seq28092","G__28093","G__28094","vec__28108","vec__28111","G__28115","difference","tick.interval/complement","cljs.core/empty?","tick.core/min-of-type","tick.core/now","tick.core/max-of-type","cljs.core.partition","p__28120","vec__28121","G__28125","cljs.core.not_EQ_","p1__28118#","cljs.core/last","p1__28119#","G__28131","tick.interval/disjoin","seq28128","G__28129","G__28130","result","G__28133","tick.interval/divide-by-apply","G__28134","tick.core/range","G__28135","G__28136","G__28137","G__28138","tick.interval/divide-by-duration","p1__28139#","cljs.core.juxt","cljs.core/identity","tick.interval/divide-by-period","period","p1__28140#","tick.interval/divide-by-divisor","divisor","cljc.java-time.duration/divided-by","tick$interval$IDivisibleInterval$divide_interval$dyn","tick.interval/divide-interval","tick.interval/IDivisibleInterval","java.time/Duration","java.time/Period","ld","n","tick.interval/group-by-intervals","intervals-to-group-by","groups","current-intervals","group","G__28167","G__28168","vec__28169","seg1","seg2","vec__28174","vec__28177","G__28180","tick$interval$IGroupable$group_by$dyn","tick.interval/group-by","tick.interval/IGroupable","grouping","b","G__28184","e","G__28186","tick.core/inc","cljs.core/chunk-first"],"sourcesContent":[";; Copyright \u00a9 2016-2017, JUXT LTD.\r\n\r\n(ns tick.interval\r\n  (:refer-clojure :exclude [contains? complement partition-by group-by conj extend divide flatten])\r\n  (:require\r\n    [clojure.set :as set]\r\n    [clojure.spec.alpha :as s]\r\n    [tick.core :as t]\r\n    [cljc.java-time.duration]\r\n    #?@(:cljs\r\n         [[java.time :refer [Clock ZoneId ZoneOffset Instant Duration Period DayOfWeek Month ZonedDateTime LocalTime\r\n                             LocalDateTime LocalDate Year YearMonth OffsetDateTime OffsetTime]]\r\n          [java.time.temporal :refer [ChronoUnit ChronoField Temporal TemporalAdjusters TemporalAdjusters TemporalAmount]]\r\n          [cljs.java-time.extend-eq-and-compare]]))\r\n  #?(:clj\r\n     (:import\r\n       [java.util Date]\r\n       [java.time Instant Duration Period ZoneId LocalDate LocalTime LocalDateTime Year YearMonth OffsetDateTime ZoneId ZonedDateTime]\r\n       [java.time.temporal Temporal TemporalAmount])))\r\n\r\n;; Use of Allen's Interval Algebra, inspired from a working\r\n;; demonstration of time-count by Eric Evans.\r\n\r\n;; Construction\r\n\r\n(defn- make-interval [beginning end]\r\n  (assert (t/< beginning end))\r\n  {:tick/beginning beginning\r\n   :tick/end end})\r\n\r\n(defn temporal? [o]\r\n  #?(:clj (instance? Temporal o)\r\n     :cljs (.isPrototypeOf Temporal (type o))))\r\n\r\n(defn temporal-amount? [o]\r\n  #?(:clj (instance? TemporalAmount o)\r\n     :cljs (.isPrototypeOf TemporalAmount (type o))))\r\n\r\n(defprotocol ITimeSpanable\r\n  (temporal-value [_] \"Return a value of a type that satisfies t/ITimeSpan\"))\r\n\r\n(extend-protocol ITimeSpanable\r\n  #?(:clj clojure.lang.Fn :cljs function)\r\n  (temporal-value [f] (temporal-value (f)))\r\n\r\n  Instant\r\n  (temporal-value [i] i)\r\n\r\n  #?(:clj String :cljs string)\r\n  (temporal-value [s] (temporal-value (t/parse s)))\r\n\r\n  LocalDate\r\n  (temporal-value [d] d)\r\n\r\n  LocalTime\r\n  (temporal-value [t] t)\r\n\r\n  LocalDateTime\r\n  (temporal-value [ldt] ldt)\r\n\r\n #?(:clj Date :cljs js/Date)\r\n  (temporal-value [d] (t/instant d))\r\n\r\n  YearMonth\r\n  (temporal-value [ym] ym)\r\n\r\n  Year\r\n  (temporal-value [y] y)\r\n\r\n  OffsetDateTime\r\n  (temporal-value [odt] odt)\r\n\r\n  ZonedDateTime\r\n  (temporal-value [zdt] zdt))\r\n\r\n(defn new-interval [v1 v2]\r\n  (let [t1 (t/beginning (temporal-value v1))\r\n        t2 (t/end (temporal-value v2))]\r\n    (if (t/< t1 t2)\r\n      {:tick/beginning t1\r\n       :tick/end t2}\r\n      (throw\r\n        (ex-info\r\n          \"Interval must span between two times, the first must be before the second\"\r\n          {:tick/beginning v1 :tick/end v2})))))\r\n\r\n;; Adjustments\r\n\r\n;; (extend _ & durations) to extend the interval, add durations to the end\r\n;; Durations can be negative, so a retraction is simply an extend with a negative duration.\r\n\r\n(defn extend [ival dur]\r\n  (make-interval\r\n    (t/beginning ival)\r\n    (t/forward-duration (t/end ival) dur)))\r\n\r\n(defn scale [ival factor]\r\n  (make-interval\r\n    (t/beginning ival)\r\n    (t/forward-duration (t/beginning ival) (cljc.java-time.duration/multiplied-by (t/duration ival) factor))))\r\n\r\n(extend-protocol t/ITimeShift\r\n  #?(:clj clojure.lang.APersistentMap :cljs PersistentArrayMap)\r\n  (forward-duration [ival d]\r\n    (-> ival\r\n        (update :tick/beginning #(t/forward-duration % d))\r\n        (update :tick/end #(t/forward-duration % d))))\r\n  (backward-duration [ival d]\r\n    (-> ival\r\n        (update :tick/beginning #(t/backward-duration % d))\r\n        (update :tick/end #(t/backward-duration % d)))))\r\n\r\n;; An interval of duration d to t1 can be constructed like this:\r\n;; (scale (new-interval t1 d) -1)\r\n\r\n;; (>> _ d) to shift the interval into the future by duration d\r\n;; (<< _ d) to shift the interval into the past by duration d\r\n\r\n;; (* _) to duplicate into meeting intervals, into a sequence (possibly need a record container for this, IntervalSeq)\r\n\r\n;; (interpose IntervalSeq d)\r\n\r\n;; / to divide into subintervals\r\n\r\n;; Finally, it should be possible to transduce IntervalSeqs\r\n\r\n\r\n;; Reification\r\n\r\n(extend-protocol t/ITimeReify\r\n  #?(:clj clojure.lang.APersistentMap :cljs PersistentArrayMap)\r\n  (on [i date] (new-interval (t/on (t/beginning i) date) (t/on (t/end i) date)))\r\n  (in [i zone] (new-interval (t/in (t/beginning i) zone) (t/in (t/end i) zone))))\r\n\r\n(defn bounds [& args]\r\n  (make-interval\r\n    (apply t/min (map t/beginning args))\r\n    (apply t/max (map t/end args))))\r\n\r\n(defn am [^LocalDate date]\r\n  (new-interval (t/beginning date) (t/noon date)))\r\n\r\n(defn pm [^LocalDate date]\r\n  (new-interval (t/noon date) (t/end date)))\r\n\r\n;; Allen's Basic Relations\r\n\r\n(defn precedes? [x y]\r\n  (t/< (t/end x) (t/beginning y)))\r\n\r\n(defn equals? [x y]\r\n  (and\r\n    (= (t/beginning x) (t/beginning y))\r\n    (= (t/end x) (t/end y))))\r\n\r\n(defn meets? [x y]\r\n  (= (t/end x) (t/beginning y)))\r\n\r\n(defn overlaps? [x y]\r\n  (and\r\n   (t/< (t/beginning x) (t/beginning y))\r\n   (t/> (t/end x) (t/beginning y))\r\n   (t/< (t/end x) (t/end y))))\r\n\r\n(defn during? [x y]\r\n  (and\r\n   (t/> (t/beginning x) (t/beginning y))\r\n   (t/< (t/end x) (t/end y))))\r\n\r\n(defn starts? [x y]\r\n  (and\r\n   (= (t/beginning x) (t/beginning y))\r\n   (t/< (t/end x) (t/end y))))\r\n\r\n(defn finishes? [x y]\r\n  (and\r\n   (t/> (t/beginning x) (t/beginning y))\r\n   (= (t/end x) (t/end y))))\r\n\r\n;; Six pairs of the relations are converses.  For example, the converse of \"a precedes b\" is \"b preceded by a\"; whenever the first relation is true, its converse is true also.\r\n(defn conv\r\n  \"The converse of a basic relation.\"\r\n  [f]\r\n  (fn [x y]\r\n    (f y x)))\r\n\r\n(defn preceded-by? [x y] ((conv precedes?) x y))\r\n(defn met-by? [x y] ((conv meets?) x y))\r\n(defn overlapped-by? [x y] ((conv overlaps?) x y))\r\n(defn finished-by? [x y] ((conv finishes?) x y))\r\n\r\n;; contains? is semantically similar to tick.core/coincident?\r\n(defn contains? [x y] ((conv during?) x y))\r\n(defn started-by? [x y] ((conv starts?) x y))\r\n\r\n(def relation->kw\r\n  {precedes? :precedes\r\n   meets? :meets\r\n   starts? :starts\r\n   during? :during\r\n   finishes? :finishes\r\n   overlaps? :overlaps\r\n   equals? :equals\r\n   contains? :contains\r\n   started-by? :started-by\r\n   finished-by? :finished-by\r\n   overlapped-by? :overlapped-by\r\n   met-by? :met-by\r\n   preceded-by? :preceded-by})\r\n\r\n(def basic-relations\r\n  [precedes? meets? overlaps? finished-by? contains?\r\n   starts? equals? started-by? during? finishes? overlapped-by?\r\n   met-by? preceded-by?])\r\n\r\n;; Allen's General Relations\r\n\r\n(defrecord GeneralRelation [relations]\r\n  #?(:clj clojure.lang.IFn :cljs cljs.core/IFn)\r\n  (#?(:clj invoke :cljs -invoke) [_ x y]\r\n    (some (fn [f] (when (f x y) f)) relations)))\r\n\r\n;; Relations are 'basic relations' in [ALSPAUGH-2009]. Invoking a\r\n;; general relation on two intervals returns the basic relation that\r\n;; causes the general relation to hold. Note there can only be one\r\n;; such basic relation due to the relations being distinct.\r\n\r\n(defn new-relation [& basic-relations]\r\n  (->GeneralRelation basic-relations))\r\n\r\n(def ^{:doc \"A function to determine the (basic) relation between two intervals.\"}\r\n  basic-relation\r\n  (apply new-relation basic-relations))\r\n\r\n(defn relation [x y]\r\n  (relation->kw (basic-relation x y)))\r\n\r\n;; Operations on relations\r\n\r\n(defn complement-r\r\n  \"Return the complement of the general relation. The complement ~r of\r\n  a relation r is the relation consisting of all basic relations not\r\n  in r.\"\r\n  [^GeneralRelation r]\r\n  (assoc r :relations (remove (set (:relations r)) basic-relations)))\r\n\r\n(defn not-yet-implemented []\r\n  #?(:clj (new UnsupportedOperationException \"Not yet implemented\")\r\n     :cljs (js/Error. \"Not yet implemented\")))\r\n\r\n(defn compose-r\r\n  \"Return the composition of r and s\"\r\n  [r s]\r\n  (throw (not-yet-implemented)))\r\n\r\n(defn converse-r\r\n  \"Return the converse of the given general relation. The converse !r\r\n  of a relation r is the relation consisting of the converses of all\r\n  basic relations in r.\"\r\n  [^GeneralRelation r]\r\n  (assoc r :relations (map conv (:relations r))))\r\n\r\n(defn intersection-r\r\n  \"Return the intersection of the r with s\"\r\n  [^GeneralRelation r ^GeneralRelation s]\r\n  (s/assert r #(instance? GeneralRelation %))\r\n  (->GeneralRelation (set/intersection (set (:relations r))))\r\n  (throw (not-yet-implemented)))\r\n\r\n;; Useful named general relations\r\n\r\n(def disjoint? (new-relation precedes? preceded-by? meets? met-by?))\r\n(def concur? (complement-r disjoint?))\r\n(def precedes-or-meets? (new-relation precedes? meets?))\r\n\r\n;; Functions that make use of Allens' Interval Algebra\r\n\r\n(defprotocol IIntervalOps\r\n  (slice [this beginning end] \"Fit the interval between beginning and end, slicing off one or both ends as necessary\")\r\n  (splice [this ival] \"Splice another interval on to this one\")\r\n  (split [this t] \"Split ival into 2 intervals at t, returned as a 2-element vector\"))\r\n\r\n(defn split-with-assert [ival t]\r\n  (assert\r\n    (and (t/< (t/beginning ival) t)\r\n         (t/< t (t/end ival))))\r\n  (split ival t))\r\n\r\n(defn slice-interval [ival beginning end]\r\n  (let [beginning (t/max (t/beginning ival) beginning)\r\n        end (t/min (t/end ival) end)]\r\n    (when (t/< beginning end)\r\n      (if (associative? ival)\r\n        (assoc ival :tick/beginning beginning :tick/end end)\r\n        (make-interval beginning end)))))\r\n\r\n(defn split-interval [ival t]\r\n  [(slice-interval ival (t/beginning ival) t)\r\n   (slice-interval ival t (t/end ival))])\r\n\r\n;; Maps either represent single intervals, having :tick/beginning and\r\n;; :tick/end, or with a :tick/intervals entry containing groups of\r\n;; time-ordered disjoint intervals. Support groups using plain maps\r\n;; helps preserve data in both maps being spliced together.\r\n;;\r\n;; Recursive structures not yet possible.\r\n\r\n;; I'm unhappy that I haven't been able to write a recursive\r\n;; implementation of flatten.\r\n(defn flatten [s]\r\n  (mapcat\r\n    (fn [x]\r\n      (if-let [ivals (:tick/intervals x)]\r\n        ivals [x]))\r\n    s))\r\n\r\n(extend-protocol IIntervalOps\r\n  #?(:clj clojure.lang.APersistentMap :cljs PersistentArrayMap)\r\n  (slice [this beginning end]\r\n    (if-let [intervals (:tick/intervals this)]\r\n      (assoc this :tick/intervals (vec (keep #(slice % beginning end) intervals)))\r\n      (slice-interval this beginning end)))\r\n  (splice [this other]\r\n    (let [this-intervals (:tick/intervals this)\r\n          other-intervals (:tick/intervals other)]\r\n      (cond\r\n        (and this-intervals other-intervals)\r\n        (update this :tick/intervals concat other-intervals)\r\n        this-intervals\r\n        (update this :tick/intervals clojure.core/conj other)\r\n        other-intervals\r\n        (update other :tick/intervals clojure.core/conj this)\r\n        :else\r\n        {:tick/intervals [this other]})))\r\n  (split [this t]\r\n    (if-let [intervals (:tick/intervals this)]\r\n      [(assoc this :tick/intervals\r\n              (vec (keep #(slice % (t/beginning this) t) intervals)))\r\n       (assoc this :tick/intervals\r\n              (vec (keep #(slice % t (t/end this)) intervals)))]\r\n      (split-interval this t)))\r\n\r\n  LocalDate\r\n  (slice [this beginning end]\r\n    (slice-interval this beginning end))\r\n  (splice [this ival]\r\n    (throw (ex-info \"splice not implemented\" {:this this :interval ival})))\r\n  (split [this t]\r\n    (split-interval this t))\r\n\r\n  YearMonth\r\n  (slice [this beginning end]\r\n    (slice-interval this beginning end))\r\n  (splice [this ival]\r\n    (throw (ex-info \"splice not implemented\" {:this this :interval ival})))\r\n  (split [this t]\r\n    (split-interval this t))\r\n\r\n  Year\r\n  (slice [this beginning end]\r\n    (slice-interval this beginning end))\r\n  (splice [this ival]\r\n    (throw (ex-info \"splice not implemented\" {:this this :interval ival})))\r\n  (split [this t]\r\n    (split-interval this t)))\r\n\r\n(defn concur\r\n  \"Return the interval representing the interval, if there is one,\r\n  representing the interval of time the given intervals are\r\n  concurrent.\"\r\n  [x y]\r\n  (case (relation x y)\r\n    :overlaps (slice x (t/beginning y) (t/end x))\r\n    :overlapped-by (slice x (t/beginning x) (t/end y))\r\n    (:starts :finishes :during :equals) x\r\n    (:started-by :finished-by :contains) (slice x (t/beginning y) (t/end y))\r\n    nil))\r\n\r\n(defn ^:experimental concurrencies\r\n  \"Return a sequence of occurances where intervals coincide (having\r\n  non-nil concur intervals).\"\r\n  [& intervals]\r\n  (let [intervals (vec intervals)]\r\n    (for [xi (range (count intervals))\r\n          yi (range (count intervals))\r\n          :when (< xi yi)\r\n          :let [x (get intervals xi)\r\n                y (get intervals yi)\r\n                conc (concur x y)]\r\n          :when conc]\r\n      {:x x :y y :relation (relation x y) :concur conc})))\r\n\r\n;; Comparison. We have now built up the capability of comparing\r\n;; intervals using the normal <, >, <=, >= operators.\r\n\r\n(defn interval [t]\r\n  (new-interval (t/beginning t) (t/end t)))\r\n\r\n(extend-protocol t/ITimeComparison\r\n  #?(:clj clojure.lang.APersistentMap :cljs PersistentArrayMap)\r\n  (< [x y] (#{precedes? meets?} (basic-relation x y)))\r\n  (<= [x y] (#{precedes? meets? equals? starts? overlaps? finished-by?} (basic-relation x y)))\r\n  (> [x y] (#{preceded-by? met-by?} (basic-relation x y)))\r\n  (>= [x y] (#{preceded-by? met-by? equals? started-by? overlapped-by? finishes?} (basic-relation x y))))\r\n\r\n;; Interval sequences - time-ordered sequences of disjoint intervals\r\n\r\n(defn ordered-disjoint-intervals?\r\n  \"Are all the intervals in the given set time-ordered and\r\n  disjoint? This is a useful property of a collection of\r\n  intervals. The given collection must contain proper intervals (that\r\n  is, intervals that have finite greater-than-zero durations).\"\r\n  [s]\r\n  (let [rel (new-relation precedes? meets?)]\r\n    (some?\r\n     (loop [[x & xs] s]\r\n       (if (or (nil? x) (nil? (first xs))) true\r\n           (when (rel x (first xs))\r\n             (recur xs)))))))\r\n\r\n(defn- assert-proper-head\r\n  \"Is the first interval in a sequence time-ordered and disjoint with\r\n  respect to the second? Note, only compares first two in a\r\n  sequence. Used by functions to ensure the head of the (possibly\r\n  lazy) sequence satisfies this invariant.\"\r\n  [s]\r\n  (let [[initial subsequent] s]\r\n    (when (and (nil? initial) subsequent)\r\n      (throw (ex-info \"Unexpected nil in sequence\" {:nil-before subsequent})))\r\n    (when subsequent\r\n      (when-not (precedes-or-meets? initial subsequent)\r\n        (throw\r\n          (ex-info\r\n            \"Intervals in sequence violate requirement that intervals are time-ordered and disjoint\"\r\n            {:interval1 initial\r\n             :interval2 subsequent}))))\r\n    s))\r\n\r\n(defn unite\r\n  \"Unite concurrent intervals. Intervals must be ordered by beginning\r\n  but not necessarily disjoint (the purpose of this function is to\r\n  splice together intervals that are concurrent resulting in a\r\n  time-ordered sequence of disjoint intervals that is returned.\"\r\n  [intervals]\r\n  (letfn [(unite [intervals]\r\n            (lazy-seq\r\n              (let [[ival1 ival2 & r] intervals]\r\n                (cond\r\n                  (nil? ival2) (if ival1 (list ival1) (list))\r\n                  :else\r\n                  (case (relation ival1 ival2)\r\n                    (:precedes :meets)\r\n                    (cons ival1 (unite (rest intervals)))\r\n                    (:overlaps :contains :starts :started-by :finished-by)\r\n                    (unite (cons (splice ival1 ival2) r))\r\n                    (throw\r\n                      (ex-info \"Intervals in sequence violate requirement that intervals are time-ordered\" {:interval1 ival1\r\n                                                                                                            :interval2 ival2\r\n                                                                                                            :relation (relation ival1 ival2)})))))))]\r\n    (unite intervals)))\r\n\r\n(defn new-interval-group\r\n  \"Return an interval group. Interval groups are maps with\r\n  a :tick/intervals entry that contain a time-ordered sequence of\r\n  disjoint intervals.\"\r\n  [x]\r\n  (if (:tick/intervals x)\r\n    x\r\n    {:tick/intervals [x]}))\r\n\r\n(defn normalize\r\n  \"Within a time-ordered sequence of disjoint intervals, return a\r\n  sequence of interval groups, splicing together meeting intervals.\"\r\n  [intervals]\r\n  (letfn [(normalize [intervals]\r\n            (lazy-seq\r\n              (let [[ival1 ival2 & r] intervals]\r\n                (if (nil? ival2) (if ival1 (list (new-interval-group ival1)) (list))\r\n                    (case (relation ival1 ival2)\r\n                      :meets (normalize (cons (splice ival1 ival2) r))\r\n                      (cons (new-interval-group ival1)\r\n                            (normalize (assert-proper-head (rest intervals)))))))))]\r\n    (normalize (assert-proper-head intervals))))\r\n\r\n(defn union\r\n  \"Merge multiple time-ordered sequences of disjoint intervals into a\r\n  single sequence of time-ordered disjoint intervals.\"\r\n  [& colls]\r\n  (letfn [(union [colls]\r\n            (lazy-seq\r\n              (if (<= (count colls) 1)\r\n                (first colls)\r\n                (let [[c1 c2 & r] (sort-by #(t/beginning (first %)) (remove nil? colls))]\r\n                  (if (nil? c2)\r\n                    c1\r\n                    (if (disjoint? (first c1) (first c2))\r\n                      (cons (first c1) (union (apply list (next c1) c2 r)))\r\n                      (union (apply list\r\n                                    (cons (splice (first c1) (first c2))\r\n                                          (next c1))\r\n                                    (next c2)\r\n                                    r))))))))]\r\n    (union (for [coll colls :when coll] (sort-by t/beginning coll)))))\r\n\r\n(defn conj [coll interval]\r\n  (union coll [interval]))\r\n\r\n(defn intersection\r\n  \"Return a time-ordered sequence of disjoint intervals where two or\r\n  more intervals of the given sequences are concurrent. Arguments must\r\n  be time-ordered sequences of disjoint intervals.\"\r\n  ;; Single arity\r\n  ([s1] s1)\r\n  ;; 2-arity\r\n  ([s1 s2]\r\n   (letfn\r\n       [(intersection [xs ys]\r\n          (lazy-seq\r\n            (let [x (first xs)\r\n                  y (first ys)]\r\n              (if (and x y)\r\n                (case (relation x y)\r\n                  (:precedes :meets)\r\n                  (intersection (assert-proper-head (next xs)) ys)\r\n\r\n                  (:preceded-by :met-by)\r\n                  (intersection xs (assert-proper-head (next ys)))\r\n\r\n                  :started-by\r\n                  (cons (slice x (t/beginning y) (t/end y))\r\n                        (intersection\r\n                          (assert-proper-head (cons (slice x (t/end y) (t/end x)) (next xs)))\r\n                          (assert-proper-head (next ys))))\r\n\r\n                  :finished-by\r\n                  (cons (slice x (t/beginning y) (t/end y))\r\n                        (intersection\r\n                          (assert-proper-head (next xs))\r\n                          (assert-proper-head (next ys))))\r\n\r\n                  :overlaps\r\n                  (cons (slice x (t/beginning y) (t/end x))\r\n                        (intersection\r\n                          (assert-proper-head (cons (slice x (t/beginning y) (t/end x)) (next xs)))\r\n                          (assert-proper-head (cons (slice y (t/end x) (t/end y)) (next ys)))))\r\n\r\n\r\n                  :overlapped-by\r\n                  (cons (slice x (t/beginning x) (t/end y))\r\n                        (intersection\r\n                          (assert-proper-head (cons (slice x (t/end y) (t/end x)) (next xs)))\r\n                          (assert-proper-head (next ys))))\r\n\r\n                  :contains\r\n                  (cons (slice x (t/beginning y) (t/end y))\r\n                        (intersection\r\n                          (assert-proper-head (cons (slice x (t/end y) (t/end x)) (next xs)))\r\n                          (assert-proper-head (next ys))))\r\n\r\n                  :during\r\n                  (cons x\r\n                        (intersection\r\n                          (assert-proper-head (next xs))\r\n                          (assert-proper-head (cons (slice y (t/end x) (t/end y)) (next ys)))))\r\n\r\n                  :equals\r\n                  (cons x\r\n                        (intersection\r\n                          (assert-proper-head (next xs))\r\n                          (assert-proper-head (next ys))))\r\n\r\n                  :finishes\r\n                  (cons x\r\n                        (intersection\r\n                          (assert-proper-head (next xs))\r\n                          (assert-proper-head (next ys))))\r\n\r\n                  :starts\r\n                  (cons x\r\n                        (intersection\r\n                          (assert-proper-head (next xs))\r\n                          (assert-proper-head (cons (slice y (t/end x) (t/end y))\r\n                                                    (next ys))))))\r\n\r\n                ;; List of nothing because one of the collections is\r\n                ;; empty, so the intersection must be empty too.\r\n                (list)))))]\r\n\r\n       (intersection\r\n         (assert-proper-head s1)\r\n         (assert-proper-head s2))))\r\n\r\n  ([s1 s2 & sets]\r\n   (reduce intersection s1 (clojure.core/conj sets s2))))\r\n\r\n(defn intersects? [ivals interval]\r\n  (not-empty (intersection ivals [interval])))\r\n\r\n(defn difference\r\n  \"Return an interval set that is the first set without elements of\r\n  the remaining sets.\"\r\n  ([s1] s1)\r\n  ([s1 s2]\r\n   (letfn [(difference [xs ys]\r\n             (let [[x] xs [y] ys]\r\n               (if x\r\n                 (if y\r\n                   (lazy-seq\r\n                     (case (relation x y)\r\n                       (:precedes :meets)\r\n                       (cons x (difference (assert-proper-head (next xs)) ys))\r\n\r\n                       (:preceded-by :met-by)\r\n                       (difference xs (assert-proper-head (next ys)))\r\n\r\n                       (:finishes :during :equals)\r\n                       (difference\r\n                         (assert-proper-head (next xs))\r\n                         (assert-proper-head ys))\r\n\r\n                       :starts\r\n                       (difference\r\n                         (assert-proper-head (next xs))\r\n                         ys)\r\n\r\n                       (:started-by :overlapped-by)\r\n                       (difference\r\n                         (assert-proper-head\r\n                           (cons (slice x (t/end y) (t/end x)) (next xs)))\r\n                         (assert-proper-head (next ys)))\r\n\r\n                       :finished-by\r\n                       (cons (slice x (t/beginning x) (t/beginning y))\r\n                             (difference\r\n                               (assert-proper-head (next xs))\r\n                               (assert-proper-head (next ys))))\r\n\r\n                       :overlaps\r\n                       (cons (slice x (t/beginning x) (t/beginning y))\r\n                             (difference\r\n                               (assert-proper-head (next xs))\r\n                               ys))\r\n\r\n                       :contains\r\n                       (cons (slice x (t/beginning x) (t/beginning y))\r\n                             (difference\r\n                               (assert-proper-head\r\n                                 (cons (slice x (t/end y) (t/end x)) (next xs)))\r\n                               (assert-proper-head (next ys))))))\r\n                   ;; If xs but no ys\r\n                   xs)\r\n                 ;; If no xs or ys\r\n                 (list))))]\r\n\r\n     (assert-proper-head s1)\r\n     (assert-proper-head s2)\r\n\r\n     (difference s1 s2)))\r\n\r\n  ([s1 s2 & sets]\r\n   (reduce difference s1 (clojure.core/conj sets s2))))\r\n\r\n(defn complement [coll]\r\n  (if (empty? coll)\r\n    [(new-interval (t/min-of-type (t/now)) (t/max-of-type (t/now)))]\r\n    (let [r (->> coll\r\n                 (partition 2 1)\r\n                 (keep (fn [[x y]]\r\n                         (when-not (meets? x y)\r\n                           (new-interval (t/end x) (t/beginning y))))))]\r\n      (cond-> r\r\n        (not= (t/beginning (first coll)) (t/min-of-type (t/beginning (first coll))))\r\n        (#(concat [(new-interval (t/min-of-type (t/beginning (first coll))) (t/beginning (first coll)))] %))\r\n        (not= (t/end (last coll)) (t/max-of-type (t/end (last coll))))\r\n        (#(concat % [(new-interval (t/end (last coll)) (t/max-of-type (t/end (last coll))))]))))))\r\n\r\n(defn disjoin\r\n  \"Split s1 across the grating defined by s2\"\r\n  ([s1] s1)\r\n  ([s1 s2]\r\n   (loop [xs s1\r\n          ys s2\r\n          result []]\r\n     (if (not-empty xs)\r\n       (if (not-empty ys)\r\n         (let [x (first xs) y (first ys)]\r\n           (case (relation x y)\r\n             (:precedes :meets) (recur (next xs) ys (clojure.core/conj result x))\r\n;; TODO:\r\n;;             (:preceded-by :met-by) (recur xs (next ys) result)\r\n;;             (:finishes :during :equals) (recur (next xs) (next ys) result)\r\n;;             :starts (recur (next xs) ys result)\r\n;;             (:started-by :overlapped-by)\r\n;;             (recur (cons (slice x (t/end y) (t/end x)) (next xs)) (next ys) result)\r\n;;             :finished-by (recur (next xs) (next ys) (clojure.core/conj result (slice x (t/beginning x) (t/beginning y))))\r\n;;            :overlaps (recur (next xs) ys (clojure.core/conj result (slice x (t/beginning x) (t/beginning y))))\r\n;;            :contains\r\n             #_(recur (cons (slice x (t/end y) (t/end x)) (next xs))\r\n                    (next ys)\r\n                    (clojure.core/conj result (slice x (t/beginning x) (t/beginning y))))))\r\n         (apply clojure.core/conj result xs))\r\n       result)))\r\n  ([s1 s2 & sets]\r\n   (reduce difference s1 (clojure.core/conj sets s2))))\r\n\r\n;; Division\r\n\r\n(defn- divide-by-apply\r\n  \"Return a lazy sequence of java.time.Temporal instances over the\r\n  given (local) interval.\"\r\n  [ival f]\r\n  (cond->\r\n      (t/range\r\n        (f (t/beginning ival))\r\n        (f (t/end ival)))\r\n    ;; Since range is exclusive, we must add one more value, but only\r\n    ;; if it concurs rather than merely meets.\r\n    (concur (f (t/end ival)) ival)\r\n    (concat [(f (t/end ival))])))\r\n\r\n(defn divide-by-duration\r\n  \"Divide an interval by a duration, returning a sequence of\r\n  intervals. If the interval cannot be wholly sub-divided by the\r\n  duration divisor, the last interval will represent the 'remainder'\r\n  of the division and not be as long as the other preceeding\r\n  intervals.\"\r\n  [ival dur]\r\n  (->> (t/range\r\n         (t/beginning ival)\r\n         (t/end ival)\r\n         dur)\r\n       ;; Bound by given interval, last will become a remainder.\r\n       (map (juxt identity #(t/min (t/forward-duration % dur) (t/end ival))))))\r\n\r\n(defn divide-by-period\r\n  [ival period]\r\n  (->> (t/range\r\n         (t/beginning ival)\r\n         (t/end ival)\r\n         period)\r\n       ;; Bound by given interval, last will become a remainder.\r\n       (map (juxt identity #(t/min (t/forward-duration % period) (t/end ival))))))\r\n\r\n(defn divide-by-divisor [ival divisor]\r\n  (divide-by-duration ival (cljc.java-time.duration/divided-by (t/duration ival) divisor)))\r\n\r\n(defprotocol IDivisibleInterval\r\n  (divide-interval [divisor ival] \"Divide an interval by a given divisor\"))\r\n\r\n(extend-protocol IDivisibleInterval\r\n  #?(:clj clojure.lang.Fn :cljs function)\r\n  (divide-interval [f ival] (divide-by-apply ival f))\r\n  Duration\r\n  (divide-interval [dur ival] (divide-by-duration ival dur))\r\n  Period\r\n  (divide-interval [period ival] (divide-by-period ival period))\r\n  #?(:clj Long :cljs number)\r\n  (divide-interval [divisor ival] (divide-by-divisor ival divisor)))\r\n\r\n;; TODO: hours-over, minutes-over, seconds-over, millis-over?,\r\n\r\n(extend-protocol t/IDivisible\r\n  LocalDate\r\n  (divide [ld d] (divide-interval d ld))\r\n  Year\r\n  (divide [n d] (divide-interval d n))\r\n  YearMonth\r\n  (divide [n d] (divide-interval d n))\r\n  #?(:clj clojure.lang.APersistentMap :cljs PersistentArrayMap)\r\n  (divide [ival o] (divide-interval o ival)))\r\n\r\n;; Grouping (similar to Division)\r\n\r\n;; TODO: tag literals data_readers.clj for tick?\r\n;; #tick/instant \"\"\r\n;; #tick/local-date-time \"\"\r\n;; #tick/local-date \"\"\r\n\r\n(defn group-by-intervals\r\n  \"Divide intervals in s1 by (disjoint ordered) intervals in s2,\r\n  splitting if necessary, grouping by s2. Complexity is O(n) rather\r\n  than O(n^2)\"\r\n  [intervals-to-group-by ivals]\r\n  {:pre [(ordered-disjoint-intervals? intervals-to-group-by)\r\n         (ordered-disjoint-intervals? ivals)]}\r\n  (loop [intervals ivals\r\n         groups intervals-to-group-by\r\n         result {}\r\n         current-intervals []]\r\n    (if (not-empty intervals)\r\n      (if (not-empty groups)\r\n        (let [ival (first intervals)\r\n              group (first groups)]\r\n\r\n          (case (relation ival group)\r\n            ;; If precedes or meets, discard ival\r\n            (:precedes :meets)\r\n            (recur (next intervals) groups result current-intervals)\r\n\r\n            (:preceded-by :met-by)\r\n            (recur\r\n              intervals (next groups)\r\n              (cond-> result\r\n                (not-empty current-intervals)\r\n                (assoc group current-intervals))\r\n              [])\r\n\r\n            :finishes\r\n            (recur\r\n              (next intervals)\r\n              (next groups)\r\n              (assoc result group (clojure.core/conj current-intervals ival))\r\n              [])\r\n\r\n            :equals\r\n            (recur\r\n              (next intervals)\r\n              (next groups)\r\n              (assoc result group (clojure.core/conj current-intervals ival))\r\n              [])\r\n\r\n            :finished-by\r\n            (let [[seg1 seg2] (split-with-assert ival (t/beginning group))]\r\n              (recur\r\n                (next intervals)\r\n                (next groups)\r\n                (assoc result group (clojure.core/conj current-intervals seg2))\r\n                []))\r\n\r\n            :started-by\r\n            (let [[seg1 seg2] (split-with-assert ival (t/end group))]\r\n              (recur\r\n                (cons seg2 (next intervals))\r\n                (next groups)\r\n                (assoc result group (clojure.core/conj current-intervals seg1))\r\n                []))\r\n\r\n            :overlapped-by\r\n            (let [[seg1 seg2] (split-with-assert ival (t/end group))]\r\n              (recur\r\n                (cons seg2 (next intervals))\r\n                (next groups)           ; end of this group\r\n                (assoc result group (clojure.core/conj current-intervals seg1))\r\n                []))\r\n\r\n            (:starts :during)\r\n            (recur\r\n              (next intervals)\r\n              groups\r\n              result\r\n              (clojure.core/conj current-intervals ival))\r\n\r\n            (:contains)\r\n            (recur\r\n              (next intervals)\r\n              (next groups)\r\n              (assoc result group [(slice ival (t/beginning group) (t/end group))])\r\n              [])\r\n\r\n            (:overlaps)\r\n            (recur\r\n              (next intervals)\r\n              groups\r\n              result\r\n              (clojure.core/conj current-intervals (slice ival (t/beginning group) (t/end ival))))))\r\n\r\n        ;; No more groups\r\n        result)\r\n\r\n      ;; No more intervals\r\n      (cond-> result\r\n        (and (first groups) (not-empty current-intervals))\r\n        (assoc (first groups) current-intervals)))))\r\n\r\n(defprotocol IGroupable\r\n  (group-by [grouping ivals]))\r\n\r\n(extend-protocol IGroupable\r\n  #?(:clj clojure.lang.Fn :cljs function)\r\n  (group-by [f ivals]\r\n    (if (empty? ivals)\r\n      {}\r\n      (let [r (apply bounds ivals)\r\n            b (f (t/beginning r))\r\n            e (f (t/end r))\r\n            groups (t/range b (t/inc e))]\r\n        (group-by groups ivals))))\r\n  #?(:clj Iterable :cljs LazySeq)\r\n  (group-by [groups ivals]\r\n    (group-by-intervals groups ivals))\r\n  #?(:cljs PersistentVector)\r\n  #?(:cljs\r\n     (group-by [groups ivals]\r\n       (group-by-intervals groups ivals))))\r\n"]}