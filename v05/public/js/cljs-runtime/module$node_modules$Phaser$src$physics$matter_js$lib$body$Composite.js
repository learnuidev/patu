shadow$provide.module$node_modules$Phaser$src$physics$matter_js$lib$body$Composite=function(global,require,module,exports){var Composite={};module.exports=Composite;var Events=require("module$node_modules$Phaser$src$physics$matter_js$lib$core$Events"),Common=require("module$node_modules$Phaser$src$physics$matter_js$lib$core$Common"),Bounds=require("module$node_modules$Phaser$src$physics$matter_js$lib$geometry$Bounds"),Body=require("module$node_modules$Phaser$src$physics$matter_js$lib$body$Body");
(function(){Composite.create=function(options){return Common.extend({id:Common.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},options)};Composite.setModified=function(composite,isModified,updateParents,updateChildren){composite.isModified=isModified;updateParents&&composite.parent&&Composite.setModified(composite.parent,isModified,updateParents,updateChildren);if(updateChildren)for(var i=0;i<composite.composites.length;i++)Composite.setModified(composite.composites[i],
isModified,updateParents,updateChildren)};Composite.add=function(composite,object){var objects=[].concat(object);Events.trigger(composite,"beforeAdd",{object:object});for(var i=0;i<objects.length;i++){var obj=objects[i];switch(obj.type){case "body":if(obj.parent!==obj){Common.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}Composite.addBody(composite,obj);break;case "constraint":Composite.addConstraint(composite,obj);break;case "composite":Composite.addComposite(composite,
obj);break;case "mouseConstraint":Composite.addConstraint(composite,obj.constraint)}}Events.trigger(composite,"afterAdd",{object:object});return composite};Composite.remove=function(composite,object,deep){var objects=[].concat(object);Events.trigger(composite,"beforeRemove",{object:object});for(var i=0;i<objects.length;i++){var obj=objects[i];switch(obj.type){case "body":Composite.removeBody(composite,obj,deep);break;case "constraint":Composite.removeConstraint(composite,obj,deep);break;case "composite":Composite.removeComposite(composite,
obj,deep);break;case "mouseConstraint":Composite.removeConstraint(composite,obj.constraint)}}Events.trigger(composite,"afterRemove",{object:object});return composite};Composite.addComposite=function(compositeA,compositeB){compositeA.composites.push(compositeB);compositeB.parent=compositeA;Composite.setModified(compositeA,!0,!0,!1);return compositeA};Composite.removeComposite=function(compositeA,compositeB,deep){var position=compositeA.composites.indexOf(compositeB);-1!==position&&(Composite.removeCompositeAt(compositeA,
position),Composite.setModified(compositeA,!0,!0,!1));if(deep)for(deep=0;deep<compositeA.composites.length;deep++)Composite.removeComposite(compositeA.composites[deep],compositeB,!0);return compositeA};Composite.removeCompositeAt=function(composite,position){composite.composites.splice(position,1);Composite.setModified(composite,!0,!0,!1);return composite};Composite.addBody=function(composite,body){composite.bodies.push(body);Composite.setModified(composite,!0,!0,!1);return composite};Composite.removeBody=
function(composite,body,deep){var position=composite.bodies.indexOf(body);-1!==position&&(Composite.removeBodyAt(composite,position),Composite.setModified(composite,!0,!0,!1));if(deep)for(deep=0;deep<composite.composites.length;deep++)Composite.removeBody(composite.composites[deep],body,!0);return composite};Composite.removeBodyAt=function(composite,position){composite.bodies.splice(position,1);Composite.setModified(composite,!0,!0,!1);return composite};Composite.addConstraint=function(composite,
constraint){composite.constraints.push(constraint);Composite.setModified(composite,!0,!0,!1);return composite};Composite.removeConstraint=function(composite,constraint,deep){var position=composite.constraints.indexOf(constraint);-1!==position&&Composite.removeConstraintAt(composite,position);if(deep)for(deep=0;deep<composite.composites.length;deep++)Composite.removeConstraint(composite.composites[deep],constraint,!0);return composite};Composite.removeConstraintAt=function(composite,position){composite.constraints.splice(position,
1);Composite.setModified(composite,!0,!0,!1);return composite};Composite.clear=function(composite,keepStatic,deep){if(deep)for(deep=0;deep<composite.composites.length;deep++)Composite.clear(composite.composites[deep],keepStatic,!0);keepStatic?composite.bodies=composite.bodies.filter(function(body){return body.isStatic}):composite.bodies.length=0;composite.constraints.length=0;composite.composites.length=0;Composite.setModified(composite,!0,!0,!1);return composite};Composite.allBodies=function(composite){for(var bodies=
[].concat(composite.bodies),i=0;i<composite.composites.length;i++)bodies=bodies.concat(Composite.allBodies(composite.composites[i]));return bodies};Composite.allConstraints=function(composite){for(var constraints=[].concat(composite.constraints),i=0;i<composite.composites.length;i++)constraints=constraints.concat(Composite.allConstraints(composite.composites[i]));return constraints};Composite.allComposites=function(composite){for(var composites=[].concat(composite.composites),i=0;i<composite.composites.length;i++)composites=
composites.concat(Composite.allComposites(composite.composites[i]));return composites};Composite.get=function(composite,id,type){switch(type){case "body":var objects=Composite.allBodies(composite);break;case "constraint":objects=Composite.allConstraints(composite);break;case "composite":objects=Composite.allComposites(composite).concat(composite)}if(!objects)return null;composite=objects.filter(function(object){return object.id.toString()===id.toString()});return 0===composite.length?null:composite[0]};
Composite.move=function(compositeA,objects,compositeB){Composite.remove(compositeA,objects);Composite.add(compositeB,objects);return compositeA};Composite.rebase=function(composite){for(var objects=Composite.allBodies(composite).concat(Composite.allConstraints(composite)).concat(Composite.allComposites(composite)),i=0;i<objects.length;i++)objects[i].id=Common.nextId();Composite.setModified(composite,!0,!0,!1);return composite};Composite.translate=function(composite,translation,recursive){recursive=
recursive?Composite.allBodies(composite):composite.bodies;for(var i=0;i<recursive.length;i++)Body.translate(recursive[i],translation);Composite.setModified(composite,!0,!0,!1);return composite};Composite.rotate=function(composite,rotation,point,recursive){var cos=Math.cos(rotation),sin=Math.sin(rotation);recursive=recursive?Composite.allBodies(composite):composite.bodies;for(var i=0;i<recursive.length;i++){var body=recursive[i],dx=body.position.x-point.x,dy=body.position.y-point.y;Body.setPosition(body,
{x:point.x+(dx*cos-dy*sin),y:point.y+(dx*sin+dy*cos)});Body.rotate(body,rotation)}Composite.setModified(composite,!0,!0,!1);return composite};Composite.scale=function(composite,scaleX,scaleY,point,recursive){recursive=recursive?Composite.allBodies(composite):composite.bodies;for(var i=0;i<recursive.length;i++){var body=recursive[i];Body.setPosition(body,{x:point.x+(body.position.x-point.x)*scaleX,y:point.y+(body.position.y-point.y)*scaleY});Body.scale(body,scaleX,scaleY)}Composite.setModified(composite,
!0,!0,!1);return composite};Composite.bounds=function(composite){composite=Composite.allBodies(composite);for(var vertices=[],i=0;i<composite.length;i+=1){var body=composite[i];vertices.push(body.bounds.min,body.bounds.max)}return Bounds.create(vertices)}})()}
//# sourceMappingURL=module$node_modules$Phaser$src$physics$matter_js$lib$body$Composite.js.map
