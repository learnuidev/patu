shadow$provide.module$node_modules$Phaser$src$sound$BaseSound=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var EventEmitter=require("module$node_modules$eventemitter3$index"),Extend=require("module$node_modules$Phaser$src$utils$object$Extend");require=require("module$node_modules$Phaser$src$utils$NOOP");require=new global({Extends:EventEmitter,initialize:function(manager,key,config){EventEmitter.call(this);this.manager=manager;this.key=key;this.isPaused=
this.isPlaying=!1;this.totalRate=1;this.duration=this.duration||0;this.totalDuration=this.totalDuration||0;this.currentConfig=this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0};this.config=Extend(this.config,config);this.markers={};this.currentMarker=null;this.pendingRemove=!1},addMarker:function(marker){if(!marker||!marker.name||"string"!==typeof marker.name)return!1;if(this.markers[marker.name])return console.error("addMarker "+marker.name+" already exists in Sound"),!1;marker=
Extend(!0,{name:"",start:0,duration:this.totalDuration-(marker.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},marker);this.markers[marker.name]=marker;return!0},updateMarker:function(marker){if(!marker||!marker.name||"string"!==typeof marker.name)return!1;if(!this.markers[marker.name])return console.warn("Audio Marker: "+marker.name+" missing in Sound: "+this.key),!1;this.markers[marker.name]=Extend(!0,this.markers[marker.name],marker);return!0},removeMarker:function(markerName){var marker=
this.markers[markerName];if(!marker)return null;this.markers[markerName]=null;return marker},play:function(markerName,config){void 0===markerName&&(markerName="");"object"===typeof markerName&&(config=markerName,markerName="");if("string"!==typeof markerName)return!1;if(markerName){if(!this.markers[markerName])return console.warn("Marker: "+markerName+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[markerName];this.currentConfig=this.currentMarker.config;this.duration=this.currentMarker.duration}else this.currentMarker=
null,this.currentConfig=this.config,this.duration=this.totalDuration;this.resetConfig();this.currentConfig=Extend(this.currentConfig,config);this.isPlaying=!0;this.isPaused=!1;return!0},pause:function(){if(this.isPaused||!this.isPlaying)return!1;this.isPlaying=!1;return this.isPaused=!0},resume:function(){if(!this.isPaused||this.isPlaying)return!1;this.isPlaying=!0;this.isPaused=!1;return!0},stop:function(){if(!this.isPaused&&!this.isPlaying)return!1;this.isPaused=this.isPlaying=!1;this.resetConfig();
return!0},applyConfig:function(){this.mute=this.currentConfig.mute;this.volume=this.currentConfig.volume;this.rate=this.currentConfig.rate;this.detune=this.currentConfig.detune;this.loop=this.currentConfig.loop},resetConfig:function(){this.currentConfig.seek=0;this.currentConfig.delay=0},update:require,calculateRate:function(){this.totalRate=this.currentConfig.rate*this.manager.rate*Math.pow(1.0005777895065548,this.currentConfig.detune+this.manager.detune)},destroy:function(){this.pendingRemove||
(this.emit("destroy",this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPaused=this.isPlaying=!1,this.currentMarker=this.markers=this.currentConfig=this.config=null)}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$sound$BaseSound.js.map
