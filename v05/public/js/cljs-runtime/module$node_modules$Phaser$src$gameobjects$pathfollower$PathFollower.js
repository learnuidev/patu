shadow$provide.module$node_modules$Phaser$src$gameobjects$pathfollower$PathFollower=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var DegToRad=require("module$node_modules$Phaser$src$math$DegToRad"),GetBoolean=require("module$node_modules$Phaser$src$tweens$builders$GetBoolean"),GetValue=require("module$node_modules$Phaser$src$utils$object$GetValue"),Sprite=require("module$node_modules$Phaser$src$gameobjects$sprite$Sprite"),TWEEN_CONST=require("module$node_modules$Phaser$src$tweens$tween$const"),
Vector2=require("module$node_modules$Phaser$src$math$Vector2");require=new global({Extends:Sprite,initialize:function(scene,path,x,y,texture,frame){Sprite.call(this,scene,x,y,texture,frame);this.path=path;this.pathRotationVerticalAdjust=this.rotateToPath=!1;this.pathRotationOffset=0;this.pathOffset=new Vector2(x,y);this.pathVector=new Vector2;this.pathConfig=null;this._prevDirection=TWEEN_CONST.PLAYING_FORWARD},setPath:function(path,config){void 0===config&&(config=this.pathConfig);var tween=this.pathTween;
tween&&tween.isPlaying()&&tween.stop();this.path=path;config&&this.startFollow(config);return this},setRotateToPath:function(value,offset,verticalAdjust){void 0===offset&&(offset=0);void 0===verticalAdjust&&(verticalAdjust=!1);this.rotateToPath=value;this.pathRotationOffset=offset;this.pathRotationVerticalAdjust=verticalAdjust;return this},isFollowing:function(){var tween=this.pathTween;return tween&&tween.isPlaying()},startFollow:function(config,startAt){void 0===config&&(config={});(startAt=this.pathTween)&&
startAt.isPlaying()&&startAt.stop();"number"===typeof config&&(config={duration:config});config.from=0;config.to=1;startAt=GetBoolean(config,"positionOnPath",!1);this.rotateToPath=GetBoolean(config,"rotateToPath",!1);this.pathRotationOffset=GetValue(config,"rotationOffset",0);this.pathRotationVerticalAdjust=GetBoolean(config,"verticalAdjust",!1);this.pathTween=this.scene.sys.tweens.addCounter(config);this.path.getStartPoint(this.pathOffset);startAt&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y);
this.pathOffset.x=this.x-this.pathOffset.x;this.pathOffset.y=this.y-this.pathOffset.y;this._prevDirection=TWEEN_CONST.PLAYING_FORWARD;this.rotateToPath&&(startAt=this.path.getPoint(.1),this.rotation=Math.atan2(startAt.y-this.y,startAt.x-this.x)+DegToRad(this.pathRotationOffset));this.pathConfig=config;return this},pauseFollow:function(){var tween=this.pathTween;tween&&tween.isPlaying()&&tween.pause();return this},resumeFollow:function(){var tween=this.pathTween;tween&&tween.isPaused()&&tween.resume();
return this},stopFollow:function(){var tween=this.pathTween;tween&&tween.isPlaying()&&tween.stop();return this},preUpdate:function(time,delta){this.anims.update(time,delta);var tween=this.pathTween;if(tween&&(time=tween.data[0],time.state===TWEEN_CONST.PLAYING_FORWARD||time.state===TWEEN_CONST.PLAYING_BACKWARD)){delta=this.pathVector;this.path.getPoint(tween.getValue(),delta);delta.add(this.pathOffset);var oldX=this.x;tween=this.y;this.setPosition(delta.x,delta.y);delta=this.x-oldX;tween=this.y-tween;
if(0!==delta||0!==tween)time.state!==this._prevDirection?this._prevDirection=time.state:this.rotateToPath&&(this.rotation=Math.atan2(tween,delta)+DegToRad(this.pathRotationOffset),this.pathRotationVerticalAdjust&&(this.flipY=0!==this.rotation&&time.state===TWEEN_CONST.PLAYING_BACKWARD))}}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$gameobjects$pathfollower$PathFollower.js.map
