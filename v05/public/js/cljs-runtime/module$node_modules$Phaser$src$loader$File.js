shadow$provide.module$node_modules$Phaser$src$loader$File=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var CONST=require("module$node_modules$Phaser$src$loader$const"),GetFastValue=require("module$node_modules$Phaser$src$utils$object$GetFastValue"),GetURL=require("module$node_modules$Phaser$src$loader$GetURL"),MergeXHRSettings=require("module$node_modules$Phaser$src$loader$MergeXHRSettings"),XHRLoader=require("module$node_modules$Phaser$src$loader$XHRLoader"),
XHRSettings=require("module$node_modules$Phaser$src$loader$XHRSettings");require=new global({initialize:function(loader,fileConfig){this.loader=loader;this.cache=GetFastValue(fileConfig,"cache",!1);this.type=GetFastValue(fileConfig,"type",!1);var loadKey=this.key=GetFastValue(fileConfig,"key",!1);loader.prefix&&""!==loader.prefix&&(this.key=loader.prefix+loadKey);if(!this.type||!this.key)throw Error("Error calling 'Loader."+this.type+"' invalid key provided.");this.url=GetFastValue(fileConfig,"url");
void 0===this.url?this.url=loader.path+loadKey+"."+GetFastValue(fileConfig,"extension",""):"function"!==typeof this.url&&(this.url=loader.path+this.url);this.src="";this.xhrSettings=XHRSettings(GetFastValue(fileConfig,"responseType",void 0));GetFastValue(fileConfig,"xhrSettings",!1)&&(this.xhrSettings=MergeXHRSettings(this.xhrSettings,GetFastValue(fileConfig,"xhrSettings",{})));this.xhrLoader=null;this.state="function"===typeof this.url?CONST.FILE_POPULATED:CONST.FILE_PENDING;this.bytesTotal=0;this.percentComplete=
this.bytesLoaded=-1;this.data=this.crossOrigin=void 0;this.config=GetFastValue(fileConfig,"config",{})},setLink:function(fileB){this.linkFile=fileB;fileB.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===CONST.FILE_POPULATED?this.loader.nextFile(this,!0):(this.src=GetURL(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+
this.key):this.xhrLoader=XHRLoader(this,this.loader.xhr))},onLoad:function(xhr,event){event=!(event.target&&200!==event.target.status);4===xhr.readyState&&400<=xhr.status&&599>=xhr.status&&(event=!1);this.resetXHR();this.loader.nextFile(this,event)},onError:function(){this.resetXHR();this.loader.nextFile(this,!1)},onProgress:function(event){event.lengthComputable&&(this.bytesLoaded=event.loaded,this.bytesTotal=event.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit("fileprogress",
this,this.percentComplete))},onProcess:function(){this.state=CONST.FILE_PROCESSING;this.onProcessComplete()},onProcessComplete:function(){this.state=CONST.FILE_COMPLETE;if(this.multiFile)this.multiFile.onFileComplete(this);this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=CONST.FILE_ERRORED;if(this.multiFile)this.multiFile.onFileFailed(this);this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&
this.cache.add(this.key,this.data);this.pendingDestroy()},pendingDestroy:function(data){void 0===data&&(data=this.data);var key=this.key,type=this.type;this.loader.emit("filecomplete",key,type,data);this.loader.emit("filecomplete-"+type+"-"+key,key,type,data);this.loader.flagForRemoval(this)},destroy:function(){this.data=this.linkFile=this.multiFile=this.xhrSettings=this.cache=this.loader=null}});require.createObjectURL=function(image,blob,defaultType){if("function"===typeof URL)image.src=URL.createObjectURL(blob);
else{var reader=new FileReader;reader.onload=function(){image.removeAttribute("crossOrigin");image.src="data:"+(blob.type||defaultType)+";base64,"+reader.result.split(",")[1]};reader.onerror=image.onerror;reader.readAsDataURL(blob)}};require.revokeObjectURL=function(image){"function"===typeof URL&&URL.revokeObjectURL(image.src)};module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$loader$File.js.map
