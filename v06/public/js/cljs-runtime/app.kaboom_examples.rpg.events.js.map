{"version":3,"sources":["app/kaboom_examples/rpg/events.cljs"],"mappings":"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","names":["app.kaboom.patu.events/reg-event","p__27323","vec__27324","cljs.core.nth","_","id","app.kaboom.patu.cam/follow","app.kaboom.patu.core/get-component","p__27327","vec__27328","player","app.kaboom.patu.core/respawn","p__27331","vec__27332","p__27335","vec__27336","val","app.kaboom.patu.components/jump","app.kaboom.patu.utils.js_get","or__4126__auto__","p__27339","vec__27340","coin","pid","sid","score","app.kaboom.patu.core/destroy","app.kaboom.patu.audio/play","app.kaboom.patu.utils/js-set!","p__27344","vec__27345","and__4115__auto__","app.kaboom.patu.components/grounded?","app.kaboom.patu.components/cur-anim?","app.kaboom.patu.components/play","p__27348","vec__27349","cljs.core/not","app.kaboom.patu.core/key-is-down","p__27352","vec__27353","app.kaboom.patu.components/flip-x","app.kaboom.patu.components/move!","app.kaboom.patu.core/neg","app.kaboom.patu.components/speed","p__27356","vec__27357","p__27360","vec__27361","app.kaboom.patu.core/go"],"sourcesContent":["(ns app.kaboom-examples.rpg.events\n  (:require\n   [app.kaboom.patu.utils :refer [js-get js-set!]]\n   [app.kaboom.patu.core :as p]\n   [app.kaboom.patu.events :refer [reg-event]]\n   [app.kaboom.patu.cam :as cam]\n   [app.kaboom.patu.audio :as a]\n   [app.kaboom.patu.components :as c]))\n\n; === Events ====\n(reg-event\n :camera/follow\n (fn [_ [_ id]]\n   (cam/follow (p/get-component id))))\n\n(reg-event\n :player/respawn\n (fn [_ [_ id]]\n   (let [player (p/get-component id)]\n     (p/respawn player 0))))\n\n(reg-event\n :player/respawn?\n (fn [_ [_ id]]\n   (let [player (p/get-component id)]\n     (when (> (.. player -pos -y) 320)\n       (p/respawn player 0)))))\n\n(reg-event\n :player/super-jump\n (fn [_ [_ id val]]\n   (let [player (p/get-component id)]\n     (c/jump player (* (js-get player :jumpForce) (or val 2))))))\n\n(reg-event\n :player/collect-coin\n (fn [_ [_ coin pid sid]]\n   (let [player (p/get-component sid)\n         score (p/get-component sid)]\n     (p/destroy coin)\n     (a/play :sound/coin)\n     (js-set! score :value (inc (js-get score :value)))\n     (js-set! score :text (js-get score :value)))))\n\n(reg-event\n :player/move\n (fn [_ [_ pid]]\n   (let [player (p/get-component pid)]\n     (when (and (c/grounded? player) (not (c/cur-anim? player :move)))\n       (c/play player :move)))))\n\n(reg-event\n :player/idle\n (fn [_ [_ pid]]\n   (let [player (p/get-component pid)]\n     (when (and (not (p/key-is-down :right)) (not (p/key-is-down :right)))\n       (c/play player :idle)))))\n\n(reg-event\n :player/move-left\n (fn [_ [_ pid]]\n   (let [player (p/get-component pid)]\n     (c/flip-x player -1)\n     (c/move! player [(p/neg (c/speed player)) 0]))))\n(reg-event\n :player/move-right\n (fn [_ [_ pid]]\n   (let [player (p/get-component pid)]\n     (c/flip-x player 1)\n     (c/move! player [(c/speed player) 0]))))\n\n(reg-event\n :scene/go\n (fn [_ [_ sid]]\n   (p/go sid)))\n"]}