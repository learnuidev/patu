shadow$provide.module$node_modules$Phaser$src$renderer$webgl$WebGLPipeline=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var Utils=require("module$node_modules$Phaser$src$renderer$webgl$Utils");require=new global({initialize:function(config){this.name="WebGLPipeline";this.game=config.game;this.view=config.game.canvas;this.resolution=config.game.config.resolution;this.width=config.game.config.width*this.resolution;this.height=config.game.config.height*
this.resolution;this.gl=config.gl;this.vertexCount=0;this.vertexCapacity=config.vertexCapacity;this.renderer=config.renderer;this.vertexData=config.vertices?config.vertices:new ArrayBuffer(config.vertexCapacity*config.vertexSize);this.vertexBuffer=this.renderer.createVertexBuffer(config.vertices?config.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW);this.program=this.renderer.createProgram(config.vertShader,config.fragShader);this.attributes=config.attributes;this.vertexSize=config.vertexSize;
this.topology=config.topology;this.bytes=new Uint8Array(this.vertexData);this.vertexComponentCount=Utils.getComponentCount(config.attributes,this.gl);this.active=this.flushLocked=!1},boot:function(){},addAttribute:function(name,size,type,normalized,offset){this.attributes.push({name:name,size:size,type:this.renderer.glFormats[type],normalized:normalized,offset:offset});return this},shouldFlush:function(){return this.vertexCount>=this.vertexCapacity},resize:function(width,height,resolution){this.width=
width*resolution;this.height=height*resolution;return this},bind:function(){var gl=this.gl,vertexBuffer=this.vertexBuffer,attributes=this.attributes,program=this.program,renderer=this.renderer,vertexSize=this.vertexSize;renderer.setProgram(program);renderer.setVertexBuffer(vertexBuffer);for(vertexBuffer=0;vertexBuffer<attributes.length;++vertexBuffer){renderer=attributes[vertexBuffer];var location=gl.getAttribLocation(program,renderer.name);0<=location?(gl.enableVertexAttribArray(location),gl.vertexAttribPointer(location,
renderer.size,renderer.type,renderer.normalized,vertexSize,renderer.offset)):gl.disableVertexAttribArray(location)}return this},onBind:function(){return this},onPreRender:function(){return this},onRender:function(){return this},onPostRender:function(){return this},flush:function(){if(this.flushLocked)return this;this.flushLocked=!0;var gl=this.gl,vertexCount=this.vertexCount,topology=this.topology,vertexSize=this.vertexSize;if(0===vertexCount)this.flushLocked=!1;else return gl.bufferSubData(gl.ARRAY_BUFFER,
0,this.bytes.subarray(0,vertexCount*vertexSize)),gl.drawArrays(topology,0,vertexCount),this.vertexCount=0,this.flushLocked=!1,this},destroy:function(){var gl=this.gl;gl.deleteProgram(this.program);gl.deleteBuffer(this.vertexBuffer);delete this.program;delete this.vertexBuffer;delete this.gl;return this},setFloat1:function(name,x){this.renderer.setFloat1(this.program,name,x);return this},setFloat2:function(name,x,y){this.renderer.setFloat2(this.program,name,x,y);return this},setFloat3:function(name,
x,y,z){this.renderer.setFloat3(this.program,name,x,y,z);return this},setFloat4:function(name,x,y,z,w){this.renderer.setFloat4(this.program,name,x,y,z,w);return this},setFloat1v:function(name,arr){this.renderer.setFloat1v(this.program,name,arr);return this},setFloat2v:function(name,arr){this.renderer.setFloat2v(this.program,name,arr);return this},setFloat3v:function(name,arr){this.renderer.setFloat3v(this.program,name,arr);return this},setFloat4v:function(name,arr){this.renderer.setFloat4v(this.program,
name,arr);return this},setInt1:function(name,x){this.renderer.setInt1(this.program,name,x);return this},setInt2:function(name,x,y){this.renderer.setInt2(this.program,name,x,y);return this},setInt3:function(name,x,y,z){this.renderer.setInt3(this.program,name,x,y,z);return this},setInt4:function(name,x,y,z,w){this.renderer.setInt4(this.program,name,x,y,z,w);return this},setMatrix2:function(name,transpose,matrix){this.renderer.setMatrix2(this.program,name,transpose,matrix);return this},setMatrix3:function(name,
transpose,matrix){this.renderer.setMatrix3(this.program,name,transpose,matrix);return this},setMatrix4:function(name,transpose,matrix){this.renderer.setMatrix4(this.program,name,transpose,matrix);return this}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$renderer$webgl$WebGLPipeline.js.map
