shadow$provide.module$node_modules$Phaser$src$textures$CanvasTexture=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var Color=require("module$node_modules$Phaser$src$display$color$Color"),IsSizePowerOfTwo=require("module$node_modules$Phaser$src$math$pow2$IsSizePowerOfTwo"),Texture=require("module$node_modules$Phaser$src$textures$Texture");require=new global({Extends:Texture,initialize:function(manager,key,source,width,height){Texture.call(this,
manager,key,source,width,height);this.add("__BASE",0,0,0,width,height);this._source=this.frames.__BASE.source;this.canvas=this._source.image;this.context=this.canvas.getContext("2d");this.width=width;this.height=height;this.imageData=this.context.getImageData(0,0,width,height);this.data=null;this.imageData&&(this.data=this.imageData.data);this.pixels=null;this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=
new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){this.imageData=this.context.getImageData(0,0,this.width,this.height);this.data=this.imageData.data;this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data;return this},
draw:function(x,y,source){this.context.drawImage(source,x,y);return this.update()},getPixel:function(x,y,out){out||(out=new Color);var index=~~(x+y*this.width);index*=4;x=this.data[index];y=this.data[++index];var b=this.data[++index];index=this.data[++index];return out.setTo(x,y,b,index)},refresh:function(){this._source.update();return this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(){this.context.clearRect(0,0,this.width,this.height);return this.update()},
setSize:function(width,height){void 0===height&&(height=width);if(width!==this.width||height!==this.height)this.canvas.width=width,this.canvas.height=height,this._source.width=width,this._source.height=height,this._source.isPowerOf2=IsSizePowerOfTwo(width,height),this.frames.__BASE.setSize(width,height,0,0),this.refresh();return this}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$textures$CanvasTexture.js.map
