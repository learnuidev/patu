shadow$provide.module$node_modules$Phaser$src$scene$ScenePlugin=function(global,require,module,exports){var Clamp=require("module$node_modules$Phaser$src$math$Clamp");global=require("module$node_modules$Phaser$src$utils$Class");var GetFastValue=require("module$node_modules$Phaser$src$utils$object$GetFastValue");require=require("module$node_modules$Phaser$src$plugins$PluginCache");global=new global({initialize:function(scene){this.scene=scene;this.systems=scene.sys;this.settings=scene.sys.settings;
this.key=scene.sys.settings.key;this.manager=scene.sys.game.scene;this._elapsed=this.transitionProgress=0;this._target=null;this._duration=0;this._willRemove=this._willSleep=!1;scene.sys.events.once("boot",this.boot,this);scene.sys.events.on("start",this.pluginStart,this)},boot:function(){this.systems.events.once("destroy",this.destroy,this)},pluginStart:function(){this._target=null;this.systems.events.once("shutdown",this.shutdown,this)},start:function(key,data){void 0===key&&(key=this.key);this.manager.queueOp("stop",
this.key);this.manager.queueOp("start",key,data);return this},restart:function(data){var key=this.key;this.manager.queueOp("stop",key);this.manager.queueOp("start",key,data);return this},transition:function(config){void 0===config&&(config={});var key=GetFastValue(config,"target",!1),target=this.manager.getScene(key);if(!key||!this.checkValidTransition(target))return!1;var duration=GetFastValue(config,"duration",1E3);this._elapsed=0;this._target=target;this._duration=duration;this._willSleep=GetFastValue(config,
"sleep",!1);this._willRemove=GetFastValue(config,"remove",!1);var callback=GetFastValue(config,"onUpdate",null);callback&&(this._onUpdate=callback,this._onUpdateScope=GetFastValue(config,"onUpdateScope",this.scene));callback=GetFastValue(config,"allowInput",!1);this.settings.transitionAllowInput=callback;var targetSettings=target.sys.settings;targetSettings.isTransition=!0;targetSettings.transitionFrom=this.scene;targetSettings.transitionDuration=duration;targetSettings.transitionAllowInput=callback;
GetFastValue(config,"moveAbove",!1)?this.manager.moveAbove(this.key,key):GetFastValue(config,"moveBelow",!1)&&this.manager.moveBelow(this.key,key);target.sys.isSleeping()?target.sys.wake():this.manager.start(key,GetFastValue(config,"data"));this.systems.events.emit("transitionout",target,duration);this.systems.events.on("update",this.step,this);return!0},checkValidTransition:function(target){return!target||target.sys.isActive()||target.sys.isTransitioning()||target===this.scene||this.systems.isTransitioning()?
!1:!0},step:function(time,delta){this._elapsed+=delta;this.transitionProgress=Clamp(this._elapsed/this._duration,0,1);this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress);this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var targetSys=this._target.sys,targetSettings=this._target.sys.settings;this.systems.events.off("update",this.step,this);targetSys.events.emit("transitioncomplete",this.scene);targetSettings.isTransition=!1;targetSettings.transitionFrom=
null;this._duration=0;this._onUpdateScope=this._onUpdate=this._target=null;this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(key,sceneConfig,autoStart){this.manager.add(key,sceneConfig,autoStart);return this},launch:function(key,data){key&&key!==this.key&&this.manager.queueOp("start",key,data);return this},run:function(key,data){key&&key!==this.key&&this.manager.queueOp("run",key,data);return this},pause:function(key,data){void 0===
key&&(key=this.key);this.manager.queueOp("pause",key,data);return this},resume:function(key,data){void 0===key&&(key=this.key);this.manager.queueOp("resume",key,data);return this},sleep:function(key,data){void 0===key&&(key=this.key);this.manager.queueOp("sleep",key,data);return this},wake:function(key,data){void 0===key&&(key=this.key);this.manager.queueOp("wake",key,data);return this},switch:function(key){key!==this.key&&this.manager.queueOp("switch",this.key,key);return this},stop:function(key){void 0===
key&&(key=this.key);this.manager.queueOp("stop",key);return this},setActive:function(value,key,data){void 0===key&&(key=this.key);(key=this.manager.getScene(key))&&key.sys.setActive(value,data);return this},setVisible:function(value,key){void 0===key&&(key=this.key);(key=this.manager.getScene(key))&&key.sys.setVisible(value);return this},isSleeping:function(key){void 0===key&&(key=this.key);return this.manager.isSleeping(key)},isActive:function(key){void 0===key&&(key=this.key);return this.manager.isActive(key)},
isVisible:function(key){void 0===key&&(key=this.key);return this.manager.isVisible(key)},swapPosition:function(keyA,keyB){void 0===keyB&&(keyB=this.key);keyA!==keyB&&this.manager.swapPosition(keyA,keyB);return this},moveAbove:function(keyA,keyB){void 0===keyB&&(keyB=this.key);keyA!==keyB&&this.manager.moveAbove(keyA,keyB);return this},moveBelow:function(keyA,keyB){void 0===keyB&&(keyB=this.key);keyA!==keyB&&this.manager.moveBelow(keyA,keyB);return this},remove:function(key){void 0===key&&(key=this.key);
this.manager.remove(key);return this},moveUp:function(key){void 0===key&&(key=this.key);this.manager.moveUp(key);return this},moveDown:function(key){void 0===key&&(key=this.key);this.manager.moveDown(key);return this},bringToTop:function(key){void 0===key&&(key=this.key);this.manager.bringToTop(key);return this},sendToBack:function(key){void 0===key&&(key=this.key);this.manager.sendToBack(key);return this},get:function(key){return this.manager.getScene(key)},getIndex:function(key){void 0===key&&(key=
this.key);return this.manager.getIndex(key)},shutdown:function(){var eventEmitter=this.systems.events;eventEmitter.off("shutdown",this.shutdown,this);eventEmitter.off("postupdate",this.step,this);eventEmitter.off("transitionout")},destroy:function(){this.shutdown();this.scene.sys.events.off("start",this.start,this);this.manager=this.settings=this.systems=this.scene=null}});require.register("ScenePlugin",global,"scenePlugin");module.exports=global}
//# sourceMappingURL=module$node_modules$Phaser$src$scene$ScenePlugin.js.map
