shadow$provide.module$node_modules$Phaser$src$input$InputPlugin=function(global,require,module,exports){var Circle=require("module$node_modules$Phaser$src$geom$circle$Circle"),CircleContains=require("module$node_modules$Phaser$src$geom$circle$Contains");exports=require("module$node_modules$Phaser$src$utils$Class");var CreateInteractiveObject=require("module$node_modules$Phaser$src$input$CreateInteractiveObject"),CreatePixelPerfectHandler=require("module$node_modules$Phaser$src$input$CreatePixelPerfectHandler"),
DistanceBetween=require("module$node_modules$Phaser$src$math$distance$DistanceBetween"),Ellipse=require("module$node_modules$Phaser$src$geom$ellipse$Ellipse"),EllipseContains=require("module$node_modules$Phaser$src$geom$ellipse$Contains"),EventEmitter=require("module$node_modules$eventemitter3$index"),GetFastValue=require("module$node_modules$Phaser$src$utils$object$GetFastValue"),InputPluginCache=require("module$node_modules$Phaser$src$input$InputPluginCache"),IsPlainObject=require("module$node_modules$Phaser$src$utils$object$IsPlainObject");
global=require("module$node_modules$Phaser$src$plugins$PluginCache");var Rectangle=require("module$node_modules$Phaser$src$geom$rectangle$Rectangle"),RectangleContains=require("module$node_modules$Phaser$src$geom$rectangle$Contains"),Triangle=require("module$node_modules$Phaser$src$geom$triangle$Triangle"),TriangleContains=require("module$node_modules$Phaser$src$geom$triangle$Contains");require=new exports({Extends:EventEmitter,initialize:function(scene){EventEmitter.call(this);this.scene=scene;this.systems=
scene.sys;this.settings=scene.sys.settings;this.manager=scene.sys.game.input;this.pluginEvents=new EventEmitter;this.enabled=!0;InputPluginCache.install(this);this.mouse=this.manager.mouse;this.topOnly=!0;this.pollRate=-1;this._pollTimer=0;var _eventData={cancelled:!1};this._eventContainer={stopPropagation:function(){_eventData.cancelled=!0}};this._eventData=_eventData;this.dragTimeThreshold=this.dragDistanceThreshold=0;this._temp=[];this._tempZones=[];this._list=[];this._pendingInsertion=[];this._pendingRemoval=
[];this._draggable=[];this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._validTypes="onDown onUp onOver onOut onMove onDragStart onDrag onDragEnd onDragEnter onDragLeave onDragOver onDrop".split(" ");scene.sys.events.once("boot",this.boot,this);scene.sys.events.on("start",this.start,this)},boot:function(){this.cameras=this.systems.cameras;this.displayList=this.systems.displayList;this.systems.events.once("destroy",
this.destroy,this);this.pluginEvents.emit("boot")},start:function(){var eventEmitter=this.systems.events;eventEmitter.on("transitionstart",this.transitionIn,this);eventEmitter.on("transitionout",this.transitionOut,this);eventEmitter.on("transitioncomplete",this.transitionComplete,this);eventEmitter.on("preupdate",this.preUpdate,this);eventEmitter.on("update",this.update,this);eventEmitter.once("shutdown",this.shutdown,this);this.enabled=!0;this.pluginEvents.emit("start")},preUpdate:function(){this.pluginEvents.emit("preUpdate");
var removeList=this._pendingRemoval,insertList=this._pendingInsertion,toRemove=removeList.length,toInsert=insertList.length;if(0!==toRemove||0!==toInsert){toInsert=this._list;for(var i=0;i<toRemove;i++){var gameObject=removeList[i],index=toInsert.indexOf(gameObject);-1<index&&(toInsert.splice(index,1),this.clear(gameObject))}removeList.length=0;this._pendingRemoval.length=0;this._list=toInsert.concat(insertList.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},update:function(time,
delta){if(this.isActive()){this.pluginEvents.emit("update",time,delta);var manager=this.manager;if(!manager.globalTopOnly||!manager.ignoreEvents){var runUpdate=manager.dirty||0===this.pollRate;-1<this.pollRate&&(this._pollTimer-=delta,0>this._pollTimer&&(runUpdate=!0,this._pollTimer=this.pollRate));if(runUpdate)for(delta=this.manager.pointers,runUpdate=0;runUpdate<this.manager.pointersTotal;runUpdate++){var pointer=delta[runUpdate];this._tempZones=[];this._temp=this.hitTestPointer(pointer);this.sortGameObjects(this._temp);
this.sortGameObjects(this._tempZones);this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1));var total=this.processDragEvents(pointer,time);pointer.wasTouch||(total+=this.processOverOutEvents(pointer));pointer.justDown&&(total+=this.processDownEvents(pointer));pointer.justUp&&(total+=this.processUpEvents(pointer));pointer.justMoved&&(total+=this.processMoveEvents(pointer));0<total&&manager.globalTopOnly&&(manager.ignoreEvents=!0)}}}},clear:function(gameObject){var input=
gameObject.input;if(input)return this.queueForRemoval(gameObject),input.gameObject=void 0,input.target=void 0,input.hitArea=void 0,input.hitAreaCallback=void 0,input.callbackContext=void 0,this.manager.resetCursor(input),gameObject.input=null,input=this._draggable.indexOf(gameObject),-1<input&&this._draggable.splice(input,1),input=this._drag[0].indexOf(gameObject),-1<input&&this._drag[0].splice(input,1),input=this._over[0].indexOf(gameObject),-1<input&&this._over[0].splice(input,1),gameObject},disable:function(gameObject){gameObject.input.enabled=
!1},enable:function(gameObject,shape,callback,dropZone){void 0===dropZone&&(dropZone=!1);gameObject.input?gameObject.input.enabled=!0:this.setHitArea(gameObject,shape,callback);gameObject.input&&dropZone&&!gameObject.input.dropZone&&(gameObject.input.dropZone=dropZone);return this},hitTestPointer:function(pointer){for(var cameras=this.cameras.getCamerasBelowPointer(pointer),c=0;c<cameras.length;c++){for(var camera=cameras[c],over=this.manager.hitTest(pointer,this._list,camera),i=0;i<over.length;i++){var obj=
over[i];obj.input.dropZone&&this._tempZones.push(obj)}if(0<over.length)return pointer.camera=camera,over}pointer.camera=cameras[0];return[]},processDownEvents:function(pointer){for(var total=0,currentlyOver=this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer,aborted=_eventData.cancelled=!1,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){total++;gameObject.emit("pointerdown",pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer);
if(_eventData.cancelled){aborted=!0;break}this.emit("gameobjectdown",pointer,gameObject,_eventContainer);if(_eventData.cancelled){aborted=!0;break}}}aborted||this.emit("pointerdown",pointer,currentlyOver);return total},processDragEvents:function(pointer,time){if(0===this._draggable.length)return 0;var i,currentlyOver=this._temp;0===pointer.dragState&&pointer.primaryDown&&pointer.justDown&&0<currentlyOver.length?pointer.dragState=1:0<pointer.dragState&&!pointer.primaryDown&&pointer.justUp&&(pointer.dragState=
5);if(1===pointer.dragState){var input=[];for(i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];gameObject.input.draggable&&0===gameObject.input.dragState&&input.push(gameObject)}if(0===input.length)return pointer.dragState=0;1<input.length&&(this.sortGameObjects(input),this.topOnly&&input.splice(1));this._drag[pointer.id]=input;pointer.dragState=0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?3:2}2===pointer.dragState&&(0<this.dragDistanceThreshold&&DistanceBetween(pointer.x,
pointer.y,pointer.downX,pointer.downY)>=this.dragDistanceThreshold&&(pointer.dragState=3),0<this.dragTimeThreshold&&time>=pointer.downTime+this.dragTimeThreshold&&(pointer.dragState=3));if(3===pointer.dragState){time=this._drag[pointer.id];for(i=0;i<time.length;i++)gameObject=time[i],input=gameObject.input,input.dragState=2,input.dragX=pointer.x-gameObject.x,input.dragY=pointer.y-gameObject.y,input.dragStartX=gameObject.x,input.dragStartY=gameObject.y,gameObject.emit("dragstart",pointer,input.dragX,
input.dragY),this.emit("dragstart",pointer,gameObject);pointer.dragState=4;return time.length}if(4===pointer.dragState&&pointer.justMoved&&!pointer.justUp){currentlyOver=this._tempZones;time=this._drag[pointer.id];for(i=0;i<time.length;i++){gameObject=time[i];input=gameObject.input;if(input.target){var index=currentlyOver.indexOf(input.target);0===index?(gameObject.emit("dragover",pointer,input.target),this.emit("dragover",pointer,gameObject,input.target)):0<index?(gameObject.emit("dragleave",pointer,
input.target),this.emit("dragleave",pointer,gameObject,input.target),input.target=currentlyOver[0],gameObject.emit("dragenter",pointer,input.target),this.emit("dragenter",pointer,gameObject,input.target)):(gameObject.emit("dragleave",pointer,input.target),this.emit("dragleave",pointer,gameObject,input.target),currentlyOver[0]?(input.target=currentlyOver[0],gameObject.emit("dragenter",pointer,input.target),this.emit("dragenter",pointer,gameObject,input.target)):input.target=null)}else!input.target&&
currentlyOver[0]&&(input.target=currentlyOver[0],gameObject.emit("dragenter",pointer,input.target),this.emit("dragenter",pointer,gameObject,input.target));input=pointer.x-gameObject.input.dragX;index=pointer.y-gameObject.input.dragY;gameObject.emit("drag",pointer,input,index);this.emit("drag",pointer,gameObject,input,index)}return time.length}if(5===pointer.dragState){time=this._drag[pointer.id];for(i=0;i<time.length;i++)gameObject=time[i],input=gameObject.input,2===input.dragState&&(input.dragState=
0,input.dragX=input.localX-gameObject.displayOriginX,input.dragY=input.localY-gameObject.displayOriginY,currentlyOver=!1,input.target&&(gameObject.emit("drop",pointer,input.target),this.emit("drop",pointer,gameObject,input.target),input.target=null,currentlyOver=!0),gameObject.emit("dragend",pointer,input.dragX,input.dragY,currentlyOver),this.emit("dragend",pointer,gameObject,currentlyOver));pointer.dragState=0;time.splice(0)}return 0},processMoveEvents:function(pointer){for(var total=0,currentlyOver=
this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer,aborted=_eventData.cancelled=!1,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){total++;gameObject.emit("pointermove",pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer);if(_eventData.cancelled){aborted=!0;break}this.emit("gameobjectmove",pointer,gameObject,_eventContainer);if(_eventData.cancelled){aborted=!0;break}if(this.topOnly)break}}aborted||this.emit("pointermove",
pointer,currentlyOver);return total},processOverOutEvents:function(pointer){var currentlyOver=this._temp,i,justOut=[],justOver=[],stillOver=[],previouslyOver=this._over[pointer.id],currentlyDragging=this._drag[pointer.id],manager=this.manager;for(i=0;i<previouslyOver.length;i++){var gameObject=previouslyOver[i];-1===currentlyOver.indexOf(gameObject)&&-1===currentlyDragging.indexOf(gameObject)?justOut.push(gameObject):stillOver.push(gameObject)}for(i=0;i<currentlyOver.length;i++)gameObject=currentlyOver[i],
-1===previouslyOver.indexOf(gameObject)&&justOver.push(gameObject);previouslyOver=justOut.length;currentlyOver=0;currentlyDragging=this._eventData;var _eventContainer=this._eventContainer,aborted=currentlyDragging.cancelled=!1;if(0<previouslyOver){this.sortGameObjects(justOut);for(i=0;i<previouslyOver;i++)if(gameObject=justOut[i],gameObject.input){gameObject.emit("pointerout",pointer,_eventContainer);manager.resetCursor(gameObject.input);currentlyOver++;if(currentlyDragging.cancelled){aborted=!0;
break}this.emit("gameobjectout",pointer,gameObject,_eventContainer);if(currentlyDragging.cancelled){aborted=!0;break}}aborted||this.emit("pointerout",pointer,justOut)}previouslyOver=justOver.length;aborted=currentlyDragging.cancelled=!1;if(0<previouslyOver){this.sortGameObjects(justOver);for(i=0;i<previouslyOver;i++)if(gameObject=justOver[i],gameObject.input){gameObject.emit("pointerover",pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer);manager.setCursor(gameObject.input);
currentlyOver++;if(currentlyDragging.cancelled){aborted=!0;break}this.emit("gameobjectover",pointer,gameObject,_eventContainer);if(currentlyDragging.cancelled){aborted=!0;break}}aborted||this.emit("pointerover",pointer,justOver)}previouslyOver=stillOver.concat(justOver);this._over[pointer.id]=this.sortGameObjects(previouslyOver);return currentlyOver},processUpEvents:function(pointer){for(var currentlyOver=this._temp,_eventData=this._eventData,_eventContainer=this._eventContainer,aborted=_eventData.cancelled=
!1,i=0;i<currentlyOver.length;i++){var gameObject=currentlyOver[i];if(gameObject.input){gameObject.emit("pointerup",pointer,gameObject.input.localX,gameObject.input.localY,_eventContainer);if(_eventData.cancelled){aborted=!0;break}this.emit("gameobjectup",pointer,gameObject,_eventContainer);if(_eventData.cancelled){aborted=!0;break}}}aborted||this.emit("pointerup",pointer,currentlyOver);return currentlyOver.length},queueForInsertion:function(child){-1===this._pendingInsertion.indexOf(child)&&-1===
this._list.indexOf(child)&&this._pendingInsertion.push(child);return this},queueForRemoval:function(child){this._pendingRemoval.push(child);return this},setDraggable:function(gameObjects,value){void 0===value&&(value=!0);Array.isArray(gameObjects)||(gameObjects=[gameObjects]);for(var i=0;i<gameObjects.length;i++){var gameObject=gameObjects[i];gameObject.input.draggable=value;var index=this._draggable.indexOf(gameObject);value&&-1===index?this._draggable.push(gameObject):!value&&-1<index&&this._draggable.splice(index,
1)}return this},makePixelPerfect:function(alphaTolerance){void 0===alphaTolerance&&(alphaTolerance=1);return CreatePixelPerfectHandler(this.systems.textures,alphaTolerance)},setHitArea:function(gameObjects,shape,callback){if(void 0===shape)return this.setHitAreaFromTexture(gameObjects);Array.isArray(gameObjects)||(gameObjects=[gameObjects]);var draggable=!1,dropZone=!1,cursor=!1,useHandCursor=!1;if(IsPlainObject(shape)){var config=shape;shape=GetFastValue(config,"hitArea",null);callback=GetFastValue(config,
"hitAreaCallback",null);draggable=GetFastValue(config,"draggable",!1);dropZone=GetFastValue(config,"dropZone",!1);cursor=GetFastValue(config,"cursor",!1);useHandCursor=GetFastValue(config,"useHandCursor",!1);var pixelPerfect=GetFastValue(config,"pixelPerfect",!1);config=GetFastValue(config,"alphaTolerance",1);pixelPerfect&&(shape={},callback=this.makePixelPerfect(config));shape&&callback||this.setHitAreaFromTexture(gameObjects)}else"function"!==typeof shape||callback||(callback=shape,shape={});for(pixelPerfect=
0;pixelPerfect<gameObjects.length;pixelPerfect++){config=gameObjects[pixelPerfect];var io=config.input?config.input:CreateInteractiveObject(config,shape,callback);io.dropZone=dropZone;io.cursor=useHandCursor?"pointer":cursor;config.input=io;draggable&&this.setDraggable(config);this.queueForInsertion(config)}return this},setHitAreaCircle:function(gameObjects,x,y,radius,callback){void 0===callback&&(callback=CircleContains);x=new Circle(x,y,radius);return this.setHitArea(gameObjects,x,callback)},setHitAreaEllipse:function(gameObjects,
x,y,width,height,callback){void 0===callback&&(callback=EllipseContains);x=new Ellipse(x,y,width,height);return this.setHitArea(gameObjects,x,callback)},setHitAreaFromTexture:function(gameObjects,callback){void 0===callback&&(callback=RectangleContains);Array.isArray(gameObjects)||(gameObjects=[gameObjects]);for(var i=0;i<gameObjects.length;i++){var gameObject=gameObjects[i],frame=gameObject.frame,width=0,height=0;frame?(width=frame.realWidth,height=frame.realHeight):gameObject.width&&(width=gameObject.width,
height=gameObject.height);"Container"!==gameObject.type||0!==width&&0!==height?0!==width&&0!==height&&(gameObject.input=CreateInteractiveObject(gameObject,new Rectangle(0,0,width,height),callback),this.queueForInsertion(gameObject)):console.warn("Container.setInteractive() must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(gameObjects,x,y,width,height,callback){void 0===callback&&(callback=RectangleContains);x=new Rectangle(x,y,width,height);return this.setHitArea(gameObjects,
x,callback)},setHitAreaTriangle:function(gameObjects,x1,y1,x2,y2,x3,y3,callback){void 0===callback&&(callback=TriangleContains);x1=new Triangle(x1,y1,x2,y2,x3,y3);return this.setHitArea(gameObjects,x1,callback)},setPollAlways:function(){this._pollTimer=this.pollRate=0;return this},setPollOnMove:function(){this.pollRate=-1;this._pollTimer=0;return this},setPollRate:function(value){this.pollRate=value;this._pollTimer=0;return this},setGlobalTopOnly:function(value){this.manager.globalTopOnly=value;return this},
setTopOnly:function(value){this.topOnly=value;return this},sortGameObjects:function(gameObjects){if(2>gameObjects.length)return gameObjects;this.scene.sys.depthSort();return gameObjects.sort(this.sortHandlerGO.bind(this))},sortHandlerGO:function(childA,childB){if(childA.parentContainer||childB.parentContainer){if(childA.parentContainer===childB.parentContainer)return childB.parentContainer.getIndex(childB)-childA.parentContainer.getIndex(childA);if(childA.parentContainer===childB)return-1;if(childB.parentContainer===
childA)return 1;childA=childA.getIndexList();childB=childB.getIndexList();for(var len=Math.min(childA.length,childB.length),i=0;i<len;i++){var indexA=childA[i],indexB=childB[i];if(indexA!==indexB)return indexB-indexA}}else return this.displayList.getIndex(childB)-this.displayList.getIndex(childA);return 0},stopPropagation:function(){this.manager.globalTopOnly&&(this.manager.ignoreEvents=!0);return this},addUpCallback:function(callback,isOnce){this.manager.addUpCallback(callback,isOnce);return this},
addDownCallback:function(callback,isOnce){this.manager.addDownCallback(callback,isOnce);return this},addMoveCallback:function(callback,isOnce){this.manager.addMoveCallback(callback,isOnce);return this},addPointer:function(quantity){return this.manager.addPointer(quantity)},setDefaultCursor:function(cursor){this.manager.setDefaultCursor(cursor);return this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=
!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit("shutdown");this._temp.length=0;this._list.length=0;this._draggable.length=0;this._pendingRemoval.length=0;for(var i=this._pendingInsertion.length=0;10>i;i++)this._drag[i]=[],this._over[i]=[];this.removeAllListeners();i=this.systems.events;i.off("transitionstart",this.transitionIn,this);i.off("transitionout",this.transitionOut,this);i.off("transitioncomplete",this.transitionComplete,
this);i.off("preupdate",this.preUpdate,this);i.off("update",this.update,this);i.off("shutdown",this.shutdown,this)},destroy:function(){this.shutdown();this.pluginEvents.emit("destroy");this.pluginEvents.removeAllListeners();this.scene.sys.events.off("start",this.start,this);this.mouse=this.events=this.manager=this.cameras=this.scene=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},mousePointer:{get:function(){return this.manager.mousePointer}},
activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},
pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});global.register("InputPlugin",require,"input");module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$input$InputPlugin.js.map
