shadow$provide.module$node_modules$Phaser$src$sound$html5$HTML5AudioSoundManager=function(global,require,module,exports){var BaseSoundManager=require("module$node_modules$Phaser$src$sound$BaseSoundManager");global=require("module$node_modules$Phaser$src$utils$Class");var HTML5AudioSound=require("module$node_modules$Phaser$src$sound$html5$HTML5AudioSound");require=new global({Extends:BaseSoundManager,initialize:function(game){this.override=!0;this.audioPlayDelay=.1;this.loopEndOffset=.05;this.onBlurPausedSounds=
[];this.lockedActionsQueue=(this.locked="ontouchstart"in window)?[]:null;this._mute=!1;this._volume=1;BaseSoundManager.call(this,game)},add:function(key,config){key=new HTML5AudioSound(this,key,config);this.sounds.push(key);return key},unlock:function(){this.locked=!1;var _this=this;this.game.cache.audio.entries.each(function(key,tags){for(key=0;key<tags.length;key++)if("true"===tags[key].dataset.locked)return _this.locked=!0,!1;return!0});if(this.locked){var moved=!1,detectMove=function(){moved=
!0},unlock=function(){if(moved)moved=!1;else{document.body.removeEventListener("touchmove",detectMove);document.body.removeEventListener("touchend",unlock);var lockedTags=[];_this.game.cache.audio.entries.each(function(key,tags){for(key=0;key<tags.length;key++){var tag=tags[key];"true"===tag.dataset.locked&&lockedTags.push(tag)}return!0});if(0!==lockedTags.length){var lastTag=lockedTags[lockedTags.length-1];lastTag.oncanplaythrough=function(){lastTag.oncanplaythrough=null;lockedTags.forEach(function(tag){tag.dataset.locked=
"false"});_this.unlocked=!0};lockedTags.forEach(function(tag){tag.load()})}}};this.once("unlocked",function(){for(this.forEachActiveSound(function(sound){null===sound.currentMarker&&0===sound.duration&&(sound.duration=sound.tags[0].duration);sound.totalDuration=sound.tags[0].duration});this.lockedActionsQueue.length;){var lockedAction=this.lockedActionsQueue.shift();lockedAction.sound[lockedAction.prop].apply?lockedAction.sound[lockedAction.prop].apply(lockedAction.sound,lockedAction.value||[]):lockedAction.sound[lockedAction.prop]=
lockedAction.value}},this);document.body.addEventListener("touchmove",detectMove,!1);document.body.addEventListener("touchend",unlock,!1)}},onBlur:function(){this.forEachActiveSound(function(sound){sound.isPlaying&&(this.onBlurPausedSounds.push(sound),sound.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(sound){sound.onFocus()});this.onBlurPausedSounds.length=0},destroy:function(){BaseSoundManager.prototype.destroy.call(this);this.onBlurPausedSounds.length=0;this.onBlurPausedSounds=
null},isLocked:function(sound,prop,value){return"true"===sound.tags[0].dataset.locked?(this.lockedActionsQueue.push({sound:sound,prop:prop,value:value}),!0):!1},setMute:function(value){this.mute=value;return this},mute:{get:function(){return this._mute},set:function(value){this._mute=value;this.forEachActiveSound(function(sound){sound.updateMute()});this.emit("mute",this,value)}},setVolume:function(value){this.volume=value;return this},volume:{get:function(){return this._volume},set:function(value){this._volume=
value;this.forEachActiveSound(function(sound){sound.updateVolume()});this.emit("volume",this,value)}}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$sound$html5$HTML5AudioSoundManager.js.map
