{"version":3,"sources":["patu/components.cljs"],"mappings":"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","names":["var_args","G__38265","patu.components/reg-comp","js/Error","data","cljs.core/deref","patu.state/state","cljs.core/clj->js","id","cljs.core/name","patu.components/reg-comp-n","datas","seq__38266","cljs.core/seq","chunk__38267","count__38268","i__38269","temp__5735__auto__","cljs.core/chunked-seq?","c__4556__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","cljs.core/map?","patu.components.reg_comp","vec__38276","cljs.core.nth","vec__38279","props","cljs.core/Keyword","patu.components/get-comp","p__38282","vec__38283","patu.components/move!","comp","x","y","p__38286","vec__38287","patu.components/move","patu.components/jump!","patu.components/jump","patu.components/on","key","handler","patu.components/cis","tag","patu.components/action","patu.components/scale!","val","patu.components/flip-x","patu.components/speed","patu.components/play","patu.components/grounded?","patu.components/cur-anim","cljs.core.keyword","patu.components/cur-anim?","anim","cljs.core._EQ_","patu.components/close?","dis-a","dis-b","js/Math.abs","patu.components/ahead?","target","patu.components/behind?","patu.components/top?","patu.components/bottom?"],"sourcesContent":["(ns patu.components\n  (:require  [patu.events :refer [dispatch reg-event]]\n             [patu.state :refer [state]]))\n\n;; == 1. Component API\n(defn reg-comp\n  ([data]\n   (.reg_comp (:k @state) (clj->js data)))\n  ([id data]\n   (.reg_comp (:k @state) (name id) (clj->js data))))\n\n(defn reg-comp-n\n  [datas]\n  (doseq [data datas]\n    (if (map? data)\n      (reg-comp data))\n    (let [[id props] data]\n      (if (keyword? id)\n        (reg-comp id props)\n        (reg-comp data)))))\n\n(defn get-comp [id]\n  (.get_comp (:k @state) (name id)))\n\n(comment\n  (get-comp :birdy)\n  (get-comp :player))\n\n;; Helpers\n(defn move! [comp [x y]]\n  (.move comp x y))\n(defn move [comp [x y]]\n  (.move comp x y))\n\n(defn jump! [comp x]\n  (.jump comp x))\n\n(defn jump [comp x]\n  (.jump comp x))\n\n(defn on [comp key handler]\n  (.on comp (name key) handler))\n\n(defn cis [comp tag]\n  (.is comp (name tag)))\n\n(defn action [comp handler]\n  (.action comp handler))\n\n(defn scale! [comp val]\n  (set! comp -scale val))\n\n(defn flip-x [comp val]\n  (.flipX comp val))\n\n(defn speed [comp]\n  (.-speed comp))\n\n(defn play [comp id]\n  (.play comp (name id)))\n\n;;\n(defn grounded? [comp]\n  (.grounded comp))\n\n(defn cur-anim [comp]\n  (keyword (.curAnim comp)))\n\n(defn cur-anim? [comp anim]\n  (= (cur-anim comp) anim))\n\n;;\n(defn close? [dis-a dis-b]\n  (and (> 100 (js/Math.abs (- (.. dis-a -pos -y) (.. dis-b -pos -y))))\n       (> 100 (js/Math.abs (- (.. dis-a -pos -x) (.. dis-b -pos -x))))))\n\n(defn ahead? [comp target]\n  (> (.. comp -pos -x) (.. target -pos -x)))\n\n(defn behind? [comp target]\n  (< (.. comp -pos -x) (.. target -pos -x)))\n\n(defn top? [comp target]\n  (< (.. comp -pos -y) (.. target -pos -y)))\n\n(defn bottom? [comp target]\n  (< (.. comp -pos -y) (.. target -pos -y)))\n"]}