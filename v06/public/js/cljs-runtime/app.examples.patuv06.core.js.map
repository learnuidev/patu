{"version":3,"sources":["app/examples/patuv06/core.cljs"],"mappings":";;AAIA,AAAKA,AAAM,AAAA,AAAA,AAAA,AAACC;AAGZ,AAAA,AAAA,AAAAC,AAAME;AAAN,AAAA,AAAAD,AAAA,AAAA;AAAA,AAAA,AAAAA;AAAA;AAAA,AAAAC,AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAC,AAAA,AAAA,AAAA,AAAA;;;;;AAAA,AAAA,AAAA,AAAMD,AACFE;AADJ,AAEG,AAAW,AAAA,AAAA,AAAAC,AAAKP,AAAO,AAACQ,AAAQF;;;AAFnC,AAAA,AAAA,AAAMF,AAGFK,AAAGH;AAHP,AAIG,AAAW,AAAA,AAAA,AAAAC,AAAKP,AAAO,AAACU,AAAKD,AAAI,AAACD,AAAQF;;;AAJ7C,AAAA,AAAA,AAAMF;;AAAN,AAMA,AAAA,AAAMO,AACHC;AADH,AAEE,AAAAC,AAAA,AAAAC,AAAaF;AAAbG,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAA,AAAAD,AAAAE,AAAQX;AAAR,AAAA,AACE,AAAI,AAACoB,AAAKpB;AACR,AAACqB,AAASrB;;AADZ;;AAEA,AAAAsB,AAAiBtB;AAAjB,AAAAuB,AAAAD,AAAA,AAAA,AAAOnB;AAAP,AAAAoB,AAAAD,AAAA,AAAA,AAAUG;AAAV,AACE,AAAI,AAAAC,AAAUvB;AACZ,AAACkB,AAASlB,AAAGsB;;AACb,AAACJ,AAASrB;;;AANhB;AAAA,AAAAO;AAAAE;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAAC,AAAA,AAAAJ,AAAAD;AAAA,AAAA,AAAAK;AAAA,AAAA,AAAAL,AAAAK;AAAA,AAAA,AAAA,AAAAC,AAAAN;AAAA,AAAAO,AAAA,AAAAC,AAAAR;AAAA,AAAA,AAAA,AAAAS,AAAAT;AAAAO;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAA,AAAAI,AAAAX,AAAQP;AAAR,AAAA,AACE,AAAI,AAACoB,AAAKpB;AACR,AAACqB,AAASrB;;AADZ;;AAEA,AAAAwB,AAAiBxB;AAAjB,AAAAuB,AAAAC,AAAA,AAAA,AAAOrB;AAAP,AAAAoB,AAAAC,AAAA,AAAA,AAAUC;AAAV,AACE,AAAI,AAAAC,AAAUvB;AACZ,AAACkB,AAASlB,AAAGsB;;AACb,AAACJ,AAASrB;;;AANhB;AAAA,AAAA,AAAAmB,AAAAZ;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;;AAQF,AAAA,AAAMoB,AAAUxB;AAAhB,AACE,AAAW,AAAA,AAAA,AAAAF,AAAKP,AAAO,AAACU,AAAKD;;AAE/B,AAMA,AAAA,AAAMyB,AAAUC,AAAI7B;AAApB,AACE,AAAI,AAAC8B,AAAEC,AAAY,AAACC,AAAKhC;AACvB,AAAU,AAAA,AAAA,AAAAC,AAAKP,AAAO,AAACU,AAAKyB,AAAK7B;;AACjC,AAAMiC,AAAQ,AAAKC;AAAL,AACE,AAAAC,AAAA,AAAA3B,AAAoBR;AAApBoC,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAAf,AAAAgB,AAAA,AAAA,AAASE;AAAT,AAAAlB,AAAAgB,AAAA,AAAA,AAAad;AAAb,AAAA,AACE,AAAAb,AAAgB,AAACe,AAASc;AAA1B,AAAA,AAAA7B;AAAA,AAAA,AAAAA,AAAWsB;AAAX,AACE,AAAAQ,AAAA,AAAAlC,AAAciB;AAAdkB,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAAtB,AAAAuB,AAAA,AAAA,AAASQ;AAAT,AAAA/B,AAAAuB,AAAA,AAAA,AAAWS;AAAX,AAAA,AACE,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAEA,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAHF;AAAA,AAAAb;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAAjC,AAAA,AAAAJ,AAAAkC;AAAA,AAAA,AAAA9B;AAAA,AAAA,AAAA8B,AAAA9B;AAAA,AAAA,AAAA,AAAAC,AAAA6B;AAAA,AAAA5B,AAAA,AAAAC,AAAA2B;AAAA,AAAA,AAAA,AAAA1B,AAAA0B;AAAA5B;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAAiC,AAAA,AAAA7B,AAAAwB;AAAA,AAAAnB,AAAAwB,AAAA,AAAA,AAASO;AAAT,AAAA/B,AAAAwB,AAAA,AAAA,AAAWQ;AAAX,AAAA,AACE,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAEA,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAHF;AAAA,AAAA,AAAApC,AAAAuB;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;AADF;;AADF;AAAA,AAAAP;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAA1B,AAAA,AAAAJ,AAAA2B;AAAA,AAAA,AAAAvB;AAAA,AAAA,AAAAuB,AAAAvB;AAAA,AAAA,AAAA,AAAAC,AAAAsB;AAAA,AAAArB,AAAA,AAAAC,AAAAoB;AAAA,AAAA,AAAA,AAAAnB,AAAAmB;AAAArB;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAA0B,AAAA,AAAAtB,AAAAiB;AAAA,AAAAZ,AAAAiB,AAAA,AAAA,AAASC;AAAT,AAAAlB,AAAAiB,AAAA,AAAA,AAAaf;AAAb,AAAA,AACE,AAAAb,AAAgB,AAACe,AAASc;AAA1B,AAAA,AAAA7B;AAAA,AAAA,AAAAA,AAAWsB;AAAX,AACE,AAAAc,AAAA,AAAAxC,AAAciB;AAAdwB,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAA5B,AAAA6B,AAAA,AAAA,AAASE;AAAT,AAAA/B,AAAA6B,AAAA,AAAA,AAAWG;AAAX,AAAA,AACE,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAEA,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAHF;AAAA,AAAAP;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAAvC,AAAA,AAAAJ,AAAAwC;AAAA,AAAA,AAAApC;AAAA,AAAA,AAAAoC,AAAApC;AAAA,AAAA,AAAA,AAAAC,AAAAmC;AAAA,AAAAlC,AAAA,AAAAC,AAAAiC;AAAA,AAAA,AAAA,AAAAhC,AAAAgC;AAAAlC;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAAuC,AAAA,AAAAnC,AAAA8B;AAAA,AAAAzB,AAAA8B,AAAA,AAAA,AAASC;AAAT,AAAA/B,AAAA8B,AAAA,AAAA,AAAWE;AAAX,AAAA,AACE,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAEA,AAAM,AAAA,AAACzB,AAAEwB;AAAT,AACE,AAAM,AAAA,AAAIpB,AAAc,AAAG,AAAA,AAAIA,AAAcqB;;AAD/C;;AAHF;AAAA,AAAA,AAAApC,AAAA6B;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;AADF;;AADF;AAAA,AAAA,AAAA7B,AAAAgB;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;;AADhB,AAQE,AAAU,AAAA,AAAA,AAAAlC,AAAKP,AAAO,AAACU,AAAKyB,AAAKI;;;AAIvC,AAAKuB,AAAW,AAAA,AAAC7D;AAEjB,AAAA,AAAM8D,AAAWtD,AAAG8B;AAApB,AACE,AAACyB,AAAMF,AAAWG,AAAMxD,AAAG8B;;AAE7B,AAAA,AAAM2B,AAAUnC;AAAhB,AACE,AAAAoC,AAAiB,AAAA,AAAA5D,AAAC6D,AAAKN,AAAW,AAAA,AAACjC,AAAIE;AAAvC,AAAA,AAAAoC;AAAA,AAAAA,AAAS5B;AAAT,AACE,AAAA,AAAA,AAACA,AAAAA,AAAAA,AAAYR,AAAAA;;AACb,AAACsC,AAAe,AAAA,AAAyC,AAAA,AAACxC,AAAIE;;;AAElE,AAAA,AAAMuC,AAAYhE;AAAlB,AACE,AAAAiE,AAAA,AAAAzD,AAAcR;AAAdkE,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAA,AAAAD,AAAAE,AAAQ3C;AAAR,AAAA,AACE,AAACmC,AAASnC;;AADZ;AAAA,AAAAwC;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAAxD,AAAA,AAAAJ,AAAAyD;AAAA,AAAA,AAAArD;AAAA,AAAA,AAAAqD,AAAArD;AAAA,AAAA,AAAA,AAAAC,AAAAoD;AAAA,AAAAnD,AAAA,AAAAC,AAAAkD;AAAA,AAAA,AAAA,AAAAjD,AAAAiD;AAAAnD;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAA,AAAAI,AAAA+C,AAAQxC;AAAR,AAAA,AACE,AAACmC,AAASnC;;AADZ;AAAA,AAAA,AAAAN,AAAA8C;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;;AAKF,AAAA,AAAMI,AAAQlE,AAAG8B;AAAjB,AACE,AAAArB,AAAgB,AAACe,AAASxB;AAA1B,AAAA,AAAAS;AAAA,AAAA,AAAAA,AAAWsB;AAAX,AACE,AAAI,AAAUA;AACZ,AAASA,AAAKD;;AACd,AAAS,AAAA,AAAA,AAAAhC,AAAKP,AAAO,AAACU,AAAKD,AAAI8B;;;AAHnC;;;AAKF,AAAA,AAACwB,AAEA,AAAAa,AAAKI;AAAL,AAAA,AAAAH,AAAAD;AAAAE,AAAA,AAAAhE,AAAA+D;AAAAE,AAAA,AAAAvD,AAAAsD;AAAAA,AAAA,AAAArD,AAAAqD;AAAAC,AAAQC;AAARF,AAAYG;AAAZ,AACE,AAAI,AAAAjD,AAAU,AAACR,AAAMyD;AACnB,AAACN,AAAO,AAACnD,AAAMyD,AAAO,AAACC,AAAOD;;AAC9B,AAAAE,AAAA,AAAArE,AAAqBmE;AAArBG,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAAzD,AAAA0D,AAAA,AAAA,AAAS9E;AAAT,AAAAoB,AAAA0D,AAAA,AAAA,AAAYhD;AAAZ,AAAA,AACE,AAACoC,AAAOlE,AAAG8B;;AADb;AAAA,AAAA4C;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAApE,AAAA,AAAAJ,AAAAqE;AAAA,AAAA,AAAAjE;AAAA,AAAA,AAAAiE,AAAAjE;AAAA,AAAA,AAAA,AAAAC,AAAAgE;AAAA,AAAA/D,AAAA,AAAAC,AAAA8D;AAAA,AAAA,AAAA,AAAA7D,AAAA6D;AAAA/D;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAAoE,AAAA,AAAAhE,AAAA2D;AAAA,AAAAtD,AAAA2D,AAAA,AAAA,AAAS/E;AAAT,AAAAoB,AAAA2D,AAAA,AAAA,AAAYjD;AAAZ,AAAA,AACE,AAACoC,AAAOlE,AAAG8B;;AADb;AAAA,AAAA,AAAAd,AAAA0D;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;;;AAIL,AAAA,AAACpB,AAEA,AAAA0B,AAAKT;AAAL,AAAA,AAAAU,AAAAD;AAAAE,AAAA,AAAA7E,AAAA4E;AAAAE,AAAA,AAAApE,AAAAmE;AAAAA,AAAA,AAAAlE,AAAAkE;AAAAC,AAAQZ;AAARW,AAAYV;AAAZ,AACE,AAAAY,AAAA,AAAA/E,AAAsBmE;AAAtBa,AAAA;AAAAC,AAAA;AAAAC,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAAA,AAAAD;AAAA,AAAAE,AAAA,AAAAH,AAAAE;AAAA,AAAAnE,AAAAoE,AAAA,AAAA,AAAS9D;AAAT,AAAAN,AAAAoE,AAAA,AAAA,AAAa1D;AAAb,AAAA,AACE,AAACL,AAASC,AAAII;;AADhB;AAAA,AAAAsD;AAAAC;AAAAC;AAAA,AAAAC,AAAA;;;;;;;AAAA,AAAA9E,AAAA,AAAAJ,AAAA+E;AAAA,AAAA,AAAA3E;AAAA,AAAA,AAAA2E,AAAA3E;AAAA,AAAA,AAAA,AAAAC,AAAA0E;AAAA,AAAAzE,AAAA,AAAAC,AAAAwE;AAAA,AAAA,AAAA,AAAAvE,AAAAuE;AAAAzE;AAAA,AAAAG,AAAAH;AAAA;;;;;;;AAAA,AAAA8E,AAAA,AAAA1E,AAAAqE;AAAA,AAAAhE,AAAAqE,AAAA,AAAA,AAAS/D;AAAT,AAAAN,AAAAqE,AAAA,AAAA,AAAa3D;AAAb,AAAA,AACE,AAACL,AAASC,AAAII;;AADhB;AAAA,AAAA,AAAAd,AAAAoE;AAAA;AAAA;AAAA;;;;;;;;AAAA;;;;;;AAIH,AAAA,AAAC9B,AAEA,AAAAoC,AAAKnB;AAAL,AAAA,AAAAoB,AAAAD;AAAA,AAAAtE,AAAAuE,AAAA,AAAA,AAAQpB;AAAR,AAAAnD,AAAAuE,AAAA,AAAA,AAAU3F;AAAV,AAAAoB,AAAAuE,AAAA,AAAA,AAAa7D;AAAb,AACE,AAAW,AAAA,AAAA,AAAAhC,AAAKP,AAAO,AAACU,AAAKD,AAAI8B;;AAEpC,AAAA,AAACwB,AAEA,AAAAsC,AAAKrB;AAAL,AAAA,AAAAsB,AAAAD;AAAAE,AAAA,AAAAzF,AAAAwF;AAAAE,AAAA,AAAAhF,AAAA+E;AAAAA,AAAA,AAAA9E,AAAA8E;AAAAC,AAAQxB;AAARuB,AAAYE;AAAZ,AACE,AAACC,AAAMtG,AAASqG;;AAEnB,AAAA,AAAC1C,AAEA,AAAA4C,AAAK3B;AAAL,AAAA,AAAA4B,AAAAD;AAAA,AAAA9E,AAAA+E,AAAA,AAAA,AAAQ5B;AAAR,AAAAnD,AAAA+E,AAAA,AAAA,AAAUhG;AAAV,AACE,AAACD,AAAWC;;AAEf,AAAA,AAAA,AAAAV,AAAM4G;AAAN,AAAA,AAAAD,AAAA,AAAA;AAAA,AAAA,AAAAA;AAAA;AAAA,AAAAC;;;AAAA;AAAA,AAAAA,AAAA,AAAA,AAAA;;;;AAAA,AAAA,AAAAzG,AAAA,AAAA,AAAA,AAAA;;;;;AAAA,AAAA,AAAA,AAAMyG;AAAN,AAEG,AAAMC,AAAK,AAAA,AAAUD;AAArB,AACE,AAAA,AAAC9C,AAAMhE,AAAMiE,AAAS8C;;AACtBA;;;AAJL,AAAA,AAAA,AAAMD,AAKFE;AALJ,AAMG,AAAMD,AAAK,AAAUE,AAAQ,AAACzG,AAAQwG;AAAtC,AACE,AAAA,AAAChD,AAAMhE,AAAMiE,AAAS8C;;AACtBA;;;AARL,AAAA,AAAA,AAAMD;;AAAN,AAUA,AAAA,AAAMI,AAAWC;AAAjB,AACE,AAAW,AAAA,AAAA,AAAA5G,AAAKP,AAAOmH;;AACzB,AAAA,AAAMC,AAAa3G,AAAG0G;AAAtB,AACE,AAAa,AAAA,AAAA,AAAA5G,AAAKP,AAAO,AAACU,AAAKD,AAAI0G","names":["app.examples.patuv06.core/state","cljs.core.atom","var_args","G__39680","app.examples.patuv06.core/reg-comp","js/Error","data","cljs.core/deref","cljs.core/clj->js","id","cljs.core/name","app.examples.patuv06.core/reg-comp-n","datas","seq__39681","cljs.core/seq","chunk__39682","count__39683","i__39684","temp__5735__auto__","cljs.core/chunked-seq?","c__4556__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","cljs.core/map?","app.examples.patuv06.core.reg_comp","vec__39691","cljs.core.nth","vec__39694","props","cljs.core/Keyword","app.examples.patuv06.core/get-comp","app.examples.patuv06.core/key-down","dir","cljs.core._EQ_","js/Function","cljs.core/type","handler","comp","seq__39697","chunk__39698","count__39699","i__39700","vec__39739","vec__39758","cid","seq__39742","chunk__39743","count__39744","i__39745","vec__39752","vec__39755","seq__39761","chunk__39762","count__39763","i__39764","vec__39771","vec__39774","k","v","app.examples.patuv06.core/evts-store","app.examples.patuv06.core/reg-event","cljs.core.swap_BANG_","cljs.core/assoc","app.examples.patuv06.core/dispatch","temp__5733__auto__","cljs.core.get","js/console.log","app.examples.patuv06.core/dispatch-n","seq__39777","chunk__39778","count__39779","i__39780","app.examples.patuv06.core/action","p__39781","vec__39782","seq__39783","first__39784","_","comps","cljs.core/second","seq__39785","chunk__39786","count__39787","i__39788","vec__39795","vec__39798","p__39801","vec__39802","seq__39803","first__39804","seq__39805","chunk__39806","count__39807","i__39808","vec__39815","vec__39818","p__39821","vec__39822","p__39825","vec__39826","seq__39827","first__39828","args","cljs.core.apply","p__39829","vec__39830","G__39834","app.examples.patuv06.core/kaboom","game","opts","js/module$kaboom$v06","app.examples.patuv06.core/load-root","val","app.examples.patuv06.core/load-sprite"],"sourcesContent":["(ns app.examples.patuv06.core\n  (:require  [\"/kaboom/v06.js\" :as kaboom6]))\n\n;; == 1. State\n(def state (atom {:k nil}))\n\n;; == 2. Components\n(defn reg-comp\n  ([data]\n   (.reg_comp (:k @state) (clj->js data)))\n  ([id data]\n   (.reg_comp (:k @state) (name id) (clj->js data))))\n\n(defn reg-comp-n\n  [datas]\n  (doseq [data datas]\n    (if (map? data)\n      (reg-comp data))\n    (let [[id props] data]\n      (if (keyword? id)\n        (reg-comp id props)\n        (reg-comp data)))))\n\n(defn get-comp [id]\n  (.get_comp (:k @state) (name id)))\n\n(comment\n  (get-comp :birdy)\n  (get-comp :player))\n\n;; Event Handler Functions\n;; == 3. Key handlers\n(defn key-down [dir data]\n  (if (= js/Function (type data))\n    (.keyDown (:k @state) (name dir) data)\n    (let [handler (fn [comp]\n                    (doseq [[cid props] data]\n                      (when-let [comp (get-comp cid)]\n                        (doseq [[k v] props]\n                          (when (= k :x)\n                            (set! (.. comp -pos -x) (+ (.. comp -pos -x) v)))\n                          (when (= k :y)\n                            (set! (.. comp -pos -y) (+ (.. comp -pos -y) v)))))))]\n      (.keyDown (:k @state) (name dir) handler))))\n\n;; Game Events\n;; == 4. Event store\n(def evts-store (atom {}))\n\n(defn reg-event [id handler]\n  (swap! evts-store assoc id handler))\n\n(defn dispatch [props]\n  (if-let [handler (get @evts-store (nth props 0))]\n    (handler nil props)\n    (js/console.log (str \"No event handler registered for: \" (nth props 0)))))\n\n(defn dispatch-n [data]\n  (doseq [props data]\n    (dispatch props)))\n\n;; ==== Event Registation ===\n;; 1. Action\n(defn action [id handler]\n  (when-let [comp (get-comp id)]\n    (if (.-action comp)\n      (.action comp handler)\n      (.action (:k @state) (name id) handler))))\n\n(reg-event\n :action\n (fn [_ [_ & comps]]\n   (if (keyword? (first comps))\n     (action (first comps) (second comps))\n     (doseq [[id handler] comps]\n       (action id handler)))))\n\n;; 2. key down\n(reg-event\n :key-down\n (fn [_ [_ & comps]]\n   (doseq [[dir handler] comps]\n     (key-down dir handler))))\n\n;; 3. key press\n(reg-event\n :key-press\n (fn [_ [_ id handler]]\n   (.keyPress (:k @state) (name id) handler)))\n\n(reg-event\n :comp/reg\n (fn [_ [_ & args]]\n   (apply reg-comp args)))\n\n(reg-event\n :comp/reg-n\n (fn [_ [_ datas]]\n   (reg-comp-n datas)))\n\n(defn kaboom\n  ([]\n   (let [game (.default kaboom 6)]\n     (swap! state assoc :k game)\n     game))\n  ([opts]\n   (let [game (.default kaboom6 (clj->js opts))]\n     (swap! state assoc :k game)\n     game)))\n\n(defn load-root [val]\n  (.loadRoot (:k @state) val));\n(defn load-sprite [id val]\n  (.loadSprite (:k @state) (name id) val));\n"]}