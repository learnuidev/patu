shadow$provide.module$node_modules$Phaser$src$tweens$tween$Tween=function(global,require,module,exports){var Class=require("module$node_modules$Phaser$src$utils$Class");global=require("module$node_modules$Phaser$src$gameobjects$GameObjectCreator");exports=require("module$node_modules$Phaser$src$gameobjects$GameObjectFactory");var TWEEN_CONST=require("module$node_modules$Phaser$src$tweens$tween$const");require=new Class({initialize:function(parent,data,targets){this.parent=parent;this.parentIsTimeline=
parent.hasOwnProperty("isTimeline");this.data=data;this.totalData=data.length;this.targets=targets;this.totalTargets=targets.length;this.useFrames=!1;this.timeScale=1;this.calculatedOffset=this.offset=this.countdown=this.completeDelay=this.loopCounter=this.loopDelay=this.loop=0;this._pausedState=this.state=TWEEN_CONST.PENDING_ADD;this.paused=!1;this.totalProgress=this.totalDuration=this.progress=this.duration=this.totalElapsed=this.elapsed=0;this.callbacks={onComplete:null,onLoop:null,onRepeat:null,
onStart:null,onUpdate:null,onYoyo:null};this.callbackScope},getValue:function(){return this.data[0].current},setTimeScale:function(value){this.timeScale=value;return this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===TWEEN_CONST.ACTIVE},isPaused:function(){return this.state===TWEEN_CONST.PAUSED},hasTarget:function(target){return-1!==this.targets.indexOf(target)},updateTo:function(key,value,startToCurrent){for(var i=0;i<this.totalData;i++){var tweenData=this.data[i];
if(tweenData.key===key){tweenData.end=value;startToCurrent&&(tweenData.start=tweenData.current);break}}return this},restart:function(){this.state===TWEEN_CONST.REMOVED?(this.seek(0),this.parent.makeActive(this)):(this.stop(),this.play())},calcDuration:function(){for(var max=0,data=this.data,i=0;i<this.totalData;i++){var tweenData=data[i];tweenData.t1=tweenData.duration+tweenData.hold;tweenData.yoyo&&(tweenData.t1+=tweenData.duration);tweenData.t2=tweenData.t1+tweenData.repeatDelay;tweenData.totalDuration=
tweenData.delay+tweenData.t1;-1===tweenData.repeat?tweenData.totalDuration+=999999999999*tweenData.t2:0<tweenData.repeat&&(tweenData.totalDuration+=tweenData.t2*tweenData.repeat);tweenData.totalDuration>max&&(max=tweenData.totalDuration)}this.duration=max;this.loopCounter=-1===this.loop?999999999999:this.loop;this.totalDuration=0<this.loopCounter?this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay},init:function(){for(var data=this.data,
totalTargets=this.totalTargets,i=0;i<this.totalData;i++){var tweenData=data[i],target=tweenData.target,gen=tweenData.gen;tweenData.delay=gen.delay(i,totalTargets,target);tweenData.duration=gen.duration(i,totalTargets,target);tweenData.hold=gen.hold(i,totalTargets,target);tweenData.repeat=gen.repeat(i,totalTargets,target);tweenData.repeatDelay=gen.repeatDelay(i,totalTargets,target)}this.calcDuration();this.totalElapsed=this.elapsed=this.totalProgress=this.progress=0;if(this.paused&&!this.parentIsTimeline)return this.state=
TWEEN_CONST.PENDING_ADD,this._pausedState=TWEEN_CONST.INIT,!1;this.state=TWEEN_CONST.INIT;return!0},nextState:function(){if(0<this.loopCounter){this.progress=this.elapsed=0;this.loopCounter--;var onLoop=this.callbacks.onLoop;onLoop&&(onLoop.params[1]=this.targets,onLoop.func.apply(onLoop.scope,onLoop.params));this.resetTweenData(!0);0<this.loopDelay?(this.countdown=this.loopDelay,this.state=TWEEN_CONST.LOOP_DELAY):this.state=TWEEN_CONST.ACTIVE}else if(0<this.completeDelay)this.countdown=this.completeDelay,
this.state=TWEEN_CONST.COMPLETE_DELAY;else{if(onLoop=this.callbacks.onComplete)onLoop.params[1]=this.targets,onLoop.func.apply(onLoop.scope,onLoop.params);this.state=TWEEN_CONST.PENDING_REMOVE}},pause:function(){if(this.state!==TWEEN_CONST.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=TWEEN_CONST.PAUSED,this},play:function(resetFromTimeline){if(this.state!==TWEEN_CONST.ACTIVE){if(this.state===TWEEN_CONST.PENDING_REMOVE||this.state===TWEEN_CONST.REMOVED)this.init(),this.parent.makeActive(this),
resetFromTimeline=!0;var onStart=this.callbacks.onStart;this.parentIsTimeline?(this.resetTweenData(resetFromTimeline),0===this.calculatedOffset?(onStart&&(onStart.params[1]=this.targets,onStart.func.apply(onStart.scope,onStart.params)),this.state=TWEEN_CONST.ACTIVE):(this.countdown=this.calculatedOffset,this.state=TWEEN_CONST.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(resetFromTimeline),this.state=TWEEN_CONST.ACTIVE,onStart&&(onStart.params[1]=this.targets,onStart.func.apply(onStart.scope,
onStart.params))),this.parent.makeActive(this))}},resetTweenData:function(resetFromLoop){for(var data=this.data,i=0;i<this.totalData;i++){var tweenData=data[i];tweenData.progress=0;tweenData.elapsed=0;tweenData.repeatCounter=-1===tweenData.repeat?999999999999:tweenData.repeat;resetFromLoop?(tweenData.start=tweenData.getStartValue(tweenData.target,tweenData.key,tweenData.start),tweenData.end=tweenData.getEndValue(tweenData.target,tweenData.key,tweenData.end),tweenData.current=tweenData.start,tweenData.state=
TWEEN_CONST.PLAYING_FORWARD):0<tweenData.delay?(tweenData.elapsed=tweenData.delay,tweenData.state=TWEEN_CONST.DELAY):tweenData.state=TWEEN_CONST.PENDING_RENDER}},resume:function(){this.state===TWEEN_CONST.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play();return this},seek:function(toPosition){for(var data=this.data,i=0;i<this.totalData;i++){var ms=this.totalDuration*toPosition,tweenData=data[i],progress=0,elapsed=0;ms<=tweenData.delay?elapsed=progress=0:ms>=tweenData.totalDuration?
(progress=1,elapsed=tweenData.duration):ms>tweenData.delay&&ms<=tweenData.t1?(ms=Math.max(0,ms-tweenData.delay),progress=ms/tweenData.t1,elapsed=tweenData.duration*progress):ms>tweenData.t1&&ms<tweenData.totalDuration&&(ms-=tweenData.delay,ms-=tweenData.t1,ms=ms/tweenData.t2%1*tweenData.t2,ms>tweenData.repeatDelay&&(progress=ms/tweenData.t1,elapsed=tweenData.duration*progress));tweenData.progress=progress;tweenData.elapsed=elapsed;ms=tweenData.ease(tweenData.progress);tweenData.current=tweenData.start+
(tweenData.end-tweenData.start)*ms;tweenData.target[tweenData.key]=tweenData.current}},setCallback:function(type,callback,params,scope){this.callbacks[type]={func:callback,scope:scope,params:params};return this},complete:function(delay){void 0===delay&&(delay=0);if(delay)this.countdown=delay,this.state=TWEEN_CONST.COMPLETE_DELAY;else{if(delay=this.callbacks.onComplete)delay.params[1]=this.targets,delay.func.apply(delay.scope,delay.params);this.state=TWEEN_CONST.PENDING_REMOVE}},stop:function(resetTo){this.state===
TWEEN_CONST.ACTIVE&&void 0!==resetTo&&this.seek(resetTo);if(this.state!==TWEEN_CONST.REMOVED){if(this.state===TWEEN_CONST.PAUSED||this.state===TWEEN_CONST.PENDING_ADD)this.parent._destroy.push(this),this.parent._toProcess++;this.state=TWEEN_CONST.PENDING_REMOVE}},update:function(timestamp,delta){if(this.state===TWEEN_CONST.PAUSED)return!1;this.useFrames&&(delta=1*this.parent.timeScale);delta*=this.timeScale;this.elapsed+=delta;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=
delta;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case TWEEN_CONST.ACTIVE:timestamp=!1;for(var i=0;i<this.totalData;i++)this.updateTweenData(this,this.data[i],delta)&&(timestamp=!0);timestamp||this.nextState();break;case TWEEN_CONST.LOOP_DELAY:this.countdown-=delta;0>=this.countdown&&(this.state=TWEEN_CONST.ACTIVE);break;case TWEEN_CONST.OFFSET_DELAY:this.countdown-=delta;if(0>=this.countdown){if(delta=this.callbacks.onStart)delta.params[1]=this.targets,
delta.func.apply(delta.scope,delta.params);this.state=TWEEN_CONST.ACTIVE}break;case TWEEN_CONST.COMPLETE_DELAY:this.countdown-=delta,0>=this.countdown&&((delta=this.callbacks.onComplete)&&delta.func.apply(delta.scope,delta.params),this.state=TWEEN_CONST.PENDING_REMOVE)}return this.state===TWEEN_CONST.PENDING_REMOVE},setStateFromEnd:function(tween,tweenData,diff){if(tweenData.yoyo){tweenData.elapsed=diff;tweenData.progress=diff/tweenData.duration;tweenData.flipX&&tweenData.target.toggleFlipX();tweenData.flipY&&
tweenData.target.toggleFlipY();if(diff=tween.callbacks.onYoyo)diff.params[1]=tweenData.target,diff.func.apply(diff.scope,diff.params);tweenData.start=tweenData.getStartValue(tweenData.target,tweenData.key,tweenData.start);return TWEEN_CONST.PLAYING_BACKWARD}if(0<tweenData.repeatCounter){tweenData.repeatCounter--;tweenData.elapsed=diff;tweenData.progress=diff/tweenData.duration;tweenData.flipX&&tweenData.target.toggleFlipX();tweenData.flipY&&tweenData.target.toggleFlipY();if(tween=tween.callbacks.onRepeat)tween.params[1]=
tweenData.target,tween.func.apply(tween.scope,tween.params);tweenData.start=tweenData.getStartValue(tweenData.target,tweenData.key,tweenData.start);tweenData.end=tweenData.getEndValue(tweenData.target,tweenData.key,tweenData.start);return 0<tweenData.repeatDelay?(tweenData.elapsed=tweenData.repeatDelay-diff,tweenData.current=tweenData.start,tweenData.target[tweenData.key]=tweenData.current,TWEEN_CONST.REPEAT_DELAY):TWEEN_CONST.PLAYING_FORWARD}return TWEEN_CONST.COMPLETE},setStateFromStart:function(tween,
tweenData,diff){if(0<tweenData.repeatCounter){tweenData.repeatCounter--;tweenData.elapsed=diff;tweenData.progress=diff/tweenData.duration;tweenData.flipX&&tweenData.target.toggleFlipX();tweenData.flipY&&tweenData.target.toggleFlipY();if(tween=tween.callbacks.onRepeat)tween.params[1]=tweenData.target,tween.func.apply(tween.scope,tween.params);tweenData.end=tweenData.getEndValue(tweenData.target,tweenData.key,tweenData.start);return 0<tweenData.repeatDelay?(tweenData.elapsed=tweenData.repeatDelay-diff,
tweenData.current=tweenData.start,tweenData.target[tweenData.key]=tweenData.current,TWEEN_CONST.REPEAT_DELAY):TWEEN_CONST.PLAYING_FORWARD}return TWEEN_CONST.COMPLETE},updateTweenData:function(tween,tweenData,delta){switch(tweenData.state){case TWEEN_CONST.PLAYING_FORWARD:case TWEEN_CONST.PLAYING_BACKWARD:if(!tweenData.target){tweenData.state=TWEEN_CONST.COMPLETE;break}var elapsed=tweenData.elapsed,duration=tweenData.duration,diff=0;elapsed+=delta;elapsed>duration&&(diff=elapsed-duration,elapsed=duration);
delta=tweenData.state===TWEEN_CONST.PLAYING_FORWARD;duration=elapsed/duration;var v=delta?tweenData.ease(duration):tweenData.ease(1-duration);tweenData.current=tweenData.start+(tweenData.end-tweenData.start)*v;tweenData.target[tweenData.key]=tweenData.current;tweenData.elapsed=elapsed;tweenData.progress=duration;if(elapsed=tween.callbacks.onUpdate)elapsed.params[1]=tweenData.target,elapsed.func.apply(elapsed.scope,elapsed.params);1===duration&&(delta?0<tweenData.hold?(tweenData.elapsed=tweenData.hold-
diff,tweenData.state=TWEEN_CONST.HOLD_DELAY):tweenData.state=this.setStateFromEnd(tween,tweenData,diff):tweenData.state=this.setStateFromStart(tween,tweenData,diff));break;case TWEEN_CONST.DELAY:tweenData.elapsed-=delta;0>=tweenData.elapsed&&(tweenData.elapsed=Math.abs(tweenData.elapsed),tweenData.state=TWEEN_CONST.PENDING_RENDER);break;case TWEEN_CONST.REPEAT_DELAY:tweenData.elapsed-=delta;0>=tweenData.elapsed&&(tweenData.elapsed=Math.abs(tweenData.elapsed),tweenData.state=TWEEN_CONST.PLAYING_FORWARD);
break;case TWEEN_CONST.HOLD_DELAY:tweenData.elapsed-=delta;0>=tweenData.elapsed&&(tweenData.state=this.setStateFromEnd(tween,tweenData,Math.abs(tweenData.elapsed)));break;case TWEEN_CONST.PENDING_RENDER:tweenData.target?(tweenData.start=tweenData.getStartValue(tweenData.target,tweenData.key,tweenData.target[tweenData.key]),tweenData.end=tweenData.getEndValue(tweenData.target,tweenData.key,tweenData.start),tweenData.current=tweenData.start,tweenData.target[tweenData.key]=tweenData.start,tweenData.state=
TWEEN_CONST.PLAYING_FORWARD):tweenData.state=TWEEN_CONST.COMPLETE}return tweenData.state!==TWEEN_CONST.COMPLETE}});require.TYPES="onComplete onLoop onRepeat onStart onUpdate onYoyo".split(" ");exports.register("tween",function(config){return this.scene.sys.tweens.add(config)});global.register("tween",function(config){return this.scene.sys.tweens.create(config)});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$tweens$tween$Tween.js.map
