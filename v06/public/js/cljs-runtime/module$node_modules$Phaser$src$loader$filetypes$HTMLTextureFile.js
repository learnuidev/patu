shadow$provide.module$node_modules$Phaser$src$loader$filetypes$HTMLTextureFile=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var CONST=require("module$node_modules$Phaser$src$loader$const"),File=require("module$node_modules$Phaser$src$loader$File");exports=require("module$node_modules$Phaser$src$loader$FileTypesManager");var GetFastValue=require("module$node_modules$Phaser$src$utils$object$GetFastValue"),IsPlainObject=require("module$node_modules$Phaser$src$utils$object$IsPlainObject"),
HTMLTextureFile=new global({Extends:File,initialize:function(loader,key,url,width,height,xhrSettings){void 0===width&&(width=512);void 0===height&&(height=512);var extension="html";if(IsPlainObject(key)){var config=key;key=GetFastValue(config,"key");url=GetFastValue(config,"url");xhrSettings=GetFastValue(config,"xhrSettings");extension=GetFastValue(config,"extension",extension);width=GetFastValue(config,"width",width);height=GetFastValue(config,"height",height)}File.call(this,loader,{type:"html",
cache:loader.textureManager,extension:extension,responseType:"text",key:key,url:url,xhrSettings:xhrSettings,config:{width:width,height:height}})},onProcess:function(){this.state=CONST.FILE_PROCESSING;var w=this.config.width,h=this.config.height,data=[];data.push('\x3csvg width\x3d"'+w+'px" height\x3d"'+h+'px" viewBox\x3d"0 0 '+w+" "+h+'" xmlns\x3d"http://www.w3.org/2000/svg"\x3e');data.push('\x3cforeignObject width\x3d"100%" height\x3d"100%"\x3e');data.push('\x3cbody xmlns\x3d"http://www.w3.org/1999/xhtml"\x3e');
data.push(this.xhrLoader.responseText);data.push("\x3c/body\x3e");data.push("\x3c/foreignObject\x3e");data.push("\x3c/svg\x3e");w=[data.join("\n")];var _this=this;try{var blob=new window.Blob(w,{type:"image/svg+xml;charset\x3dutf-8"})}catch(e){_this.state=CONST.FILE_ERRORED;_this.onProcessComplete();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;this.data.onload=function(){File.revokeObjectURL(_this.data);_this.onProcessComplete()};this.data.onerror=function(){File.revokeObjectURL(_this.data);
_this.onProcessError()};File.createObjectURL(this.data,blob,"image/svg+xml")},addToCache:function(){var texture=this.cache.addImage(this.key,this.data);this.pendingDestroy(texture)}});exports.register("htmlTexture",function(key,url,width,height,xhrSettings){if(Array.isArray(key))for(url=0;url<key.length;url++)this.addFile(new HTMLTextureFile(this,key[url]));else this.addFile(new HTMLTextureFile(this,key,url,width,height,xhrSettings));return this});module.exports=HTMLTextureFile}
//# sourceMappingURL=module$node_modules$Phaser$src$loader$filetypes$HTMLTextureFile.js.map
