{"version":3,"sources":["shadow/markup/react/impl/interop.cljs"],"mappings":";;;;AAIA,AAAsBA,AAChB,AAAA,AAAA,AAACC,AACD,AAAA,AAACC;AAEP,AAAA,AAAMC,AAAUC;AAAhB,AACE,AAAK,AAACC,AAAQD,AACT,AAACE,AAAEN,AAAe,AAAA,AAACE,AAASE;;AAEnC,AAAA,AAAMG,AAAeC;AAArB,AACE,AACE,AAAA,AAAMA;AADR;;AAAA,AAGE,AAACC,AAAKD;AACN,AAACE,AAAQF;;AAJX,AAMEA;;;;;AAIJ,AAAA,AAAMI,AAAiBC;AAAvB,AAAA,AACS,AAACC,AAAOD;AADjB;AAAA,AAAA,AAAA,AAAAF,AAAA;;;AAEE,AAAA,AAAQV,AAAwBY;;AAElC,AAAA,AAAME,AAAaF,AAAIT;AAAvB,AACE,AAAOS,AAAIT;;AACXS;;AAEF,AAAA,AAAMG,AAAYH,AAAII;AAAtB,AACE,AAACC,AAAOH,AAAYF,AAAII;;AAG1B,AAAA,AAAME,AAAgBC,AAAKC;AAA3B,AACE,AAAAC,AAAoBD;AAApBE,AAAA,AAAAC,AAAAF;AAAAG,AAAA,AAAAC,AAAAH;AAAAA,AAAA,AAAAI,AAAAJ;AAAAE,AAAOG;AAAPL,AAAcN;AAAd,AACE,AACE,AAACR,AAAKmB;AACN,AAAChB,AACC,AAAAiB,AAAA,AAAWT,AAAK,AAACb,AAAcqB;AAA/B,AAAA,AAAAC,AACGb,AAAWC;;AADdY;;;AAHJ,AAME,AAAA,AAAMD;AACN,AAAChB,AACC,AAAAkB,AAAA,AAAA,AAAWV;AAAX,AAAA,AAAAU,AACGd,AAAWC;;AADda;;;AARJ,AAWE,AAAC3B,AAASyB;AACV,AAAChB,AACC,AAAAmB,AAAA,AAAA,AAAWX;AAAX,AAAA,AAAAW,AACGf,AAAWK;;AADdU;;;AAbJ,AAgBE,AAAC1B,AAAQuB;AACT,AAAChB,AACC,AAAAoB,AAAA,AAAWZ,AAAKQ;AAAhB,AAAA,AAAAI,AACGhB,AAAWC;;AADde;;;AAlBJ,AAsBE,AAACpB,AACC,AAAAqB,AAAA,AAAA,AAAWb;AAAX,AAAA,AAAAa,AACGjB,AAAWK;;AADdY","names":["shadow.markup.react.impl.interop/element-marker","js/module$node_modules$react$index.createElement","goog.object/get","shadow.markup.react.impl.interop/element?","x","cljs.core/object?","cljs.core._EQ_","shadow.markup.react.impl.interop/convert-props","props","cljs.core/map?","cljs.core/clj->js","js/Error","shadow.markup.react.impl.interop/create-element*","arr","cljs.core/array?","shadow.markup.react.impl.interop/arr-append*","shadow.markup.react.impl.interop/arr-append","tail","cljs.core.reduce","shadow.markup.react.impl.interop/create-element","type","args","vec__27409","seq__27410","cljs.core/seq","first__27411","cljs.core/first","cljs.core/next","head","G__27412","G__27413","G__27414","G__27415","G__27416"],"sourcesContent":["(ns shadow.markup.react.impl.interop\n  (:require [goog.object :as gobj]\n            [\"react\" :as react]))\n\n(def ^{:private true} element-marker\n  (-> (react/createElement \"div\" nil)\n      (gobj/get \"$$typeof\")))\n\n(defn element? [x]\n  (and (object? x)\n       (= element-marker (gobj/get x \"$$typeof\"))))\n\n(defn convert-props [props]\n  (cond\n    (nil? props)\n    #js {}\n    (map? props)\n    (clj->js props)\n    :else\n    props))\n\n;; called from macro\n;; react v16 is really picky, the old direct .children prop trick no longer works\n(defn create-element* [arr]\n  {:pre [(array? arr)]}\n  (.apply react/createElement nil arr))\n\n(defn arr-append* [arr x]\n  (.push arr x)\n  arr)\n\n(defn arr-append [arr tail]\n  (reduce arr-append* arr tail))\n\n;; fallback if the macro didn't do this\n(defn create-element [type args]\n  (let [[head & tail] args]\n    (cond\n      (map? head)\n      (create-element*\n        (doto #js [type (convert-props head)]\n          (arr-append tail)))\n\n      (nil? head)\n      (create-element*\n        (doto #js [type nil]\n          (arr-append tail)))\n\n      (element? head)\n      (create-element*\n        (doto #js [type nil]\n          (arr-append args)))\n\n      (object? head)\n      (create-element*\n        (doto #js [type head]\n          (arr-append tail)))\n\n      :else\n      (create-element*\n        (doto #js [type nil]\n          (arr-append args)))\n      )))\n\n"]}