shadow$provide.module$node_modules$Phaser$src$renderer$webgl$pipelines$BitmapMaskPipeline=function(global,require,module,exports){global=require("module$node_modules$Phaser$src$utils$Class");var ShaderSourceFS=require("module$node_modules$Phaser$src$renderer$webgl$shaders$BitmapMask_frag"),ShaderSourceVS=require("module$node_modules$Phaser$src$renderer$webgl$shaders$BitmapMask_vert"),WebGLPipeline=require("module$node_modules$Phaser$src$renderer$webgl$WebGLPipeline");require=new global({Extends:WebGLPipeline,
initialize:function(config){WebGLPipeline.call(this,{game:config.game,renderer:config.renderer,gl:config.renderer.gl,topology:config.topology?config.topology:config.renderer.gl.TRIANGLES,vertShader:config.vertShader?config.vertShader:ShaderSourceVS,fragShader:config.fragShader?config.fragShader:ShaderSourceFS,vertexCapacity:config.vertexCapacity?config.vertexCapacity:3,vertexSize:config.vertexSize?config.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:(new Float32Array([-1,1,-1,-7,7,1])).buffer,
attributes:[{name:"inPosition",size:2,type:config.renderer.gl.FLOAT,normalized:!1,offset:0}]});this.vertexViewF32=new Float32Array(this.vertexData);this.maxQuads=1;this.resolutionDirty=!0},onBind:function(){WebGLPipeline.prototype.onBind.call(this);var renderer=this.renderer,program=this.program;this.resolutionDirty&&(renderer.setFloat2(program,"uResolution",this.width,this.height),renderer.setInt1(program,"uMainSampler",0),renderer.setInt1(program,"uMaskSampler",1),this.resolutionDirty=!1);return this},
resize:function(width,height,resolution){WebGLPipeline.prototype.resize.call(this,width,height,resolution);this.resolutionDirty=!0;return this},beginMask:function(mask,maskedObject,camera){maskedObject=this.renderer;var gl=this.gl,bitmapMask=mask.bitmapMask;bitmapMask&&gl&&(maskedObject.flush(),maskedObject.setFramebuffer(mask.maskFramebuffer),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT),bitmapMask.renderWebGL(maskedObject,bitmapMask,0,camera),maskedObject.flush(),maskedObject.setFramebuffer(mask.mainFramebuffer),
gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT))},endMask:function(mask){var renderer=this.renderer,gl=this.gl;mask.bitmapMask&&gl&&(renderer.setFramebuffer(null),renderer.setPipeline(this),renderer.setTexture2D(mask.maskTexture,1),renderer.setTexture2D(mask.mainTexture,0),renderer.setInt1(this.program,"uInvertMaskAlpha",mask.invertAlpha),gl.drawArrays(this.topology,0,3))}});module.exports=require}
//# sourceMappingURL=module$node_modules$Phaser$src$renderer$webgl$pipelines$BitmapMaskPipeline.js.map
